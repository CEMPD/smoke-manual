<?xml version="1.0" encoding="UTF-8"?>

<chapter id="ch_dirs_files">

<title>SMOKE Directories and Example Data</title>

<section>

<title>Introduction</title>

<para>The primary user interface for SMOKE is a series of UNIX scripts. (Other interfaces, such as the <ulink url="http://www.epa.gov/asmdnerl/Multimedia/MIMS/">Multimedia Integrated Modeling System</ulink> [MIMS], can also be used.) Because the basic SMOKE installation and instructions use these scripts, a key factor in using SMOKE is understanding the directory structure used for reading input files and writing output files. Additionally, it is critical that users know where to find the run scripts and other files that must be configured for a specific application of SMOKE. <xref linkend="sect_dirs_directory_structure" /> of this chapter describes the default directory structure.</para>

<para>Because SMOKE is based on UNIX scripts, it can also be reconfigured to use a different directory structure. This is useful if SMOKE is to be used from the MIMS interface, incorporated into another modeling system, or modified to suit the needs of a particular user. In <xref linkend="sect_dirs_change_directory" />, we describe what must be done to reconfigure the default directory structure to meet such needs.</para>

<para>In this chapter, we describe the default directory structures set automatically by the Assigns file provided with the default installation of SMOKE. We discuss a basic directory structure and an advanced structure that follow the same approach and can easily be adjusted using the Assigns file. For example, you can change a scenario name in the Assigns file, and this will automatically change all of your intermediate and output directory names. However, these two directory structures are only examples; as noted above, SMOKE is flexible enough to use any structure one wants to create. You could rework the Assigns file (or even completely remove it) if so desired, although this would be a much more complex process than changing a few environment variables. We have developed the SMOKE default directory structure based upon experience gained from many years of emissions modeling; we hope that SMOKE users will find it useful.</para>

<para>In addition to a default directory structure, SMOKE comes with a test case including example data files. <xref linkend="sect_dirs_example_data_files" /> provides descriptions about these files including where the files were obtained. These descriptions are intended to provide you with some background on the data files and a starting point for developing your own modeling files.</para>

</section>

<section id="sect_dirs_directory_structure">

<title>Directory structure</title>

<para>The SMOKE directory structure is the organization of UNIX directories and subdirectories (essentially the same as <quote>folders</quote> on Windows computers). These directories are defined and created using the SMOKE Assigns file. By <quote>defined</quote>, we mean that environment variables are set to the actual path name for each of the directories, and their relationships to one another are implicit in these definitions. As will be described in more detail in <xref linkend="ch_scripts" />, you should create an Assigns file for each modeling case to organize your modeling runs. If created properly, the different Assigns files will cause the intermediate and output directories to be different for each case; this prevents overwriting files from one case with files from another. Some parts of the directory structure are shared by all modeling cases because they are usually the same (e.g., SMOKE support files), but the intermediate and output files are not assumed to be the same because they often differ between cases.</para>

<section id="sect_dirs_example_assigns">

<title>Example Assigns file</title>

<para>Before we can proceed with describing the scripts, we need to introduce the Assigns file. Detailed documentation on this file is provided in <xref linkend="sect_scripts_assigns_files" />. For the purposes of the discussion here, we provide an example Assigns file to help clarify what it is. Because this file is quite lengthy, we have only included excerpts. In this subsection, the Assigns file is simply a set of <command>setenv</command> UNIX commands and calls to helper scripts.</para>

<para>The arrangement within the default Assigns file provided with SMOKE is:</para>

<itemizedlist>
<listitem>
<para>Shell command (e.g., <command>#!/bin/csh -fx</command> for C shell)</para>
</listitem>
<listitem>
<para>Descriptive global comments</para>
</listitem>
<listitem>
<para>Settings for the naming roots</para>
</listitem>
<listitem>
<para>Settings for the episode dates and times</para>
</listitem>
<listitem>
<para>Settings for the directory structure and use of the <filename>set_dirs.scr</filename> helper script</para>
</listitem>
<listitem>
<para>Settings for SMOKE input and output files and calls to other helper scripts</para>
</listitem>
</itemizedlist>

<para>The first settings section is used for naming roots. These settings allow users to set the inventory input and output identifiers, the base-case scenario names, and the grid and chemical mechanism names (see <xref linkend="ch_scripts" /> for more details). The following lines provide the naming roots used in the default Assigns file provided with SMOKE, <filename>ASSIGNS.nctox.cmaq.cb4pm25_wtox.us12-nc</filename>. This file and the helper scripts can be found in the <envar>$ASSIGNS</envar> directory, which we will define in <xref linkend="sect_dirs_basic_smoke_dirs" />.</para>

<programlisting>#
## I/O Naming roots
#
   setenv INVID     nctox        # Inventory input identifier
   setenv INVOP     nctox        # Base year inventory output name
   setenv INVEN     nctox        # Base year inventory name with version

   setenv ABASE     nctox        # Area base case output name
   setenv BBASE     nctox        # Biogenics base case output name
   setenv MBASE     nctox        # Mobile base case output name
   setenv PBASE     nctox        # Point base case output name

   setenv EBASE     nctox        # Output merged base case name

   setenv METSCEN      12km             # Met scenario name
   setenv GRID         us12-nc          # Gridding root for naming
   setenv IOAPI_GRIDNAME_1 US12NC_66X52 # Grid selected from GRIDDESC file
   setenv IOAPI_ISPH   19               # Specifies spheroid type associated with grid
   setenv SPC          cmaq.cb4p25_wtox # Speciation type
</programlisting>

<para>The next section of the file includes the settings for the episode:</para>

<programlisting>## Mobile episode variables
   setenv EPI_STDATE 2001191     # Julian start date
   setenv EPI_STTIME  000000     # start time (HHMMSS)
   setenv EPI_RUNLEN 0480000     # run length (HHHMMSS)
   setenv EPI_NDAY   2           # number of full run days

## Per-period environment variables
   setenv G_STDATE  2001191      # Julian start date
   setenv G_STTIME   000000      # start time (HHMMSS)
   setenv G_TSTEP     10000      # time step  (HHMMSS)
   setenv G_RUNLEN   250000      # run length (HHMMSS)
   setenv ESDATE   20010710      # Start date of emis time-based files/dirs
   setenv MSDATE   20010710      # Start date of met time-based files
   setenv NDAYS           1      # Duration in days of each emissions file
   setenv MDAYS           1      # Duration in days of met time-based files
   setenv YEAR         2001      # Base year for year-specific files
</programlisting>

<para>As described in <xref linkend="ch_scripts" />, these settings control both the way SMOKE runs (e.g., SMOKE uses <envar>EPI_STDATE</envar>, the start date of the episode, to decide what day to start the simulation) and the way SMOKE names files (e.g., <envar>ESDATE</envar> is used to help name time-dependent files).</para>

<para>The next section of the Assigns file is used to set the user-defined input and output directory paths. It uses a helper script called <filename>set_dirs.scr</filename> that applies the initial settings made by the Assigns file to set environment variables for the directories, as described in <xref linkend="sect_dirs_basic_smoke_dirs" />. The <filename>set_dirs.scr</filename> script also verifies that all of the directories are there and that the permissions of the directories are group readable and writable.</para>

<programlisting>## User-defined I/O directory settings
   setenv EDSS_SUBSYS $EDSS_ROOT/subsys              # EDSS subsystem dir
   setenv SMKROOT     $EDSS_SUBSYS/smoke             # System root dir
   setenv SMKDAT      $EDSS_ROOT/data                # Data root dir
   setenv ASSIGNS     $SMKROOT/assigns               # SMOKE assigns files

&lt;omitted section&gt;

## Set dependent directory names
#
source $ASSIGNS/set_dirs.scr
</programlisting>

<para>Now that we have provided a little background on Assigns files, we will spend the rest of this chapter describing the SMOKE directory structure. We will return to discussion of the Assigns file and scripts in <xref linkend="ch_scripts" />. It is important to understand the directory structure information in the rest of this chapter before moving on to <xref linkend="ch_scripts" />.</para>

</section>

<section id="sect_dirs_basic_smoke_dirs">

<title>The basic SMOKE directories</title>

<para>By default, SMOKE is installed in a directory called <envar>EDSS_ROOT</envar> (the complete process for installing SMOKE is described in <xref linkend="ch_installation" />). As shown in the previous section, <envar>EDSS_ROOT</envar> is an environment variable on which other SMOKE directories depend; it is the root directory of all other SMOKE directories. When you install SMOKE, you must define and create your own <envar>EDSS_ROOT</envar> directory as part of the installation process. Since <envar>EDSS_ROOT</envar> is an environment variable, you can choose whatever name you like; we cannot prescribe a name for you because each UNIX user has a different computer and disk names. One recommendation that we can make is that <envar>EDSS_ROOT</envar> be set close to the bottom of a directory structure, such as a short directory name like <filename class="directory">/models</filename>. Using a short directory name will limit the overall directory lengths for some of the subdirectories deep within the SMOKE directory structure. The <envar>EDSS_ROOT</envar> directory used for SMOKE can be the same directory used to install <ulink url="http://www.cep.unc.edu/empd/EDSS/pave_doc/Pave.html">PAVE</ulink> or the <ulink url="http://www.baronams.com/products/ioapi/">I/O API</ulink>.</para>

<para><xref linkend="fig_dirs_basic_dirs" /> shows the first three layers of the SMOKE directory structure. All of the directories in the figure are created during the SMOKE installation process. From the <envar>EDSS_ROOT</envar> directory stems the <filename class="directory">data</filename> directory, the <filename class="directory">scripts</filename> directory, and the <filename class="directory">subsys</filename> directory. The <filename class="directory">data</filename> directory corresponds to the environment variable <envar>SMKDAT</envar>, while the <filename class="directory">subsys</filename> directory corresponds to <envar>EDSS_SUBSYS</envar>; the environment variables are shown in parentheses underneath the actual directory names in the figure. The <filename class="directory">scripts</filename> directory does not have an associated environment variable since we did not feel that one was necessary. The <filename class="directory">subsys</filename> directory is discussed in more detail within this subsection. The <filename class="directory">data</filename> directory will be described more fully in <xref linkend="sect_dirs_location_input_files" />, <xref linkend="sect_dirs_location_intmed_files" />, <xref linkend="sect_dirs_location_output_files" />, and <xref linkend="sect_dirs_location_report_files" />, when we describe the locations of input, intermediate, output, and report files. We will not discuss the <filename class="directory">scripts</filename> directory since it only contains two general setup scripts that should not need to be modified under normal SMOKE use.</para>

<comment>maybe add something more on the scripts directory</comment>

<figure id="fig_dirs_basic_dirs">
<title>Basic SMOKE directories: the first three levels of the directory structure</title>

<mediaobject>
<imageobject role="pdf">
<imagedata width="6.5in" fileref="images/dirs/basic_directories_pdf.jpg" />
</imageobject>
<imageobject role="html">
<imagedata fileref="images/dirs/basic_directories_html.jpg" />
</imageobject>
</mediaobject>
</figure>

<para>The environment variables shown in parentheses are available to you once you invoke the Assigns file from the command line. The run scripts that come with SMOKE invoke the Assigns file to set up the environment variables automatically. To manually invoke the Assigns file, you must go to the <filename class="directory"><envar>$SMKROOT</envar>/assigns</filename> directory and type</para>

<para><userinput><command>source</command> <replaceable>&lt;Assigns file name&gt;</replaceable></userinput></para>

<para>where <replaceable>&lt;Assigns file name&gt;</replaceable> is replaced with your specific Assigns file name. Note that SMOKE only works with variants of the C-shell including <command>csh</command> and <command>tcsh</command>. If you are running a different shell (such as <command>bash</command>), you will need to switch into a C-shell before sourcing the Assigns file or running any SMOKE scripts.</para>

<para>Once this command has been used in a UNIX window (e.g., <command>xterm</command>, <command>terminal</command>, <command>console</command>), then the environment variables are available at the command line or to a script that uses the Assigns file. What this means is that the UNIX environment <quote>remembers</quote> the setting of the environment variable. To access the contents of the variable - in this case, a path name - the dollar sign ($) must be used in front of the variable from a UNIX prompt or script. From the prompt, this is most useful for changing directories. For example, after the Assigns file has been invoked, the command</para>

<para><userinput><command>cd</command> <envar>$SMKDAT</envar></userinput></para>

<para>will take you to the <filename class="directory"><envar>$EDSS_ROOT</envar>/data</filename> directory, no matter where else in the directory structure you were located when the command was issued. Similarly, the Assigns file can use these environment variables for setting the paths for the input and output files.</para>

<para>As shown in <xref linkend="fig_dirs_basic_dirs" />, the <filename class="directory">subsys</filename> directory (creating during installation of SMOKE) contains six subdirectories, each with the following purposes:</para>

<itemizedlist>
<listitem>
<para><filename class="directory">edss_tools</filename>: Contains the source code, makefiles, and library object files for the EDSS Tools library, necessary for compiling SMOKE programs.</para>
</listitem>
<listitem>
<para><filename class="directory">filesetapi</filename>: Contains the source code, makefiles, and library object files for the FileSetAPI library, necessary for compiling SMOKE programs.</para>
</listitem>
<listitem>
<para><filename class="directory">ioapi</filename>: A placeholder location for the I/O API library object files. When compiling SMOKE, the makefiles look here for the I/O API library and the SMOKE scripts look here for the I/O API utility programs. The files can be linked to the main I/O API installation which can be located elsewhere. Please see <xref linkend="ch_installation" /> for more information.</para>
</listitem>
<listitem>
<para><filename class="directory">ioapi_includes</filename>: Location for the I/O API include files, needed for compiling the FileSetAPI library, EDSS Tools library, and SMOKE libraries and programs. All makefiles that come with SMOKE look here for the I/O API include files.</para>
</listitem>
<listitem>
<para><filename class="directory">netcdf</filename>: A placeholder location for the NetCDF library object files. When compiling SMOKE, the makefiles look here for the NetCDF library, but the actual library can be linked to the main NetCDF installation, which can be elsewhere on your computer. Please see <xref linkend="ch_installation" /> for more information.</para>
</listitem>
<listitem>
<para><filename class="directory">smoke</filename>: This is the main SMOKE directory. It contains the Assigns files (one per modeling case), SMOKE source code, makefiles, scripts, and executables.</para>
</listitem>
</itemizedlist>

<para><xref linkend="fig_dirs_subdirs_main" /> shows the subdirectories inside the main SMOKE directory, <filename class="directory">smoke</filename>; these are all created during the installation of SMOKE. These subdirectories contain the Assigns files, source code and makefiles, scripts, and executables.</para>

<figure id="fig_dirs_subdirs_main">
<title>Subdirectories of the main SMOKE directory</title>

<mediaobject>
<imageobject role="pdf">
<imagedata width="6.5in" fileref="images/dirs/subdirs_main_pdf.jpg" />
</imageobject>
<imageobject role="html">
<imagedata fileref="images/dirs/subdirs_main_html.jpg" />
</imageobject>
</mediaobject>
</figure>

<para>These five subdirectories have the following purposes:</para>

<itemizedlist>
<listitem>
<para><filename class="directory">assigns</filename>: Contains the Assigns files and all helper scripts for the Assigns files.</para>
</listitem>
<listitem>
<para><filename class="directory">doc</filename>: Contains the files that the SMOKE installation processes use to check that the installation and testing of SMOKE have worked properly.</para>
</listitem>
<listitem>
<para><filename class="directory"><envar>$EDSS_EXE</envar></filename>: This directory contains the executables for your particular system. Different directory names apply to different platforms (e.g., <filename class="directory">Linux2_x86pg</filename>, <filename class="directory">IRIXn32f90</filename>, <filename class="directory">SunOS5f90</filename>). For more information about the various platforms for which SMOKE is available, see <xref linkend="ch_installation" />.</para>
</listitem>
<listitem>
<para><filename class="directory">scripts</filename>: Contains run scripts and other scripts</para>

<itemizedlist>
<listitem>
<para><filename class="directory">scripts/install</filename>: Scripts to install SMOKE and check the installation</para>
</listitem>
<listitem>
<para><filename class="directory">scripts/make</filename>: Scripts for compiling SMOKE</para>
</listitem>
<listitem>
<para><filename class="directory">scripts/run</filename>: Default run scripts and associated helper scripts</para>
</listitem>
</itemizedlist>

</listitem>
<listitem>
<para><filename class="directory">src</filename>: Contains subdirectories that store the source code and makefiles for each SMOKE program:</para>

<itemizedlist>
<listitem>
<para><filename class="directory">src/biog</filename>: <command>Normbeis3</command>, <command>Rawbio</command>, <command>Tmpbeis3</command>, <command>Tmpbio</command></para>
</listitem>
<listitem>
<para><filename class="directory">src/cntlmat</filename>: <command>Cntlmat</command></para>
</listitem>
<listitem>
<para><filename class="directory">src/emmod</filename>: Fortran 90 modules used by multiple SMOKE programs</para>
</listitem>
<listitem>
<para><filename class="directory">src/emqa</filename>: <command>Smkreport</command></para>
</listitem>
<listitem>
<para><filename class="directory">src/emutil</filename>: <command>Aggwndw</command>, <command>Beld3to2</command>, <command>BlueSky2Inv</command>, <command>CEMScan</command>, <command>Extractida</command>, 
<command>Geofac</command>, <command>Invsplit</command>, <command>Metcombine</command>, <command>Metscan</command>, <command>Pktreduc</command>, <command>Smk2emis</command>, <command>Surgtool</command>, <command>Uam2ncf</command></para>
</listitem>
<listitem>
<para><filename class="directory">src/grdmat</filename>: <command>Grdmat</command></para>
</listitem>
<listitem>
<para><filename class="directory">src/inc</filename>: Include files shared by multiple SMOKE programs</para>
</listitem>
<listitem>
<para><filename class="directory">src/lib</filename>: SMOKE library</para>
</listitem>
<listitem>
<para><filename class="directory">src/mo6</filename>: MOBILE6 library</para>
</listitem>
<listitem>
<para><filename class="directory">src/mobile</filename>: <command>Emisfac</command>, <command>Mbsetup</command>, <command>Premobl</command></para>
</listitem>
<listitem>
<para><filename class="directory">src/point</filename>: <command>Elevpoint</command>, <command>Laypoint</command></para>
</listitem>
<listitem>
<para><filename class="directory">src/smkinven</filename>: <command>Grwinven</command>, <command>Smkinven</command></para>
</listitem>
<listitem>
<para><filename class="directory">src/smkmerge</filename>: <command>Mrgelev</command>, <command>Mrggrid</command>, <command>Smkmerge</command></para>
</listitem>
<listitem>
<para><filename class="directory">src/spcmat</filename>: <command>Spcmat</command></para>
</listitem>
<listitem>
<para><filename class="directory">src/temporal</filename>: <command>Temporal</command></para>
</listitem>
</itemizedlist>

</listitem>
</itemizedlist>

</section>

<section id="sect_dirs_location_input_files">

<title>Locations of input files</title>

<para>Input directories, which contain SMOKE input files, are one of the subdirectory types that make up the <envar>$SMKDAT</envar> directory shown in <xref linkend="fig_dirs_basic_dirs" /> as <filename class="directory"><envar>$EDSS_ROOT</envar>/data</filename>. In this section, we provide the structure of these input directories.</para>

<para><xref linkend="fig_dirs_input_dirs" /> shows all of the input directories that stem from <envar>$SMKDAT</envar>. In the diagram, note how some paths depend on environment variables set in the Assigns file. For example, the <envar>INVID</envar> environment variable listed in <xref linkend="sect_dirs_example_assigns" /> is defined by the user (as we will describe in <xref linkend="ch_scripts" />) to label the inventory name. This variable is used to build the name of the <envar>INVDIR</envar> directory as follows:</para>

<para><envar>INVDIR</envar> = <filename class="directory"><envar>$SMKDAT</envar>/inventory/<envar>$INVID</envar></filename></para>

<para>So, if a user decided to label the inventory <quote>nei99</quote>, then the Assigns file would have <envar>INVID</envar> = nei99 and the <envar>INVDIR</envar> directory would be <filename class="directory"><envar>$SMKDAT</envar>/inventory/nei99</filename>. Another example of this in the figure is the <envar>SMK_M6PATH</envar> directory. The full path depends upon the setting of the <envar>MSCEN</envar> variable; if <envar>MSCEN</envar> is set to <quote>case1</quote>, then <envar>SMK_M6PATH</envar> would be <filename class="directory"><envar>$SMKDAT</envar>/run_case1/static/m6</filename>.</para>

<para>In some cases, we do not have environment variables associated with a directory name. One example is the <filename class="directory"><envar>$SMKDAT</envar>/inventory</filename> directory. In these cases, we did not assign variables simply because they were not very useful and we have to limit the number of SMOKE environment variables. Most operating systems have a limit on the number of environment variables (usually 256), so when the variables were not really useful we did not assign them. If desired, you can add environment variables to the Assigns file and/or the <filename>set_dirs.scr</filename> helper script.</para>

<figure id="fig_dirs_input_dirs">
<title>SMOKE input files directory structure</title>

<mediaobject>
<imageobject role="pdf">
<imagedata width="6.5in" fileref="images/dirs/input_dirs_pdf.jpg" />
</imageobject>
<imageobject role="html">
<imagedata fileref="images/dirs/input_dirs_html.jpg" />
</imageobject>
</mediaobject>
</figure>

<para>In the list below, we describe the purpose of each of these directories, along with the file names and in some cases file descriptions for those files that you may need to change. You can refer to <xref linkend="ch_input_files" /> for more information about each of these files (look under the logical file names). <xref linkend="ch_scripts" /> provides step-by-step instructions on how to create and install each of the files listed.</para>

<itemizedlist>
<listitem>
<para><filename class="directory">ge_dat</filename>: This directory contains the cross-reference files, profile files, spatial surrogates, and other files that are likely to be shared among multiple cases of processing inventories with SMOKE. The logical file names for files included in this directory are listed here; many physical files could be available in the <filename class="directory">ge_dat</filename> directory for each file type. For example, you may have dozens of surrogate files for different modeling grids and several speciation profiles for different model-mechanism combinations. More detailed descriptions of these files are in <xref linkend="ch_input_files" />; descriptions of the example files provide with SMOKE are in <xref linkend="sect_dirs_example_data_files" />.</para>

<itemizedlist>
<listitem>
<para><envar>AGPRO</envar>, <envar>BGPRO</envar>, <envar>MGPRO</envar>: The spatial surrogates file for nonpoint (stationary area)/nonroad, biogenics (for using county-total land use in <command>Rawbio</command> and/or computing county-total emissions with <command>Smkmerge</command>), and on-road mobile sources. These three logical file names can all reference the same physical file.</para>
</listitem>

<listitem>
<para><envar>AGREF</envar>, <envar>MGREF</envar>: The spatial cross-reference files for nonpoint (stationary area)/nonroad and on-road mobile sources. These two logical file names can all reference the same physical file.</para>
</listitem>

<listitem>
<para><envar>ATPRO</envar>, <envar>MTPRO</envar>, <envar>PTPRO</envar>: The temporal profiles files for nonpoint (stationary area)/nonroad, on-road mobile, and point sources. These three logical file names can all reference the same physical file.</para>
</listitem>

<listitem>
<para><envar>ATREF</envar>, <envar>MTREF</envar>, <envar>PTREF</envar>: The temporal cross-reference files for nonpoint (stationary area)/nonroad, on-road mobile, and point sources. These three logical file names can all reference the same physical file.</para>
</listitem>

<listitem>
<para><envar>B3FAC</envar>: The BEIS3 normalized emission factors.</para>
</listitem>

<listitem>
<para><envar>B3XRF</envar>: The BELD3-to-BELD2 land use cross-reference.</para>
</listitem>

<listitem>
<para><envar>BCUSE</envar>: The BEIS2 county-total land use for all U.S. counties.</para>
</listitem>

<listitem>
<para><envar>BFAC</envar>, <envar>S_BFAC</envar>, <envar>W_BFAC</envar>: The default, summer, and winter BEIS2 normalized emission factors.</para>
</listitem>

<listitem>
<para><envar>BIOSEASON</envar>: I/O API file indicating which grid cells in a domain are winter and which are summer for biogenics modeling purposes, for each day of the year or episode.</para>
</listitem>

<listitem>
<para><envar>COSTCY</envar>: The country, state, and county information file.</para>
</listitem>

<listitem>
<para><envar>GRIDDESC</envar>: The grid definitions file.</para>
</listitem>

<listitem>
<para><envar>GSREF</envar>, <envar>GSPRO</envar>, <envar>GSCNV</envar>: The chemical speciation cross-reference file, speciation profiles file, and pollutant-to-pollutant conversion file (e.g., VOC-to-TOG factors), respectively.</para>
</listitem>

<listitem>
<para><envar>HOLIDAYS</envar>: The dates that SMOKE should process as holidays and the day of the week to use for each date instead of its actual day of the week (the substitute is usually a Saturday or Sunday).</para>
</listitem>

<listitem>
<para><envar>PSTK</envar>: The point-source replacement stack parameters.</para>
</listitem>

<listitem>
<para><envar>SCCDESC</envar>, <envar>SRGDESC</envar>, <envar>ORISDESC</envar>, <envar>SICDESC</envar>, <envar>MACTDESC</envar>, <envar>NAICSDESC</envar>: The descriptions of each known SCC, surrogate code, ORIS ID, SIC code, MACT code, and NAICS code.</para>
</listitem>

<listitem>
<para><envar>VNAMMAP</envar>: The name-mapping file for transforming the I/O API file model-species names to the names used by the model (e.g., renaming CD for REMSAD to CD-1).</para>
</listitem>

</itemizedlist>

</listitem>
<listitem>
<para><filename class="directory">inventory</filename>: The location of all inventory files for each inventory case (as defined by the <envar>$INVID</envar> environment variable in an Assigns file), land use data, and other data.</para>

<itemizedlist>
<listitem>
<para><filename class="directory"><envar>$INVID</envar></filename>: This directory name depends on the name given to the inventory in the Assigns file. (This is the case for any directory name in the figure that is preceded with <quote>$</quote> to indicate that it is an environment variable.) The files in the subdirectories are specific to your inventory files and modeling case. This directory contains subdirectories for each of the major source categories by default:</para>

<itemizedlist>
<listitem>
<para><filename class="directory">area</filename>: Contains the nonpoint or stationary area inventories. Optionally, it may contain nonroad mobile inventories. Can include <emphasis>any</emphasis> inventory that will be processed as a SMOKE area source (e.g. criteria, particulates, and/or toxics inventories). Files should include:</para>

<itemizedlist>
<listitem>
<para><envar>ARINV</envar> (raw area-source inventory file). If this is a list file, the files listed within it should also be included in this directory.</para>
</listitem>

<listitem>
<para><envar>GCNTL</envar> (control packet file). The growth and control packet files for each growth or control scenario. The default naming scheme for these files is described in the default SMOKE scripts.</para>
</listitem>
</itemizedlist>

</listitem>
<listitem>
<para><filename class="directory">biog</filename>: Contains the gridded BELD3 land use data. These files are listed in the Assigns files as <envar>BELD3_A</envar>, <envar>BELD3_B</envar>, and <envar>BELD3_TOT</envar>. This directory could optionally contain the gridded BELD2 land use data (if processing using BEIS2); this file is listed in the Assigns file as <envar>BGUSE</envar>.</para>
</listitem>
<listitem>
<para><filename class="directory">nonroad</filename>: Optional directory for the nonroad mobile inventory, if it is not included with the other SMOKE area sources in the area directory. Files should include:</para>

<itemizedlist>
<listitem>
<para><envar>GCNTL</envar> (control packet file). The growth and control packet files for each growth or control scenario. The default naming scheme for these files is described in the default SMOKE scripts.</para>
</listitem>

<listitem>
<para><envar>NRINV</envar> (raw nonroad-mobile-source inventory file). If this is a list file, the files listed within it should also be included in this directory.</para>
</listitem>
</itemizedlist>

</listitem>
<listitem>
<para><filename class="directory">mobile</filename>: Contains the on-road mobile inventory and other on-road mobile-specific input files. Files should include:</para>

<itemizedlist>
<listitem>
<para><envar>GCNTL</envar> (control packet file). The growth and control packet files for each growth or control scenario. The default naming scheme for these files is described in the default SMOKE scripts.</para>
</listitem>

<listitem>
<para><envar>M6LIST</envar> (MOBILE6 input files list). With the default SMOKE scripts, this file is generated automatically based on the <envar>MCREF</envar> file and the files listed in the <filename class="directory">m6_<envar>$EF_YEAR</envar></filename> subdirectory of this directory. Contains a list of the MOBILE6 inputs files for each reference county.</para>
</listitem>

<listitem>
<para><envar>M6MAP</envar>: (vehicle mapping file). For MOBILE6 modeling only, contains information on how to map the 28 MOBILE6 vehicle types to the vehicle types used in the mobile inventory.</para>
</listitem>

<listitem>
<para><envar>MBINV</envar> (raw on-road mobile-source inventory file). If this is a list file, the files listed within it should also be included in this directory.</para>
</listitem>

<listitem>
<para><envar>MCODES</envar> (mobile-source codes file). Contains list of valid on-road SCCs, vehicle types, and road class codes.</para>
</listitem>

<listitem>
<para><envar>MCREF</envar> (mobile-source county cross-reference). For MOBILE6 modeling only, contains the reference county assignments (see <xref linkend="sect_concepts_reference_counties" /> for an explanation of reference counties).</para>
</listitem>

<listitem>
<para><envar>MEPROC</envar> (mobile-source processing file). For MOBILE6 modeling only, contains the pollutants to be modeled by MOBILE6 and the emission processes (e.g., exhaust running) associated with each.</para>
</listitem>

<listitem>
<para><envar>METLIST</envar> (meteorology input files list). With the default SMOKE scripts, this file is generated automatically based on the meteorology files in the <envar>$METDAT</envar> directory.</para>
</listitem>

<listitem>
<para><envar>MVREF</envar> (mobile-source county settings). For MOBILE6 modeling only, contains the reference county and its temporal averaging, spatial averaging, and local-road approach settings.</para>
</listitem>

<listitem>
<para><envar>SPDPRO</envar> (speed profiles file). For MOBILE6 modeling only, contains the optional hour-specific speed profiles.</para>
</listitem>

<listitem>
<para><envar>SPDREF</envar> (speed profiles cross-reference file). For MOBILE6 modeling only with optional hour-specific speed profiles, contains the cross-reference assignments for the speed profiles in the <envar>SPDPRO</envar> file to the inventory sources.</para>
</listitem>

<listitem>
<para><envar>VMTMIX</envar> (VMT mix file). For EMS-95 input only, contains the VMT mix (fractions used to disaggregate VMT by vehicle type).</para>
</listitem>
</itemizedlist>

</listitem>
<listitem>
<para><filename class="directory">mobile/m6_<envar>$EF_YEAR</envar></filename>: This subdirectory is used only when MOBILE6 will be used with SMOKE, and must contain the MOBILE6 input scenario files in standard MOBILE6 input format for each of the reference counties in the domain. The <envar>$EF_YEAR</envar> variable is set by the <envar>$YEAR</envar> variable in the Assigns file for base-case runs or by the <envar>$FYEAR</envar> variable from the run script for future-year runs (see <xref linkend="sect_dirs_location_intmed_growth" /> for more information on the <envar>FYEAR</envar> setting).</para>
</listitem>
<listitem>
<para><filename class="directory">point</filename>: Contains the point-source inventory and other point-specific input files. Files should include:</para>

<itemizedlist>
<listitem>
<para><envar>CEMSUM</envar> (CEM summary file). When processing CEM data, this file contains a summary of a year&rsquo;s worth of CEM data and is produced by <command>CEMScan</command>.</para>
</listitem>

<listitem>
<para><envar>GCNTL</envar> (control packet file). The growth and control packet files for each growth or control scenario. The default naming scheme for these files is described in the default SMOKE scripts.</para>
</listitem>

<listitem>
<para><envar>PELVCONFIG</envar> (elevated-source selection configuration file). When using the <command>Elevpoint</command> program to select elevated and PinG sources, this file is required to specify the selection criteria.</para>
</listitem>

<listitem>
<para><envar>PTDAY</envar> (raw day-specific point-source inventory file). If this optional file is a list file, which is typically the case, the files listed within it should also be included in this directory.</para>
</listitem>

<listitem>
<para><envar>PTHOUR</envar> (raw hour-specific point-source inventory file). If this optional file is a list file, which is typically the case, the files listed within it should also be included in this directory.</para>
</listitem>

<listitem>
<para><envar>PTINV</envar> (raw point-source inventory file). If this is a list file (required for EMS-95 inputs), the files listed within it should also be included in this directory.</para>
</listitem>
</itemizedlist>

</listitem>
</itemizedlist>

</listitem>
<listitem>
<para><filename class="directory">other</filename>: Contains files that are associated with the various inventories, but which may be shared by more than one source category. These files are:</para>

<itemizedlist>
<listitem>
<para><envar>ARTOPNT</envar> (area-to-point file). Contains the area-to-point assignments by SCC with the point locations for each county in which a SMOKE area source will be assigned to point locations.</para>
</listitem>

<listitem>
<para><envar>INVTABLE</envar> (inventory table file). Contains a list of the valid inventory pollutants and whether or not emissions associated with each pollutant should be kept when reading the inventory files, among other purposes.</para>
</listitem>

<listitem>
<para><envar>NHAPEXCLUDE</envar> (non-HAP exclusions file). Contains the SCCs that will be excluded from a NONHAPVOC or NONHAPTOG calculation when integrating toxics and criteria inventories.</para>
</listitem>

<listitem>
<para><envar>REPCONFIG</envar> (report configuration file). Contains instructions used by <command>Smkreport</command> to configure reports. The SMOKE installation includes only the <envar>REPCONFIG</envar> files for the default reports included with the SMOKE default scripts.</para>
</listitem>
</itemizedlist>

</listitem>
</itemizedlist>

</listitem>
<listitem>
<para><filename class="directory">met/run_<envar>$METSCEN</envar></filename>: This directory contains the meteorology files that are needed for running (1) biogenic emissions; (2) on-road mobile sources with MOBILE6 using gridded, hourly meteorology data; or (3) point sources for the CMAQ or MAQSIP models. Meteorology data are required in all of these cases. SMOKE can use output files from CMAQ&rsquo;s MCIP and MCIP2 meteorology processors or from the Meteorology Coupler (MCPL) processor. SMOKE automatically checks for the different variable names that may be used for the same meteorology data in the different file formats. See <xref linkend="sect_input_meteorology" /> for more information about the meteorology data needed by SMOKE.</para>
</listitem>
<listitem>
<para><filename class="directory">run_<envar>$MSCEN</envar>/static/m6</filename>: For MOBILE6 modeling only, this directory must contain the ancillary MOBILE6 inputs needed for running MOBILE6. <xref linkend="sect_scripts_use_mobile6" /> contains a description of the files that are required and their dependencies on MOBILE6 commands. Some files are needed only when certain MOBILE6 input commands are used.</para>
</listitem>
</itemizedlist>

</section>

<section id="sect_dirs_location_intmed_files">

<title>Locations of intermediate files for base and growth/control cases</title>

<para>The intermediate files for SMOKE are located in three primary directories for each case: the inventory output directory (<envar>$INVOPD</envar>), the scenario directory (<envar>$SCENARIO</envar>), and the static files directory (<envar>$STATIC</envar>). All intermediate file locations are subdirectories of the <envar>$SMKDAT</envar> directory shown in <xref linkend="fig_dirs_basic_dirs" /> as <filename class="directory"><envar>$EDSS_ROOT/data</envar></filename>. Note that <xref linkend="fig_dirs_files_base" />, <xref linkend="fig_dirs_files_advanced" />, and <xref linkend="fig_dirs_files_growth" /> show both intermediate and output directories. Here we focus only on the intermediate directories; the output directories are discussed in <xref linkend="sect_dirs_location_output_files" />.</para>

<section id="sect_dirs_location_intmed_base">

<title>Basic configuration for base case</title>

<para><xref linkend="fig_dirs_files_base" /> shows the SMOKE intermediate directories for a basic configuration of a base case. In this configuration, the Assigns file variables <envar>ASCEN</envar>, <envar>BSCEN</envar>, <envar>MSCEN</envar>, <envar>PSCEN</envar>, and <envar>ESCEN</envar> are all set to the same value. These variables are the scenario names for the four processing categories (area, biogenic, mobile, and point) and the combined category (used when combining emissions from multiple source categories). Having these variables set to the same value allows a simpler structure in which the <filename class="directory">run_<envar>$ESCEN</envar></filename> directory is the same as the <filename class="directory">run_<envar>$ASCEN</envar></filename>, <filename class="directory">run_<envar>$BSCEN</envar></filename>, <filename class="directory">run_<envar>$MSCEN</envar></filename>, and <filename class="directory">run_<envar>$PSCEN</envar></filename> directories. In the figure, this single directory is shown simply as <filename class="directory">run_<envar>$ESCEN</envar></filename>.</para>

<para>The <envar>$BSCEN</envar> setting for biogenic sources is often set to a different scenario name, usually simply <quote>beld2</quote> or <quote>beld3</quote>. This is because there are not very many scenarios to choose from for biogenic emissions, since users almost always want to use one of the standard approaches and there are usually no control strategies considered for biogenic emissions. In this case, the <filename class="directory">run_<envar>$BSCEN</envar></filename> directory is a separate branch in the directory structure that stores just the biogenic files for use by both base case and future-year control scenarios. For the nctox test case, we have not used this approach since the biogenic data is specific to the nctox modeling domain.</para>

<figure id="fig_dirs_files_base">
<title>Locations of intermediate and output files for SMOKE base case, basic configuration</title>

<mediaobject>
<imageobject role="pdf">
<imagedata width="6.5in" fileref="images/dirs/files_base_pdf.jpg" />
</imageobject>
<imageobject role="html">
<imagedata fileref="images/dirs/files_base_html.jpg" />
</imageobject>
</mediaobject>
</figure>

<para>The following list describes the intermediate files that are associated with each of the intermediate directories <envar>$INVOPD</envar>, <envar>$SCENARIO</envar>, and <envar>$STATIC</envar>. You can refer to <xref linkend="ch_intermediate_files" /> for more information about each of the intermediate files (look under the logical file names).</para>

<itemizedlist>
<listitem>
<para><filename class="directory">inventory/<envar>$INVEN</envar></filename>: This directory contains the SMOKE intermediate inventory files, including the directories associated with them. These files are the outputs from <command>Smkinven</command>, <command>Tmpbeis3</command>, and <command>Tmpbio</command>. The outputs from <command>Smkinven</command> are map-formatted (see below for more information) while the biogenic outputs are I/O API NetCDF format. The subdirectories <filename class="directory">area_dat</filename>, <filename class="directory">mobl_dat</filename>, <filename class="directory">nroad_dat</filename>, and <filename class="directory">pnts_dat</filename> contain the files that store the emissions values for each pollutant in the inventory. The intermediate files in this directory include:</para>

<itemizedlist>
<listitem>
<para><envar>AREA</envar>: Map-formatted SMOKE intermediate files for nonpoint/stationary area sources (from the <envar>ARINV</envar> input file) and/or nonroad mobile sources (from either the <envar>ARINV</envar> input file or from the <envar>NRINV</envar> input file if nonroad mobile sources are being run separately from other SMOKE area sources). Example file names include <filename>area.map.<envar>$INVOP</envar>.txt</filename> and <filename>nroad.map.<envar>$INVOP</envar>.txt</filename>.</para>

<para>The data from the inventories is stored in several different files, both ASCII and I/O API format. The map-formatted intermediate files are used to organize and keep track of these separate files. See <xref linkend="ch_intermediate_files" /> for an example and further discussion of the intermediate inventory files. For the <envar>AREA</envar> file, the additional inventory files <filename>area.ncf</filename> and <filename>asrc.txt</filename> are stored in the <envar>$INVOPD</envar> directory. The pollutant-specific files are stored in the <filename class="directory">area_dat</filename> directory. For the <envar>NROAD</envar> file, the files are named <filename>nroad.ncf</filename> and <filename>nsrc.txt</filename> and the pollutant-specific files are placed in the <filename class="directory">nroad_dat</filename> directory.</para>
</listitem>

<listitem>
<para><envar>ASCC</envar>: List of area-source SCCs in the inventory. Can include <filename>ASCC.<envar>$INVOP</envar>.txt</filename> and <filename>NSCC.<envar>$INVOP</envar>.txt</filename> (e.g., <filename>ASCC.nei99.txt</filename> and <filename>NSCC.nei99.txt</filename>).</para>
</listitem>

<listitem>
<para><envar>B3GRD</envar>: Normalized gridded biogenic emissions.</para>
</listitem>

<listitem>
<para><envar>MOBL</envar>: Map-formatted SMOKE intermediate file for on-road mobile sources. Example file name is <filename>mobl.map.<envar>$INVOP</envar>.txt</filename>. The additional inventory files are named <filename>mobl.ncf</filename> and <filename>msrc.txt</filename>, and the pollutant-specific files are placed in the <filename class="directory">mobl_dat</filename> directory.</para>
</listitem>

<listitem>
<para><envar>MSCC</envar>: List of on-road mobile-source SCCs in the inventory; e.g., <filename>MSCC.<envar>$INVOP</envar>.txt</filename>.</para>
</listitem>

<listitem>
<para><envar>PDAY</envar>: The day-specific SMOKE intermediate inventory.</para>
</listitem>

<listitem>
<para><envar>PHOUR</envar>: The hour-specific SMOKE intermediate inventory.</para>
</listitem>

<listitem>
<para><envar>PNTS</envar>: Map-formatted SMOKE intermediate file for point sources. Example file name is <filename>pnts.map.<envar>$INVOP</envar>.txt</filename>. The additional inventory files are named <filename>pnts.ncf</filename> and <filename>psrc.txt</filename>, and the pollutant-specific files are placed in the <filename class="directory">pnts_dat</filename> directory.</para>
</listitem>

<listitem>
<para><envar>PSCC</envar>: List of point-source SCCs in the inventory; e.g., <filename>PSCC.<envar>$INVOP</envar>.txt</filename>.</para>
</listitem>
</itemizedlist>

</listitem>
<listitem>
<para><filename class="directory">reports</filename>: Discussed in <xref linkend="sect_dirs_location_report_files" /></para>
</listitem>
<listitem>
<para><filename class="directory">run_<envar>$BSCEN</envar>/output/<envar>$SPC</envar></filename>: Contains the hourly, gridded, speciated biogenic emissions files. These are listed in this subsection for intermediate files because in some cases these are not ready for the AQM, because the units need to be converted. <command>Tmpbio</command> outputs emissions in moles/hr and <command>Tmpbeis3</command> can output emissions in either moles/hr or moles/s. The CMAQ model needs data in units of moles/s.</para>
</listitem>
<listitem>
<para><filename class="directory">run_<envar>$ESCEN</envar>/output</filename>: Discussed in <xref linkend="sect_dirs_location_output_files" /></para>
</listitem>
<listitem>
<para><filename class="directory">run_<envar>$ESCEN</envar>/scenario</filename>: Contains the intermediate hourly emissions files and other time-dependent files. The intermediate files in this directory include:</para>

<itemizedlist>
<listitem>
<para><envar>ATMP</envar>, <envar>MTMP</envar>, <envar>PTMP</envar>: The area/nonroad, mobile, and point hourly emissions created by the <command>Temporal</command> program.</para>
</listitem>

<listitem>
<para><envar>ATSUP</envar>, <envar>MTSUP</envar>, <envar>PTSUP</envar>: The area/nonroad, mobile, and point temporal allocation supplementary files.</para>
</listitem>

<listitem>
<para><envar>PLAY</envar>: The point-source hourly layer fraction for each source.</para>
</listitem>

<listitem>
<para><envar>PLAY_EX</envar>: The point-source hourly layer fractions for <emphasis>explicit</emphasis> plume rise sources when processing for UAM, CAM<subscript>X</subscript>, or REMSAD.</para>
</listitem>
</itemizedlist>

</listitem>
<listitem>
<para><filename class="directory">run_<envar>$ESCEN</envar>/static</filename>: Contains the matrices and other time-independent files. The intermediate files in this directory include:</para>

<itemizedlist>
<listitem>
<para><envar>ACMAT</envar>, <envar>MCMAT</envar>, <envar>PCMAT</envar>: The area/nonroad, mobile, and point multiplicative control matrices.</para>
</listitem>

<listitem>
<para><envar>AGMAT</envar>, <envar>MGMAT</envar>, <envar>PGMAT</envar>: The area/nonroad, mobile, and point gridding matrices.</para>
</listitem>

<listitem>
<para><envar>AGSUP</envar>, <envar>MGSUP</envar>: The area/nonroad and mobile supplementary gridding files.</para>
</listitem>

<listitem>
<para><envar>APMAT</envar>, <envar>MPMAT</envar>, <envar>PPMAT</envar>: The area/nonroad, mobile, and point growth matrices.</para>
</listitem>

<listitem>
<para><envar>ARMAT</envar>, <envar>MRMAT</envar>, <envar>PRMAT</envar>: The area/nonroad, mobile, and point reactivity control matrices.</para>
</listitem>

<listitem>
<para><envar>ARSUP</envar>, <envar>MRSUP</envar>, <envar>MRSUP</envar>: The area/nonroad, mobile, and point reactivity supplementary files.</para>
</listitem>

<listitem>
<para><envar>ASMAT_L</envar>, <envar>MSMAT_L</envar>, <envar>PSMAT_L</envar>: The area/nonroad, mobile, and point mole-based speciation matrices.</para>
</listitem>

<listitem>
<para><envar>ASMAT_S</envar>, <envar>MSMAT_S</envar>, <envar>PSMAT_S</envar>: The area/nonroad, mobile, and point mass-based speciation matrices.</para>
</listitem>

<listitem>
<para><envar>ASSUP</envar>, <envar>MSSUP</envar>, <envar>PSSUP</envar>: The area/nonroad, mobile, and point supplementary speciation files.</para>
</listitem>

<listitem>
<para><envar>DAILYGROUP</envar>, <envar>WEEKLYGROUP</envar>, <envar>MONTHLYGROUP</envar>, <envar>EPISODEGROUP</envar>: The temporal averaging groups for on-road mobile sources and MOBILE6 processing.</para>
</listitem>

<listitem>
<para><envar>MUMAT</envar>: The mobile ungridding matrix.</para>
</listitem>

<listitem>
<para><envar>PELV</envar>: The point-source elevated- and PinG-source selection file</para>
</listitem>

<listitem>
<para><envar>SPDSUM</envar>: The speeds summary file for on-road mobile sources and MOBILE6 processing.</para>
</listitem>

<listitem>
<para><filename class="directory"><envar>$LOGS</envar></filename>: Contains the log files created when the SMOKE programs are run</para>
</listitem>
</itemizedlist>

</listitem>
</itemizedlist>

</section>

<section id="sect_dirs_location_intmed_advanced">

<title>Advanced configuration for base case</title>

<para>Instead of using the basic configuration technique of setting the scenario name variables (<envar>ASCEN</envar>, <envar>BSCEN</envar>, <envar>MSCEN</envar>, <envar>PSCEN</envar>, and <envar>ESCEN</envar>) all to the same value (<xref linkend="sect_dirs_location_intmed_base" />), you can set up an Assigns file to use different values for one or more of these variable. In this more advanced configuration, separate directories are created and used for intermediate and output files for each source category (examples of when this would be useful are given in the bullets below). <xref linkend="fig_dirs_files_advanced" /> illustrates the directory structure resulting from this approach; however, for simplicity&rsquo;s sake, we have not included all of the files in this structure. The files are the same as in <xref linkend="fig_dirs_files_base" />, with the exception that files specific to a source category go to their category-specific directories, based on the values given to <envar>ASCEN</envar>, <envar>BSCEN</envar>, <envar>MSCEN</envar>, and/or <envar>PSCEN</envar>. Note that the nonpoint (stationary area) and nonroad mobile sources would need to use the same scenario name, even if they are processed separately, because the nonroad mobile <filename class="directory">static</filename> and <filename class="directory">scenario</filename> directories are set using the same <envar>ASCEN</envar> variable as for other area sources in the default Assigns files. Having separate source-category-specific directories does not change the number of intermediate or output files, it just rearranges the files and results into fewer intermediate, output, and/or report files in each directory.</para>

<para>This approach is particularly useful in the following cases:</para>

<itemizedlist>
<listitem>
<para><emphasis role="bold">Using toxic inventories for some source categories but not others:</emphasis> In this case, different scenario names (<envar>ASCEN</envar>, <envar>MSCEN</envar>, <envar>PSCEN</envar>, and <envar>ESCEN</envar>) can be used to distinguish each case and the final-merged files (though it is not required to do this). For example, if you were running toxics for on-road mobile sources only, <envar>MSCEN</envar> could be set to <quote>case1_tox</quote>, while <envar>ASCEN</envar> and <envar>PSCEN</envar> could be set to just <quote>case1</quote> and <envar>ESCEN</envar> could be <quote>case1_all</quote>. If you would prefer instead to name all of these <quote>case1</quote> and simply remember that on-road mobile sources include toxics, then that would be fine as well.</para>
</listitem>
<listitem>
<para><emphasis role="bold">Using the <command>Mrggrid</command> program to combine model-ready files from several previously run scenarios:</emphasis> For example, you might want to combine the future-year base case for all source categories except nonroad with a future-year control case for nonroad, as part of an evaluation of the impact of the nonroad control case. If three previous Assigns files were set up using the basic structure for three different control cases (case1, case2, and case3), and a new case is needed that uses area sources from case1, on-road mobile sources from case2, and point sources from case3, you could set up a new Assigns file that sets <envar>ASCEN</envar> to case1, <envar>MSCEN</envar> to case2, and <envar>PSCEN</envar> to case3. When you invoke that new Assigns file, all of the environment variables needed by <command>Mrggrid</command> for combining the model-ready files from the three different cases would be set: <envar>AGTS_L</envar> would be based on case1, <envar>MGTS_L</envar> would be based on case2, and <envar>PGTS3D_L</envar> would be based on case3. See <xref linkend="sect_dirs_location_output_files" /> for more information on the model-ready files.</para>
</listitem>
</itemizedlist>

<figure id="fig_dirs_files_advanced">
<title>Locations of intermediate and output files for SMOKE base case, advanced configuration</title>

<mediaobject>
<imageobject role="pdf">
<imagedata width="6.5in" fileref="images/dirs/files_advanced_pdf.jpg" />
</imageobject>
<imageobject role="html">
<imagedata fileref="images/dirs/files_advanced_html.jpg" />
</imageobject>
</mediaobject>
</figure>

</section>

<section id="sect_dirs_location_intmed_growth">

<title>Configuration for growth and/or control case</title>

<para>The directory structure changes for growth and control cases. The default growth and control scripts have additional settings that impact the intermediate directories when running SMOKE. These settings are described in more detail in <xref linkend="ch_scripts" />, but we introduce them here because they are closely linked to the directory structures used by SMOKE. The default configuration of SMOKE uses different directories for files impacted by growth and control so that they will be separated from the base-year files; this helps keep users from accidentally confusing their base and grown and/or controlled files.</para>

<para>The key script environment variables that impact the directory structures are:</para>

<itemizedlist>
<listitem>
<para><envar>CNTLCASE</envar>: Sets the name of the control case that will impact the directory names. Also is used by the scripts to set the required name of the <envar>GCNTL</envar> files containing the packets for defining growth and controls for the <command>Cntlmat</command> program.</para>
</listitem>
<listitem>
<para><envar>FYEAR</envar>: Sets the future year with a four-digit year. The last two digits of the year are used to set the internal variable <envar>fyr2</envar>. For example, if <envar>FYEAR</envar> is set to 2018, <envar>fyr2</envar> will be 18. <envar>FYEAR</envar> is also used by the scripts to set the required name of the <envar>GCNTL</envar> files containing the packets for defining growth and controls for the <command>Cntlmat</command> program.</para>
</listitem>
<listitem>
<para><envar>SMK_FUTURE_YN</envar>: When set to Y, this setting causes the Assigns file to change the SMOKE intermediate inventory file names by inserting <envar>$fyr2</envar> into the individual file names. The Assigns file also changes the intermediate and output paths by appending <envar>$fyr2</envar> to <envar>$ASCEN</envar>, <envar>$MSCEN</envar>, <envar>$PSCEN</envar>, and <envar>$ESCEN</envar> (affecting the <envar>$STATIC</envar> and <envar>$SCENARIO</envar> directories and file names of intermediate files). This is illustrated in <xref linkend="fig_dirs_files_growth" />. The Y setting also causes <envar>EF_YEAR</envar>, which is used for setting the MOBILE6 emission factors year, to be set to <envar>$FYEAR</envar>.</para>
</listitem>
<listitem>
<para><envar>SMK_CONTROL_YN</envar>: When set to Y, this setting causes the Assigns file to change the SMOKE intermediate inventory file names by inserting <envar>$CNTLCASE</envar> into the individual file names. The Assigns file also changes the intermediate and output paths by appending <envar>$CNTLCASE</envar> to <envar>$ASCEN</envar>, <envar>$MSCEN</envar>, <envar>$PSCEN</envar>, and <envar>$ESCEN</envar> (affecting the <envar>$STATIC</envar> and <envar>$SCENARIO</envar> directories and file names of intermediate files).</para>
</listitem>
</itemizedlist>

<figure id="fig_dirs_files_growth">
<title>Locations of intermediate and output files for SMOKE future-/past-year case</title>

<mediaobject>
<imageobject role="pdf">
<imagedata width="6.5in" fileref="images/dirs/files_growth_pdf.jpg" />
</imageobject>
<imageobject role="html">
<imagedata fileref="images/dirs/files_growth_html.jpg" />
</imageobject>
</mediaobject>
</figure>

<para>The <envar>$SCENARIO</envar> directory for the future case is now a subdirectory of <filename class="directory">data/run_<envar>$ESCEN</envar>_<envar>$fyr2</envar></filename>. The <envar>ATMP</envar>, <envar>MTMP</envar>, and <envar>PTMP</envar> files are stored in this directory, because these depend on the future-year emissions inventory. Although the temporal profile assignments stored in the <envar>ATSUP</envar>, <envar>MTSUP</envar>, and <envar>PTSUP</envar> files may not have changed from the base case, these files are written out for the future-/past-year case to be consistent with the output files created by <command>Temporal</command> for the base case.</para>

<para>The <envar>$STATIC</envar> directory for the future case is now a subdirectory of <filename class="directory">data/run_<envar>$ESCEN</envar>_<envar>$fyr2</envar></filename>. However, unlike <xref linkend="fig_dirs_files_base" />, <xref linkend="fig_dirs_files_growth" /> indicates that only the <envar>PELV</envar> file is stored in this directory. This is because SMOKE permits reusing the base-year gridding matrices and speciation matrices for growth and control cases. The growth and control matrices will also be stored in the base-year <envar>$STATIC</envar> directory. Therefore, the only file that is stored in the future-year <envar>$STATIC</envar> directory is the <envar>PELV</envar> file, which can depend on the emissions values in the future year. For example, if the elevated-source selection criteria were based on the future-year daily maximum emissions, then this <envar>PELV</envar> file would be different than the base-year file. It is therefore most safely stored in a directory that is named with the future-year (or control case) information.</para>

<para>When using controls only (no growth), <envar>$SCENARIO</envar> and <envar>$STATIC</envar> will be subdirectories of <filename class="directory">data/run_<envar>$ESCEN</envar>_<envar>$CNTLCASE</envar></filename>. For the case of growth and controls, the directory will be named <filename class="directory">data/run_<envar>$ESCEN</envar>_<envar>$fyr2</envar>_<envar>$CNTLCASE</envar></filename>.</para>

</section>

</section>

<section id="sect_dirs_location_output_files">

<title>Locations of model-ready output files for base and growth/control cases</title>

<section id="sect_dirs_location_output_base">

<title>Configuration for base case</title>

<para><xref linkend="fig_dirs_files_base" />, <xref linkend="fig_dirs_files_advanced" />, and <xref linkend="fig_dirs_files_growth" /> show the locations of the output files as well as the intermediate files. The output files go to the subdirectory of the <filename class="directory">data/run_<envar>$ESCEN</envar></filename> directory called <filename class="directory">output</filename>. This output directory has two subdirectories: the first is set by the <envar>$SPC</envar> environment variable from the Assigns file that sets the model and chemical mechanism being used for a SMOKE run; the second is named <filename class="directory">merge</filename>. There can be just one set of these subdirectories (as in the basic configuration shown in <xref linkend="fig_dirs_files_base" />) or multiple sets (as in the advanced configuration shown in <xref linkend="fig_dirs_files_advanced" />).</para>

<para>The <envar>$SPC</envar> subdirectory contains the category-specific model ready files, such as the model-ready files for nonpoint (stationary area) only, nonroad mobile only, etc. The <filename class="directory">merge</filename> subdirectory contains the final model-ready files. The following list provides the logical names and descriptions of each of the files in the basic configuration case.</para>

<itemizedlist>
<listitem>
<para><filename class="directory">run_<envar>$ESCEN</envar>/output/merge</filename>:</para>

<itemizedlist>
<listitem>
<para><emphasis role="bold">For CMAQ or MAQSIP:</emphasis></para>

<para><envar>EGTS3D_L</envar>: CMAQ or MAQSIP 3-D hourly, gridded, speciated emissions file, excluding PinG emissions (from the <command>Smkmerge</command> program).</para>
</listitem>

<listitem>
<para><emphasis role="bold">For CMAQ only:</emphasis></para>

<para><envar>PINGTS_L</envar>: Optional file that includes the hourly emissions for PinG stacks (or grouped stacks) for each hour (from <command>Smkmerge</command>).</para>

<para><envar>STACK_GROUPS</envar>: Optional file that identifies PinG stacks (or grouped stacks), their locations, and stack parameters (from the <command>Elevpoint</command> program).</para>
</listitem>

<listitem>
<para><emphasis role="bold">For UAM, REMSAD, or CAM<subscript>X</subscript>:</emphasis></para>

<para><envar>EGTS_L</envar>: I/O API version of the 2-D merged low-level, hourly, gridded, speciated emissions file (from <command>Smkmerge</command>).</para>

<para><envar>EGTS_UAM</envar>: Fortran binary 2-D merged low-level hourly, gridded, speciated emissions file (from the <command>Smk2emis</command> program).</para>

<para><envar>ELEVTS_L</envar>: ASCII elevated-point-source stack parameters and hourly, speciated emissions (from <command>Smkmerge</command>).</para>
</listitem>
</itemizedlist>

</listitem>
<listitem>
<para><filename class="directory">run_<envar>$ESCEN</envar>/output/<envar>$SPC</envar></filename>:</para>

<itemizedlist>
<listitem>
<para><envar>AGTS_L</envar> and <envar>AGTS_S</envar>: Nonpoint (stationary area) and optionally nonroad mobile-source hourly, gridded, speciated emissions (from the <command>Smkmerge</command> program).</para>
</listitem>

<listitem>
<para><envar>BGTS_L</envar> and <envar>BGTS_S</envar>: Biogenic hourly, gridded, speciated emissions in moles/hour and tons/hour (from the <command>Tmpbio</command> program).</para>
</listitem>

<listitem>
<para><envar>B3GTS_L</envar> and <envar>B3GTS_S</envar>: Biogenic hourly, gridded, speciated emissions in moles/hour and tons/hour (from the <command>Tmpbeis3</command> program).</para>
</listitem>

<listitem>
<para><envar>BGTS_L_O</envar> and <envar>BGTS_S_O</envar>: <command>Tmpbio</command> output with the correct units needed by the AQM (from the <command>Smkmerge</command> program).</para>
</listitem>

<listitem>
<para><envar>B3GTS_L_O</envar> and <envar>B3GTS_S_O</envar>: <command>Tmpbeis3</command> output with the correct units needed by the AQM (from the <command>Smkmerge</command> program).</para>
</listitem>

<listitem>
<para><envar>MGTS_L</envar> and <envar>MGTS_S</envar>: On-road mobile-source hourly, gridded, speciated emissions (from <command>Smkmerge</command>).</para>
</listitem>

<listitem>
<para><envar>NGTS_L</envar> and <envar>NGTS_S</envar>: Nonroad mobile-source hourly, gridded, speciated emissions in moles/hour and grams/hour (these files are written by <command>Smkmerge</command> as an <envar>AGTS_L</envar> or <envar>AGTS_S</envar> file, with the scripts changing the files to the <envar>NGTS</envar> name).</para>
</listitem>

<listitem>
<para><envar>PGTS_L</envar> and <envar>PGTS_S</envar>: Point-surce hourly, gridded, speciated emissions (from <command>Smkmerge</command>). This file would be created when modeling for UAM, REMSAD, or CAM<subscript>X</subscript>, which need the low-level point sources but not the 3-D point sources. This file would not include the elevated-point-source emissions if it were created using the <envar>SMK_ASCIIELEV_YN</envar> = Y setting.</para>
</listitem>

<listitem>
<para><envar>PGTS3D_L</envar> and <envar>PGTS3D_S</envar>: Point-source 3-D, hourly, gridded, speciated emissions (from <command>Smkmerge</command>). This file would be created for CMAQ and MAQSIP only, using the elevated layer fraction, which requires the option <envar>MRG_LAYERS_YN</envar> = Y.</para>
</listitem>
</itemizedlist>

</listitem>
</itemizedlist>

</section>

<section>

<title>Configuration for growth and/or control case</title>

<para>The output file locations for the growth and control cases follow the same paradigm described in <xref linkend="sect_dirs_location_intmed_growth" /> for the intermediate files. The <envar>$fyr2</envar> and/or <envar>$CNTLCASE</envar> environment variable values are inserted into the directory structure, as shown in <xref linkend="fig_dirs_files_growth" />. The output directories are then reset as follows:</para>

<para>Future/past-year case (no controls):</para>

<itemizedlist>
<listitem>
<para><filename class="directory">run_<envar>$ESCEN</envar>_<envar>$fyr2</envar>/output/merge</filename>: Final model-ready output files. The files are the same as those in the base case, but with future-year emissions; see <xref linkend="sect_dirs_location_output_base" /> for more information.</para>
</listitem>
<listitem>
<para><filename class="directory">run_<envar>$ESCEN</envar>_<envar>$fyr2</envar>/output/<envar>$SPC</envar></filename>: Source-category hourly, gridded, speciated files. In the advanced configuration, the <envar>$ASCEN</envar>, <envar>$MSCEN</envar>, or <envar>$PSCEN</envar> values could be different from the <envar>$ESCEN</envar> value, resulting in separate directories (as shown in <xref linkend="fig_dirs_files_advanced" />, but with the <envar>$fyr2</envar> field included in the path name. The files are the same as those in the base case, but with future-year emissions; see <xref linkend="sect_dirs_location_output_base" /> for more information.</para>
</listitem>
</itemizedlist>

<para>Control case (no growth):</para>

<itemizedlist>
<listitem>
<para><filename class="directory">run_<envar>$ESCEN</envar>_<envar>$CNTLCASE</envar>/output/merge</filename>: Final model-ready output files. The files are the same as those in the base case, but with controlled emissions; see <xref linkend="sect_dirs_location_output_base" /> for more information.</para>
</listitem>
<listitem>
<para><filename class="directory">run_<envar>$ESCEN</envar>_<envar>$CNTLCASE</envar>/output/<envar>$SPC</envar></filename>: Source-category hourly, gridded, speciated files. In the advanced configuration, the <envar>$ASCEN</envar>, <envar>$MSCEN</envar>, or <envar>$PSCEN</envar> values could be different from the <envar>$ESCEN</envar> value, resulting in separate directories (as shown in <xref linkend="fig_dirs_files_advanced" />, but with the <envar>$CNTLCASE</envar> field included in the path name. The files are the same as those in the base case, but with controlled emissions; see <xref linkend="sect_dirs_location_output_base" /> for more information.</para>
</listitem>
</itemizedlist>

<para>Future/past-year and control case:</para>

<itemizedlist>
<listitem>
<para><filename class="directory">run_<envar>$ESCEN</envar>_<envar>$fyr2</envar>_<envar>$CNTLCASE</envar>/output/merge</filename>: Final model-ready output files. The files are the same as those in the base case, but with future-year, controlled emissions; see <xref linkend="sect_dirs_location_output_base" /> for more information.</para>
</listitem>
<listitem>
<para><filename class="directory">run_<envar>$ESCEN</envar>_<envar>$fyr2</envar>_<envar>$CNTLCASE</envar>/output/<envar>$SPC</envar></filename>: Source-category hourly, gridded, speciated files. In the advanced configuration, the <envar>$ASCEN</envar>, <envar>$MSCEN</envar>, or <envar>$PSCEN</envar> values could be different from the <envar>$ESCEN</envar> value, resulting in separate directories (as shown in <xref linkend="fig_dirs_files_advanced" />, but with the <envar>$fyr2</envar> and <envar>$CNTLCASE</envar> fields included in the path name. The files are the same as those in the base case, but with future-year, controlled emissions; see <xref linkend="sect_dirs_location_output_base" /> for more information.</para>
</listitem>
</itemizedlist>

</section>

</section>

<section id="sect_dirs_location_report_files">

<title>Locations of reports</title>

<para>The report output directory names follow the same paradigm as the intermediate and model-ready output directory names. <quote>Reports</quote> as defined for this directory structure are the report files output from the <command>Cntlmat</command>, <command>Smkinven</command>, <command>Smkmerge</command>, and <command>Smkreport</command> programs. More information on these programs can be found in <xref linkend="sect_programs_cntlmat" />, <xref linkend="sect_programs_smkinven" />, <xref linkend="sect_programs_smkmerge" />, and <xref linkend="sect_qa_smkreport" />.</para>

<para>As shown in <xref linkend="fig_dirs_files_base" />, the two main report directories for the basic configuration are the <filename class="directory">data/reports/<envar>$ESCEN</envar>/scenario</filename> and <filename class="directory">data/reports/<envar>$ESCEN</envar>/static</filename> directories. The former directory is for time-dependent reports, and the latter is for time-independent reports. Because the <envar>BSCEN</envar> variable is often different from the <envar>ESCEN</envar> variable, a different report directory is available for the biogenic emissions: <filename class="directory">data/reports/<envar>$BSCEN</envar>/scenario</filename>, which contains the only biogenic reports available (created by the <command>Smkmerge</command> program).</para>

<para><xref linkend="fig_dirs_files_advanced" /> shows the report directories for the advanced configuration. The source-category-specific variables <envar>ASCEN</envar>, <envar>BSCEN</envar>, <envar>MSCEN</envar>, and <envar>PSCEN</envar> appear here, in addition to the <envar>ESCEN</envar> variable. In the default setup of SMOKE, <command>Smkmerge</command> uses separate source-category-specific directories for the reports, as defined in the <filename><envar>$ASSIGNS</envar>/setmerge_files.scr</filename> script. For <command>Smkreport</command>, the <filename><envar>$SCRIPTS</envar>/run/qa_run.csh</filename> script sends the default reports to the <envar>$REPSTAT</envar> and <envar>$REPSCEN</envar> directories (which use the <envar>ESCEN</envar> variable in their path names). Both of these scripts are straightforward to change to accommodate user preferences.</para>

<para><xref linkend="fig_dirs_files_growth" /> shows the report directories for the basic configuration of future/past-year and/or control case reports. The <envar>$REPSTAT</envar> and <envar>$REPSCEN</envar> directories use the year and/or control case name (from <envar>$fyr2</envar> and <envar>$CNTLCASE</envar>) to reset the report directory names, in the same way as for the intermediate and model-ready output files.</para>

<para>The <command>Smkmerge</command> program has numerous logical file names that can be used as output files (too many to list here). The reports include state and/or county totals for each day run by <command>Smkmerge</command>. The form of the output logical file names is <envar>REP[A|B|M|P|E]G[T][S][C][_S|_L]</envar>. The A, B, M, P, or E in the file represents area, biogenic, mobile, point, or <quote>every</quote> emissions, respectively. <command>Smkmerge</command> can optionally report temporalized emissions (T), speciated emissions (S), and/or controlled emissions (C). The _S or _L suffix represents mass-based or mole-based reports, respectively (e.g., tons/day or moles/day).</para>

<para>The <command>Smkreport</command> program uses logical file names in the <envar>REPCONFIG</envar> file to determine report names. The /NEWFILE/ packet controls the logical file names, and the SMOKE script <filename>qa_run.csh</filename> (for default reporting) or the main run scripts control the values of these logical file names and hence the file paths. There are too many types of reports that <command>Smkreport</command> can create for us to list them all here with their appropriate files. In general, the time-independent reports go to the <envar>$REPSTAT</envar> directory and the time-dependent reports go to the <envar>$REPSCEN</envar> directory.</para>

</section>

</section>

<section id="sect_dirs_change_directory">

<title>How to change the default directory structure</title>

<para>The default Assigns files and scripts contain settings that allow users to modify the directories that will be used when running SMOKE. The basic structure has been developed to suit the needs of a variety of applications, from short, single-grid, base case modeling needs to annual, multigrid needs for many control strategies. The details of working within the default structure by changing Assigns file and script settings are provided in <xref linkend="ch_scripts" />. The default structures that we have described represent our recommended way of running SMOKE. Although this structure has been quite useful for many people, it could be a burden to others. In this section, we describe ways in which users can change the default structure to meet their specific needs.</para>

<para>The SMOKE programs themselves do not require any specific directory structure because all input and output files depend only on environment variables, which can be set in any pattern. We have created a default directory structure so that other users can benefit from our experience in emissions modeling and using SMOKE, and to provide an initial structure that is useful. With a few exceptions for intermediate files, the SMOKE programs also do not require specific file names, only specific environment variables; but again, we have configured SMOKE to have a default structure for these names.</para>

<para>In principle, you can change the location of every single input file that SMOKE uses. The Assigns files and scripts have been implemented using one structure, but changing that structure is only a matter of finding some other method of providing the file names to the programs. This can include changing the Assigns files and scripts, or removing the Assigns files altogether and creating a script that sets all of the input and output file names and directories and calls the programs. These modifications can be as extensive or minimal as needed to handle a specific limitation or problem with the default structure.</para>

<para>If slight modifications to the structures are all that is needed, then the best approach is to modify a copy of the default the Assigns file. For example, if you wish to have the nonroad mobile sources&rsquo; intermediate and output files written to a different directory than the stationary area sources&rsquo; files, you would add an <envar>NSCEN</envar> environment variable to parallel the area-source variable <envar>ASCEN</envar>, and change the input, intermediate, and output file locations and names to use this setting.</para>

</section>

<section id="sect_dirs_example_data_files">

<title>Test case data files</title>

<para>In the following two sections, we discuss the <envar>$SMKDAT</envar> directories and the test case data files included with SMOKE. These files are all the input files needed by SMOKE <emphasis>except</emphasis> for the actual inventory files. This includes the inventory table (<envar>INVTABLE</envar>), gridding surrogates (<envar>AGPRO</envar> and <envar>MGPRO</envar>), speciation profiles (<envar>GSPRO</envar>), temporal cross-reference files (<envar>ATREF</envar>, <envar>MTREF</envar>, and <envar>PTREF</envar>), etc. These files are only provided as example inputs and should not be used for modeling applications. We document the source of the data so you can evaluate the available files.</para>

<para>Many of the support files used in the nctox test case are from the EPA&rsquo;s 2001 modeling platform, available online at <ulink url="http://www.epa.gov/ttn/chief/emch/invent/">http://www.epa.gov/ttn/chief/emch/invent/</ulink>. A description of the files is provided in <ulink url="ftp://ftp.epa.gov/EmisInventory/2001nmp/readme_2001.txt">readme_2001.txt</ulink>.</para>

<section>

<title>Inventory support files</title>

<para>Sample SMOKE inventory files are included in the nctox case. These files include criteria emissions from the 1996 NEI, version 3.11 data files for North Carolina only. They also include 1999 VMT for North Carolina, and draft 1999 toxics NEI version 3 data (from October 2002) for all source categories.</para>

<para>The nctox case includes inventory support files in the <filename class="directory">data/inventory/nctox/other/</filename> directory and are documented in <xref linkend="tbl_dirs_inventory_files" />.</para>

<table id="tbl_dirs_inventory_files">
<title>Test case SMOKE support files associated with inventories</title>
<tgroup cols="3">
<colspec colname="c1" colwidth="8*" />
<colspec colname="c2" colwidth="3*" />
<colspec colname="c3" colwidth="7*" />

<thead>
<row>
<entry align="center">File name</entry>
<entry align="center">Logical file name</entry>
<entry align="center">Description</entry>
</row>
</thead>

<tbody>

<row>
<entry><filename>ar2pt_14OCT03_1999.txt</filename></entry>
<entry><envar>ARTOPNT</envar></entry>
<entry>Area-to-point data for allocating airport emissions to point locations; extracted in November 2005 from EPA&rsquo;s 2001 modeling platform archive <ulink url="ftp://ftp.epa.gov/EmisInventory/2001nmp/2001nmp_misc_071504.zip">2001nmp_misc_071504.zip</ulink>.</entry>
</row>

<row>
<entry><filename>invtable_nonroad.cb4.120202.txt</filename></entry>
<entry><envar>INVTABLE</envar></entry>
<entry>Inventory table for all source categories except on-road mobile; extracted in November 2005 from EPA&rsquo;s 2001 modeling platform archive <ulink url="ftp://ftp.epa.gov/EmisInventory/2001nmp/2001nmp_misc_071504.zip">2001nmp_misc_071504.zip</ulink>.</entry>
</row>

<row>
<entry><filename>invtable_onroad.cb4.010804.txt</filename></entry>
<entry><envar>INVTABLE</envar></entry>
<entry>Inventory table for on-road mobile sources; extracted in November 2005 from EPA&rsquo;s 2001 modeling platform archive <ulink url="ftp://ftp.epa.gov/EmisInventory/2001nmp/2001nmp_misc_071504.zip">2001nmp_misc_071504.zip</ulink>.</entry>
</row>

<row>
<entry><filename>nhapexclude.1999.txt</filename></entry>
<entry><envar>NHAPEXCLUDE</envar></entry>
<entry>Lists the on-road mobile and nonroad mobile SCCs to exclude from the NONHAPVOC calculation.</entry>
</row>

<row>
<entry><filename>nhapexclude.all.txt</filename></entry>
<entry><envar>NHAPEXCLUDE</envar></entry>
<entry>Lists only FIP = 37000 and SCC = 0 so that no sources in North Carolina will be included in the NONHAPVOC calculation. This file is used for nonpoint (stationary area) and point sources in the nctox case so that no sources will be integrated.</entry>
</row>

<row>
<entry><filename>repconfig.ar.inv.txt</filename></entry>
<entry><envar>REPCONFIG</envar></entry>
<entry>Default report configuration for nonpoint (stationary area sources), inventory reporting.</entry>
</row>

<row>
<entry><filename>repconfig.ar.temporal.txt</filename></entry>
<entry><envar>REPCONFIG</envar></entry>
<entry>Default report configuration for nonpoint (stationary area) sources, temporalized emissions reporting.</entry>
</row>

<row>
<entry><filename>repconfig.mb.inv.txt</filename></entry>
<entry><envar>REPCONFIG</envar></entry>
<entry>Default report configuration for on-road mobile sources, inventory reporting.</entry>
</row>

<row>
<entry><filename>repconfig.mb.temporal.txt</filename></entry>
<entry><envar>REPCONFIG</envar></entry>
<entry>Default report configuration for on-road mobile sources, temporalized emissions reporting.</entry>
</row>

<row>
<entry><filename>repconfig.nr.inv.txt</filename></entry>
<entry><envar>REPCONFIG</envar></entry>
<entry>Default report configuration for nonroad mobile sources, inventory reporting.</entry>
</row>

<row>
<entry><filename>repconfig.nr.temporal.txt</filename></entry>
<entry><envar>REPCONFIG</envar></entry>
<entry>Default report configuration for nonroad mobile sources, temporalized emissions reporting.</entry>
</row>

<row>
<entry><filename>repconfig.pt.elev.txt</filename></entry>
<entry><envar>REPCONFIG</envar></entry>
<entry>Default report configuration for elevated-source-selection reports.</entry>
</row>

<row>
<entry><filename>repconfig.pt.inv.txt</filename></entry>
<entry><envar>REPCONFIG</envar></entry>
<entry>Default report configuration for point sources, inventory reporting. Only the annual/average-day values are included in the reports created from this file (i.e., not the day-specific or hour-specific inventories).</entry>
</row>

<row>
<entry><filename>repconfig.pt.lfrac.txt</filename></entry>
<entry><envar>REPCONFIG</envar></entry>
<entry>Default report configuration for layer fraction hourly reports.</entry>
</row>

<row>
<entry><filename>repconfig.pt.temporal.txt</filename></entry>
<entry><envar>REPCONFIG</envar></entry>
<entry>Default report configuration for point sources, temporalized emissions reporting. Resulting reports include the effects of day-specific and hour-specific point sources.</entry>
</row>

</tbody>

</tgroup>
</table>

</section>

<section>

<title>Other support files</title>

<para>Additional SMOKE support files are stored in the <envar>$GE_DAT</envar> directory. <xref linkend="tbl_dirs_other_files" /> describes these files.</para>

<table id="tbl_dirs_other_files">
<title>Test case SMOKE support files other than inventory files</title>

<tgroup cols="3">
<colspec colname="c1" colwidth="3*" />
<colspec colname="c2" colwidth="1*" />
<colspec colname="c3" colwidth="3*" />

<thead>
<row>
<entry>File name</entry>
<entry>Logical file name</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>

<row>
<entry><filename>amgpro.12km_041604.nc.txt</filename></entry>
<entry><envar>AGPRO</envar>, <envar>MGPRO</envar></entry>
<entry><para>12-km surrogates extracted from EPA&rsquo;s national 12-km surrogate set <ulink url="http://www.epa.gov/ttn/chief/emch/spatial/new/amgpro.12km_041604.us.gz">amgpro.12km_041604.us.gz</ulink> described at <ulink url="http://www.epa.gov/ttn/chief/emch/spatial/newsurrogate.html">http://www.epa.gov/ttn/chief/emch/spatial/newsurrogate.html</ulink>.</para></entry>
</row>

<row>
<entry><filename>bgpro.12km_041604.nc.txt</filename></entry>
<entry><envar>BGPRO</envar></entry>
<entry><para>12-km land-area surrogates extracted from EPA&rsquo;s national 12-km surrogate set <ulink url="http://www.epa.gov/ttn/chief/emch/spatial/new/bgpro.12km_041604.us.gz">bgpro.12km_041604.us.gz</ulink> described at <ulink url="http://www.epa.gov/ttn/chief/emch/spatial/newsurrogate.html">http://www.epa.gov/ttn/chief/emch/spatial/newsurrogate.html</ulink>.</para></entry>
</row>

<row>
<entry><filename>amgref_us_051704</filename></entry>
<entry><envar>AGREF</envar>, <envar>MGREF</envar></entry>
<entry><para>1999 National Emission Inventory spatial surrogate cross-reference described at <ulink url="http://www.epa.gov/ttn/chief/emch/spatial/newsurrogate.html">http://www.epa.gov/ttn/chief/emch/spatial/newsurrogate.html</ulink>; <emphasis role="bold">NOTE:</emphasis> a default entry of <programlisting>000000 0000000000 100</programlisting> has been added to this file to match the 1996 inventories used in the test case.</para></entry>
</row>

<row>
<entry><filename>amptpro.m3.default.us+can.txt</filename></entry>
<entry><envar>ATPRO</envar>, <envar>MTPRO</envar>, <envar>PTPRO</envar></entry>
<entry>U.S. temporal profiles; extracted in November 2005 from EPA&rsquo;s 2001 modeling platform archive <ulink url="ftp://ftp.epa.gov/EmisInventory/2001nmp/2001nmp_misc_071504.zip">2001nmp_misc_071504.zip</ulink>.</entry>
</row>

<row>
<entry><filename>amptref.m3.us+can.cair.txt</filename></entry>
<entry><envar>ATREF</envar>, <envar>MTREF</envar>, <envar>PTREF</envar></entry>
<entry>U.S. temporal cross-reference; copied from amptref.m3.us+can.txt in November 2005 from EPA&rsquo;s 2001 modeling platform archive <ulink url="ftp://ftp.epa.gov/EmisInventory/2001nmp/2001nmp_misc_071504.zip">2001nmp_misc_071504.zip</ulink>.</entry>
</row>

<row>
<entry><filename>gscnv.txt</filename></entry>
<entry><envar>GSCNV</envar></entry>
<entry>VOC-to-TOG conversion factors; extracted in November 2005 from EPA&rsquo;s 2001 modeling platform archive <ulink url="ftp://ftp.epa.gov/EmisInventory/2001nmp/2001nmp_misc_071504.zip">2001nmp_misc_071504.zip</ulink>.</entry>
</row>

<row>
<entry><filename>gspro.cmaq.cb4p25_wtox.txt</filename></entry>
<entry><envar>GSPRO</envar></entry>
<entry>Speciation profiles for CMAQ CB4 chemical mechanism with additional toxics species for all source categories except on-road mobile sources; extracted in November 2005 from EPA&rsquo;s 2001 modeling platform archive <ulink url="ftp://ftp.epa.gov/EmisInventory/2001nmp/2001nmp_misc_071504.zip">2001nmp_misc_071504.zip</ulink>.</entry>
</row>

<row>
<entry><filename>gspro.cmaq.cb4p25_wtox.m.txt</filename></entry>
<entry><envar>GSPRO</envar></entry>
<entry>Speciation profiles for CMAQ CB4 chemical mechanism with additional toxics species for on-road mobile sources; extracted in November 2005 from EPA&rsquo;s 2001 modeling platform archive <ulink url="ftp://ftp.epa.gov/EmisInventory/2001nmp/2001nmp_misc_071504.zip">2001nmp_misc_071504.zip</ulink>.</entry>
</row>

<row>
<entry><filename>gsref.cmaq.cb4p25_wtox.txt</filename></entry>
<entry><envar>GSREF</envar></entry>
<entry>Speciation cross-reference for CMAQ for CB4 with PM2.5 speciation and additional toxic species; extracted in November 2005 from EPA&rsquo;s 2001 modeling platform archive <ulink url="ftp://ftp.epa.gov/EmisInventory/2001nmp/2001nmp_misc_071504.zip">2001nmp_misc_071504.zip</ulink>.</entry>
</row>

<row>
<entry><filename>b3fac.beis3_efac_v0.98.txt</filename></entry>
<entry><envar>B3FAC</envar></entry>
<entry>BEIS3.12 emission factors; extracted in November 2005 from EPA&rsquo;s 2001 modeling platform archive <ulink url="ftp://ftp.epa.gov/EmisInventory/2001nmp/2001nmp_misc_071504.zip">2001nmp_misc_071504.zip</ulink>.</entry>
</row>

<row>
<entry><filename>costcy.txt</filename></entry>
<entry><envar>COSTCY</envar></entry>
<entry>Country, state, and county codes; extracted in November 2005 from EPA&rsquo;s 2001 modeling platform archive <ulink url="ftp://ftp.epa.gov/EmisInventory/2001nmp/2001nmp_misc_071504.zip">2001nmp_misc_071504.zip</ulink>.</entry>
</row>

<row>
<entry><filename>GRIDDESC</filename></entry>
<entry><envar>GRIDDESC</envar></entry>
<entry>Grid descriptions file with nctox modeling domain. An unlimited number of domains can be added to this file.</entry>
</row>

<row>
<entry><filename>holidays.txt</filename></entry>
<entry><envar>HOLIDAYS</envar></entry>
<entry>Dates for days to model as holidays; extracted in November 2005 from EPA&rsquo;s 2001 modeling platform archive <ulink url="ftp://ftp.epa.gov/EmisInventory/2001nmp/2001nmp_misc_071504.zip">2001nmp_misc_071504.zip</ulink>.</entry>
</row>

<row>
<entry><filename>oris_info.txt</filename></entry>
<entry><envar>ORISDESC</envar></entry>
<entry>ORIS ID descriptions; extracted in November 2005 from EPA&rsquo;s 2001 modeling platform archive <ulink url="ftp://ftp.epa.gov/EmisInventory/2001nmp/2001nmp_misc_071504.zip">2001nmp_misc_071504.zip</ulink>.</entry>
</row>

<row>
<entry><filename>pstk.m3.txt</filename></entry>
<entry><envar>PSTK</envar></entry>
<entry>Replacement stack parameters for inventory sources with missing or invalid stack parameters; extracted in November 2005 from EPA&rsquo;s 2001 modeling platform archive <ulink url="ftp://ftp.epa.gov/EmisInventory/2001nmp/2001nmp_misc_071504.zip">2001nmp_misc_071504.zip</ulink>.</entry>
</row>

<row>
<entry><filename>scc_desc_030804.txt</filename></entry>
<entry><envar>SCCDESC</envar></entry>
<entry>SCC descriptions; extracted in November 2005 from EPA&rsquo;s 2001 modeling platform archive <ulink url="ftp://ftp.epa.gov/EmisInventory/2001nmp/2001nmp_misc_071504.zip">2001nmp_misc_071504.zip</ulink>.</entry>
</row>

<row>
<entry><filename>sic_desc.txt</filename></entry>
<entry><envar>SICDESC</envar></entry>
<entry>SIC descriptions; extracted in November 2005 from EPA&rsquo;s 2001 modeling platform archive <ulink url="ftp://ftp.epa.gov/EmisInventory/2001nmp/2001nmp_misc_071504.zip">2001nmp_misc_071504.zip</ulink>.</entry>
</row>

<row>
<entry><filename>srg_desc_EPA1999.txt</filename></entry>
<entry><envar>SRGDESC</envar></entry>
<entry>Surrogate code descriptions for files <filename>amgpro.12km_041604.nc.txt</filename> and <filename>bgpro.12km_041604.nc.txt</filename>; extracted in November 2005 from EPA&rsquo;s 2001 modeling platform archive <ulink url="ftp://ftp.epa.gov/EmisInventory/2001nmp/2001nmp_misc_071504.zip">2001nmp_misc_071504.zip</ulink>.</entry>
</row>

</tbody>

</tgroup>
</table>

<para>Additional speciation profile files and speciation cross-reference files are available with EPA&rsquo;s 2001 modeling platform. The files are described in <ulink url="ftp://ftp.epa.gov/EmisInventory/2001nmp/readme_2001.txt">readme_2001.txt</ulink>. The files in the archive <ulink url="ftp://ftp.epa.gov/EmisInventory/2001nmp/2001nmp_misc_071504.zip">2001nmp_misc_071504.zip</ulink> support the following air quality models and chemical mechanisms:</para>

<itemizedlist spacing="compact">
<listitem>CAMx4: CB4 with PM2.5 speciation</listitem>
<listitem>CMAQ: CB4 with PM2.5 speciation</listitem>
<listitem>CMAQ: CB4 with integrated toxics and criteria inventories</listitem>
<listitem>CMAQ: RADM2 with PM2.5 speciation</listitem>
<listitem>CMAQ: SAPRC99</listitem>
<listitem>MAQSIP: RADM2 with PM2.5 speciation</listitem>
<listitem>REMSAD7: micro-CB4 with PM2.5 speciation</listitem>
<listitem>REMSAD6: micro-CB4</listitem>
</itemizedlist>

</section>

</section>

</chapter>
