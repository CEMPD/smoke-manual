<?xml version="1.0" encoding="UTF-8"?>
                      
<chapter id="ch_input_files">

<title>SMOKE Input Files</title>

<section>

<title>Overview</title>

<para>This chapter contains all formatting requirements for input files to SMOKE. <remark>Chapters 9 and 10</remark> provide documentation on SMOKE's intermediate and output file formats.</para>

<para>Important notes about file formats:</para>

<orderedlist>
<listitem>
<para>In the tables used to describe the file format for each file, column letters indicate that the record(s) must be list-formatted, and therefore need to be delimited (by a space, comma, or semicolon). If there are text entries that have embedded spaces, commas, or semicolons in a list-formatted file, these entries must be surrounded by single or double quotation marks to prevent SMOKE from treating those characters as delimiters. Column numbers indicate that the file is column-specific, which means that the entry must be placed exactly within the columns listed.</para>
</listitem>
<listitem>
<para>For all cross-reference files (i.e. <envar>AGREF</envar>, <envar>MGREF</envar>, <envar>GSREF</envar>), all of the source-characteristic fields are optional. For example, it is permissible to provide only the SCC for use in matching a profile to a source. For list-formatted files, if there are source characteristic fields that will not be used (such as country/state/county code) that come <emphasis>before</emphasis> the required fields in the file, these must be filled in with a zero or -9. If there are fields that come <emphasis>after</emphasis> the required fields in the file, they can be left blank. For column-specific formats, the optional entries can be left blank when they are not used.</para>
</listitem>
</orderedlist>

<para>In this section, we first provide a summary table of all input files needed by SMOKE listed by source category. In another table, we next list by program all the default SMOKE input files that are provided with the "nctox" sample case, described in <remark>Chapter 4</remark>.</para>

<section>

<title>Where to put SMOKE input files</title>

<para>A common difficulty for new users is where to put the input files for their case. In SMOKE version 2.0, we have simplified the number of places users need to keep their raw input files. <remark>Table 8-2</remark> lists the all of the input directories for the files used in the example "nctox" case. At the end of the table, the path names are defined relative to the <filename class="directory"><envar>EDSS_ROOT</envar></filename> directory, which is the directory in which you install SMOKE (and is different for every installation). The table is a good reference for understanding where the files should be placed. In <remark>Chapter 3</remark>, we provide diagrams of the SMOKE directory structures, which help in visualizing the tree of directories that SMOKE uses. Additionally, <remark>Section 4.5 of Chapter 4</remark> contains instructions for getting set up for new runs, including the files that need to be created and where they should go.</para>

<para>In summary, SMOKE input files must go into a handful of directories (see the end of <remark>Table 8-2</remark>). There are several directories to use because in some cases (such as speciation profiles and meteorology data), we want to share the data across multiple runs. In other cases (such as inventory data) the data is specific to a case and should be stored independently to prevent corrupting other modeling runs. To change the directories used for input (or any other) files in SMOKE, the Assigns file that is described in <remark>Chapter 4</remark> must be modified.</para>

</section>

<section>

<title>SMOKE input file list</title>

<para>In <remark>Table 8-1</remark>, we list all of the raw input files to SMOKE. When these files are optional, this is noted in the description column of the table. The files are grouped by functional type: inventory, temporal allocation, gridding, speciation, controls, merging, meteorology, source-specific, and other. Within each group, the files are presented in alphabetical order.</para>

<para>All of the ASCII files could conceivably be prepared manually. However, the last three table columns indicate other options you can use to prepare the files.</para>

<remark>
<itemizedlist>
<listitem>
<para>An "X" in column "CNV" indicates that there is a SMOKE converter (either a Fortran program, SAS program, script, or Excel spreadsheet) to create the file.</para>
</listitem>
<listitem>
<para>An "X" in column "ST" indicates that the SMOKE Tool in Models-3 can prepare the file.</para>
</listitem>
<listitem>
<para>An entry in column "Other" indicates that there is another method available to create the file, or that the file is resident in the installation, in which case it is not likely to need modification for most users.</para>
</listitem>
</itemizedlist>
</remark>

<table>

<title>List of all SMOKE input files</title>

<tgroup cols="6">
<colspec colname="Name" />
<colspec colname="Source" />
<colspec colname="Description" />
<colspec colname="CNV" />
<colspec colname="ST" />
<colspec colname="Other" />

<thead>
<row>
<entry>Logical File Name with (Program)</entry>
<entry>Source Category</entry>
<entry>File Description and (Location)</entry>
<entry>CNV</entry>
<entry>ST</entry>
<entry>Other</entry>
</row>
</thead>

<tbody>

<row>
<entry namest="Name" nameend="Other"><emphasis role="bold">Inventory Files</emphasis></entry>
</row>

<row>
<entry><envar>ARINV</envar> (<command>Smkinven</command>)</entry>
<entry>A</entry>
<entry>Stationary area/nonpoint or nonroad raw inventory in IDA format, SMOKE list format for EMS-95 files, or SMOKE ORL format (<envar>$ARDAT</envar> directory)</entry>
<entry colname="ST">X</entry>
<entry>NEI resident</entry>
</row>
<row>
<entry><envar>BCUSE</envar> (<command>Rawbio</command>)</entry>
<entry>B</entry>
<entry>Biogenic county land use data (<envar>$GE_DAT</envar> directory)</entry>
<entry colname="Other">National data resident</entry>
</row>
<row>
<entry><envar>BGUSE</envar> (<command>Rawbio</command>)</entry>
<entry>B</entry>
<entry>Biogenic gridded land use data (<envar>$BGDAT</envar> directory)</entry>
<entry colname="Other">U.S. 36 km resident</entry>
</row>
<row>
<entry><envar>MBINV</envar> (<command>Smkinven</command>)</entry>
<entry>M</entry>
<entry>Mobile source raw inventory in IDA format for nonlink data, SMOKE list format for EMS-95 nonlink and link data, or SMOKE ORL format (<envar>$MBDAT</envar> directory)</entry>
<entry colname="Other">NEI resident</entry>
</row>
<row>
<entry><envar>PTDAY</envar> (<command>Smkinven</command>)</entry>
<entry>P</entry>
<entry>Point source raw day-specific inventory data (optional) (<envar>$PTDAT</envar> directory)</entry>
<entry colname="Other">User</entry>
</row>
<row>
<entry><envar>PTHOUR</envar> (<command>Smkinven</command>)</entry>
<entry>P</entry>
<entry>Point source raw hour-specific inventory data (optional) (<envar>$PTDAT</envar> directory)</entry>
<entry colname="Other">User or CEM data</entry>
</row>
<row>
<entry><envar>PTINV</envar> (<command>Smkinven</command>)</entry>
<entry>P</entry>
<entry>Point source raw inventory in IDA format, SMOKE list format for EMS-95 files, or SMOKE ORL format (<envar>$PTDAT</envar> directory)</entry>
<entry colname="ST">X</entry>
<entry colname="Other">NEI resident</entry>
</row>
<row>
<entry><envar>VMTMIX</envar> (<command>Smkinven</command>)</entry>
<entry>M</entry>
<entry>Mobile source vehicle mix for EMS-95 files (<envar>$MBDAT</envar> directory)</entry>
</row>

<row>
<entry namest="Name" nameend="Other"><emphasis role="bold">Temporal Allocation Input Files</emphasis></entry>
</row>

<row>
<entry><envar>[A|M|P]TPRO</envar> (<command>Temporal</command>)</entry>
<entry>A, M, P</entry>
<entry>Temporal profile file (<envar>$GE_DAT</envar> directory)</entry>
<entry colname="ST">X</entry>
<entry>NEI resident</entry>
</row>
<row>
<entry><envar>[A|M|P]TREF</envar> (<command>Temporal</command>)</entry>
<entry>A, M, P</entry>
<entry>Temporal cross-reference file (<envar>$GE_DAT</envar> directory)</entry>
<entry>X</entry>
<entry>X</entry>
<entry>NEI resident</entry>
</row>
<row>
<entry><envar>HOLIDAYS</envar> (<command>Temporal</command>)</entry>
<entry>A, M, P</entry>
<entry>Holidays file (<envar>$GE_DAT</envar> directory)</entry>
<entry colname="Other">Resident</entry>
</row>

<row>
<entry namest="Name" nameend="Other"><emphasis role="bold">Spatial Allocation Input Files</emphasis></entry>
</row>

<row>
<entry><envar>[A|M]GPRO</envar> (<command>Grdmat</command>, <command>Surgtool</command>)</entry>
<entry>A, M</entry>
<entry>Area and/or mobile source spatial surrogates (<envar>$GE_DAT</envar> directory)</entry>
<entry colname="ST">X</entry>
<entry>U.S. 36-km resident</entry>
</row>
<row>
<entry><envar>[A|M]GREF</envar> (<command>Grdmat</command>)</entry>
<entry>A, M</entry>
<entry>Area source or mobile gridding cross-reference (<envar>$GE_DAT </envar>directory)</entry>
<entry colname="ST">X</entry>
<entry>NEI resident</entry>
</row>
<row>
<entry><envar>BELD3_A</envar>, <envar>BELD3_B</envar>, <envar>BELD3_TOT</envar> (<command>Beld3to2</command>, <command>Normbeis3</command>)</entry>
<entry>B</entry>
<entry>Biogenic gridded landuse for use in SMOKE-BEIS3 (<envar>$BGDAT</envar>)</entry>
<entry colname="ST">X</entry>
<entry>U.S. 36-km resident</entry>
</row>
<row>
<entry><envar>BGPRO</envar> (<command>Rawbio</command>, <command>Smkmerge</command>)</entry>
<entry>B</entry>
<entry>Biogenic spatial surrogates for county land use (<envar>$GE_DAT </envar> directory)</entry>
<entry colname="ST">X</entry>
<entry>U.S. 36-km resident</entry>
</row>
<row>
<entry><envar>G_GRIDPATH</envar> (<command>Grdmat</command>, <command>Elevpoint</command>, <command>Smkmerge</command>)</entry>
<entry>A, B, M, P</entry>
<entry>Grid and grid projection information (<envar>$BASDIR</envar> directory)</entry>
<entry colname="Other">M3 Study Planner</entry>
</row>
<row>
<entry><envar>GRIDDESC</envar> (<remark>add programs</remark>)</entry>
<entry>A, B, M, P</entry>
<entry>Grid descriptions (<envar>$BASDIR</envar> directory)</entry>
<entry colname="Other">Resident</entry>
</row>

<row>
<entry namest="Name" nameend="Other"><emphasis role="bold">Chemical Speciation Input Files</emphasis></entry>
</row>

<row>
<entry><envar>GSCNV</envar> (<command>Spcmat</command>)</entry>
<entry>A, M, P</entry>
<entry>Pollutant-to-pollutant conversion file (e.g., ROG to TOG) (optional) (<envar>$GE_DAT</envar> directory)</entry>
<entry colname="Other">ROG to TOG resident</entry>
</row>
<row>
<entry><envar>GSPRO</envar> (<command>Cntlmat</command>, <command>Spcmat</command>, <command>Tmpbio</command>, <command>Tmpbeis3</command>)</entry>
<entry>A, B, M, P</entry>
<entry>Speciation profiles file (<envar>$GE_DAT</envar> directory)</entry>
<entry colname="Other">Resident</entry>
</row>
<row>
<entry><envar>GSREF</envar> (<command>Spcmat</command>)</entry>
<entry>A, M, P</entry>
<entry>Speciation cross-reference file (a.k.a., mapping table) (<envar>$GE_DAT</envar> directory)</entry>
<entry>X</entry>
<entry>X</entry>
<entry>NEI resident</entry>
</row>

<row>
<entry namest="Name" nameend="Other"><emphasis role="bold">Controls and Growth Input Files</emphasis></entry>
</row>

<row>
<entry><envar>GCNTL</envar> (<command>Cntlmat</command>, <command>Pktreduc</command>)</entry>
<entry>A, M, P</entry>
<entry>Control packets or growth packets file (<envar>$STATIC</envar> directory)</entry>
<entry colname="ST">X</entry>
<entry>User</entry>
</row>

<row>
<entry namest="Name" nameend="Other"><emphasis role="bold">Special Merging Input Files</emphasis></entry>
</row>

<row>
<entry><envar>FILELIST</envar> (<command>Mrggrid</command>)</entry>
<entry>A, B, M, P</entry>
<entry>List of gridded 2-D and/or 3-D files to be merged (<filename class="directory"><envar>$SCRIPTS</envar>/run</filename> directory)</entry>
<entry colname="Other">User</entry>
</row>

<row>
<entry namest="Name" nameend="Other"><emphasis role="bold">Meteorology Input Files</emphasis></entry>
</row>

<row>
<entry><envar>GRID_CRO_2D</envar> (<command>Tmpbio</command>, <command>Tmpbeis3</command>)</entry>
<entry>B</entry>
<entry>Grid 2-D cross-point file (optional) (<envar>$METDAT</envar> directory)</entry>
<entry colname="Other">MCIP</entry>
</row>
<row>
<entry><envar>GRID_CRO_3D</envar> (<command>Laypoint</command>)</entry>
<entry>P</entry>
<entry>Grid 3-D cross-point file (<envar>$METDAT</envar> directory)</entry>
<entry colname="Other">MCIP</entry>
</row>
<row>
<entry><envar>MET_CRO_2D</envar> (<command>Tmpbio</command>, <command>Tmpbeis3</command>, <command>Premobl</command>, <command>Laypoint</command>, <command>Metscan</command>)</entry>
<entry>B, M, P</entry>
<entry>Meteorology 2-D cross-point file (<envar>$METDAT</envar> directory)</entry>
<entry colname="Other">MCIP</entry>
</row>
<row>
<entry><envar>MET_CRO_3D</envar> (<command>Tmpbio</command>, <command>Tmpbeis3</command>, <command>Premobl</command>, <command>Laypoint</command>, <command>Metscan</command>)</entry>
<entry>B, M, P</entry>
<entry>Meteorology 3-D cross-point file (optional for biogenics) (<envar>$METDAT</envar> directory)</entry>
<entry colname="Other">MCIP</entry>
</row>
<row>
<entry><envar>MET_DOT_3D</envar> (<command>Laypoint</command>)</entry>
<entry>P</entry>
<entry>Meteorology 3-D dot-point file (<envar>$METDAT</envar> directory)</entry>
<entry colname="Other">MCIP</entry>
</row>
<row>
<entry><envar>METLIST</envar> (<command>Tmpbio</command>, <command>Premobl</command>)</entry>
<entry>B, M</entry>
<entry>Listing of meteorology files (<envar>$STATIC</envar> directory)</entry>
<entry colname="Other">User</entry>
</row>
<row>
<entry><envar>RADLIST</envar> (<command>Tmpbio</command>)</entry>
<entry>B</entry>
<entry>Listing of meteorology files containing radiation data (<envar>$STATIC</envar> directory)</entry>
<entry colname="Other">User</entry>
</row>

<row>
<entry namest="Name" nameend="Other"><emphasis role="bold">Source-specific Input Files</emphasis></entry>
</row>

<row>
<entry namest="Name" nameend="Other"><emphasis>Biogenic</emphasis></entry>
</row>
<row>
<entry><envar>B3FAC</envar> (<command>Normbeis3</command>)</entry>
<entry>B</entry>
<entry>BEIS3 emissions factors (<envar>$BGDAT</envar> directory)</entry>
<entry colname="Other">Resident</entry>
</row>
<row>
<entry><envar>B3XRF</envar> (<command>Beld3to2</command>)</entry>
<entry>B</entry>
<entry>BELD3 to BELD2 cross-reference file (<envar>$GE_DAT</envar> directory)</entry>
<entry colname="Other">Resident</entry>
</row>
<row>
<entry><envar>BFAC</envar> (<command>Rawbio</command>)</entry>
<entry>B</entry>
<entry>Summer or winter biogenic emission factors (<envar>$GE_DAT</envar> directory)</entry>
<entry colname="Other">Resident</entry>
</row>
<row>
<entry><envar>BIOSEASON</envar> (<command>Tmpbeis3</command>, <command>Tmpbio</command>)</entry>
<entry>B</entry>
<entry>Bioseason switch file (<envar>$GE_DAT</envar> directory)</entry>
<entry colname="ST">X</entry>
</row>

<row>
<entry namest="Name" nameend="Other"><emphasis>Mobile</emphasis></entry>
</row>

<row>
<entry><envar>M6LIST</envar> (<command>Emisfac</command>)</entry>
<entry>M</entry>
<entry>List of MOBILE6 input scenarios (<envar>$MBDAT</envar> directory)</entry>
<entry colname="Other">User</entry>
</row>
<row>
<entry><envar>MCODES</envar> (<command>Smkinven</command>, <command>Grdmat</command>, <command>Spcmat</command>, <command>Temporal</command>)</entry>
<entry>M</entry>
<entry>Mobile vehicle type and road codes (<envar>$MBDAT</envar> directory)</entry>
<entry colname="Other">Resident/User</entry>
</row>
<row>
<entry><envar>MCREF</envar> (<command>Mbsetup</command>)</entry>
<entry>M</entry>
<entry>Mobile source county cross-reference (<envar>$MBDAT</envar> directory)</entry>
<entry colname="Other">User</entry>
</row>
<row>
<entry><envar>MEFLIST</envar> (<command>Temporal</command>)</entry>
<entry>M</entry>
<entry>List of emission factor files (<envar>$SMK_EMISPATH</envar> directory)</entry>
<entry colname="Other">User</entry>
</row>
<row>
<entry><envar>MEPROC</envar> (<command>Emisfac</command>, <command>Spcmat</command>, <command>Temporal</command>)</entry>
<entry>M</entry>
<entry>Mobile emission processes (e.g., exhaust, running loss, refueling) with associated activities and pollutants (<envar>$MBDAT</envar> directory)</entry>
<entry colname="Other">Resident/User</entry>
</row>
<row>
<entry><envar>MVREF</envar> (<command>Mbsetup</command>)</entry>
<entry>M</entry>
<entry>Mobile source county settings file (<envar>$MBDAT</envar> directory)</entry>
<entry colname="Other">User</entry>
</row>
<row>
<entry><envar>SPDPRO</envar> (<command>Emisfac</command>)</entry>
<entry>M</entry>
<entry>Hourly speed profiles (<envar>$MBDAT</envar> directory)</entry>
<entry colname="Other">User</entry>
</row>
<row>
<entry><envar>SPDREF</envar> (<command>Mbsetup</command>)</entry>
<entry>M</entry>
<entry>Hourly speed cross-reference (<envar>$MBDAT</envar> directory)</entry>
<entry colname="Other">User</entry>
</row>

<row>
<entry namest="Name" nameend="Other"><emphasis>Point</emphasis></entry>
</row>

<row>
<entry><envar>PELVCONFIG</envar> (<command>Elevpoint</command>)</entry>
<entry>P</entry>
<entry>Elevated source and PinG selection configuration file (<envar>$PTDAT</envar> directory)</entry>
<entry colname="Other">User</entry>
</row>
<row>
<entry><envar>PSTK</envar> (<command>Smkinven</command>)</entry>
<entry>P</entry>
<entry>Replacement stack parameters for invalid stacks (<envar>$GE_DAT</envar> directory)</entry>
<entry colname="Other">Resident</entry>
</row>
<row>
<entry><envar>PTMPLIST</envar> (<command>Elevpoint</command>)</entry>
<entry>P</entry>
<entry>List of <envar>PTMP</envar> files for <command>Elevpoint</command> to use to compute maximum daily emissions (<envar>$PTDAT</envar> directory)</entry>
<entry colname="Other">User</entry>
</row>

<row>
<entry namest="Name" nameend="Other"><emphasis role="bold">Other Support Input Files</emphasis></entry>
</row>

<row>
<entry><envar>ARTOPNT</envar> (<command>Smkinven</command>)</entry>
<entry>A</entry>
<entry>Area-to-point conversion file (<filename class="directory"><envar>$INVDIR</envar>/other</filename> directory)</entry>
<entry colname="Other">Resident/user</entry>
</row>
<row>
<entry><envar>COSTCY</envar> (<command>Smkinven</command>, <command>Grwinven</command>, <command>Temporal</command>, <command>Smkmerge</command>, <command>Smkreport</command>)</entry>
<entry>A, B, M, P</entry>
<entry>Country, state, and county names and time zones (<envar>$GE_DAT</envar> directory)</entry>
<entry colname="Other">Resident</entry>
</row>
<row>
<entry><envar>INVTABLE</envar> (<command>Smkinven</command>, <command>Emisfac</command>, <command>Spcmat</command>, <command>Temporal</command>, <command>Smkmerge</command>)</entry>
<entry>A, M, P</entry>
<entry>Pollutant and activity names and codes in order of output (<filename class="directory"><envar>$INVDIR</envar>/other</filename> directory)</entry>
<entry colname="Other">Resident/user</entry>
</row>
<row>
<entry><envar>NHAPEXCLUDE</envar> (<command>Smkinven</command>)</entry>
<entry>A, M, P</entry>
<entry>NONHAP exclusions file (<filename class="directory"><envar>$INVDIR</envar>/other</filename> directory)</entry>
<entry colname="Other">Resident/User</entry>
</row>
<row>
<entry><envar>ORISDESC</envar> (<command>Smkinven</command>)</entry>
<entry>P</entry>
<entry>ORIS facility descriptions, needed for getting ORIS facility names for reporting purposes (<envar>$GE_DAT</envar> directory)</entry>
<entry colname="Other">Resident</entry>
</row>
<row>
<entry><envar>SCCDESC</envar> (<command>Smkinven</command>, <command>Smkreport</command>)</entry>
<entry>A, M, P</entry>
<entry>SCC descriptions (<envar>$GE_DAT</envar> directory)</entry>
<entry colname="Other">Resident</entry>
</row>
<row>
<entry><envar>VNAMMAP</envar> (<command>Smk2emis</command>)</entry>
<entry>A, B, M, P</entry>
<entry>Species name mapping file for <command>Smk2emis</command> (<envar>$GE_DAT</envar> directory)</entry>
<entry colname="Other">User</entry>
</row>

</tbody>
</tgroup>
</table>

</section>

<section id="sect_input_nctox_case">

<title>Input files for SMOKE nctox case</title>

<para>The following table summarize the SMOKE input files for the nctox sample case provided with SMOKE for processing ozone, PM, and toxics pollutants. This list can be adapted by users to keep track of the raw input files needed for their cases, and to help understand the files that need to be prepared for input to SMOKE. <remark>Chapter 4</remark> includes a description of the nctox case in more detail. The documentation in <remark>Section 4.5 of Chapter 4</remark> describes which input files need to be changed for adapting the default scripts to a particular case.</para>

<para>In <remark>Table 8-2</remark> below, we list the raw SMOKE input files by program, with the programs listed in alphabetical order. These are the files that would have to be created by the user or provided by SMOKE, and most cannot be created with a SMOKE utility (unless otherwise noted). Those files that are typically prepared by the users are listed with their <remark>logical file names in bold</remark>, while the files that users do not usually change are not. Intermediate files (output by one program and input to another) are not included in the list, but can be found with the program-specific documentation in <remark>Chapter 6</remark> and in the intermediate file documentation in <remark>Chapter 9</remark>. The files that are shared among several programs are listed with each program for which they are used (i.e., listed multiple times), and noted with an asterisk (*) adjacent to the logical file name. The file paths are listed using the path logical names, the definitions for which are available at the end of the table.</para>

<table>

<title>SMOKE raw input files for the nctox case</title>

<tgroup cols="4">
<colspec colname="Logical" />
<colspec colname="Source" />
<colspec colname="Path" />
<colspec colname="Physical" />

<thead>
<row>
<entry>Logical file name and description</entry>
<entry>Source categories</entry>
<entry>Path</entry>
<entry>Physical file name</entry>
</row>
</thead>

<tbody>
<row>
<entry namest="Logical" nameend="Physical"><command>Cntlmat</command></entry>
</row>

<row>
<entry><emphasis role="bold"><envar>GCNTL</envar></emphasis>: projection and/or control instructions</entry>
<entry>
<simplelist>
<member>A&nbsp;(stationary)</member>
<member>A&nbsp;(nonroad)</member>
<member>M&nbsp;(on-road)</member>
<member>P</member>
</simplelist>
</entry>
<entry>
<simplelist>
<member><filename class="directory"><envar>$INVDIR</envar>/area/</filename></member>
<member><filename class="directory"><envar>$INVDIR</envar>/nonroad/</filename></member>
<member><filename class="directory"><envar>$INVDIR</envar>/mobile/</filename></member>
<member><filename class="directory"><envar>$INVDIR</envar>/point/</filename></member>
</simplelist>
</entry>
<entry>
<simplelist>
<member><filename>gcntl.1996_2018.txt</filename></member>
<member><filename>gcntl.1999_2018.txt</filename></member>
<member><filename>gcntl.1999_2018.txt</filename></member>
<member><filename>gcntl.1996_2018.txt</filename></member>
</simplelist>
</entry>
</row>
<row>
<entry><envar>GSPRO</envar>*: speciation profiles needed for reactivity controls only</entry>
<entry>A, M, P</entry>
<entry><filename class="directory"><envar>$GE_DAT</envar>/</filename></entry>
<entry><filename>gspro.cmaq.cb4p25_wtox.txt</filename></entry>
</row>

<row>
<entry namest="Logical" nameend="Physical"><command>Elevpoint</command></entry>
</row>

<row>
<entry><emphasis role="bold"><envar>GRIDDESC</envar></emphasis>*: grid descriptions</entry>
<entry>P</entry>
<entry><filename class="directory"><envar>$GE_DAT</envar>/</filename></entry>
<entry><filename>GRIDDESC</filename></entry>
</row>
<row>
<entry><emphasis role="bold"><envar>PELVCONFIG</envar></emphasis>: elevated source selection instructions</entry>
<entry>P</entry>
<entry><filename class="directory"><envar>$INVDIR</envar>/point/</filename></entry>
<entry><filename>pelvconfig.top50.txt</filename></entry>
</row>
<row>
<entry><emphasis role="bold"><envar>PTMPLIST</envar></emphasis>: optional list of <envar>PTMP</envar> SMOKE intermediate files for selecting elevated point sources based on emissions</entry>
<entry>P</entry>
<entry><filename class="directory"><envar>$INVDIR</envar>/point/</filename></entry>
<entry><filename>ptmplist.txt</filename> (generated automatically by default run script)</entry>
</row>

<row>
<entry namest="Logical" nameend="Physical"><command>Emisfac</command></entry>
</row>

<row>
<entry><emphasis role="bold"><envar>M6LIST</envar></emphasis>: List of MOBILE6 scenario files with path</entry>
<entry>M</entry>
<entry><filename class="directory"><envar>$INVDIR</envar>/mobile/</filename></entry>
<entry><filename>m6list.nctox.1999.txt</filename></entry>
</row>
<row>
<entry><envar>MEPROC</envar>*: mobile processes</entry>
<entry>M</entry>
<entry><filename class="directory"><envar>$INVDIR</envar>/mobile</filename></entry>
<entry><filename>meproc.txt</filename></entry>
</row>
<row>
<entry>Required MOBILE6 input files. (Note that there are other MOBILE6 input files that are needed if you use certain settings in the <envar>M6LIST</envar> file).</entry>
<entry>M</entry>
<entry><filename class="directory"><envar>$SMK_M6PATH</envar>/</filename></entry>
<entry>
<simplelist>
<member><filename>ASMDATA.D</filename></member>
<member><filename>HAP_BASE.CSV</filename></member>
<member><filename>PMDDR1.CSV</filename></member>
<member><filename>PMDDR2.CSV</filename></member>
<member><filename>PMDZML.CSV</filename></member>
<member><filename>PMGDR1.CSV</filename></member>
<member><filename>PMGDR2.CSV</filename></member>
<member><filename>PMGZML.CSV</filename></member>
<member><filename>PMNH3BER.D</filename></member>
<member><filename>PMNH3SDR.D</filename></member>
<member><filename>TECH12.D</filename></member>
</simplelist>
</entry>
</row>

<row>
<entry namest="Logical" nameend="Physical"><command>Grdmat</command></entry>
</row>

<row>
<entry><emphasis role="bold"><envar>AGPRO</envar></emphasis>: gridding surrogates</entry>
<entry>A</entry>
<entry><filename class="directory"><envar>$GE_DAT</envar>/</filename></entry>
<entry><filename>abmgpro.m3.040402.us36+can+mex.txt</filename></entry>
</row>
<row>
<entry><emphasis role="bold"><envar>AGREF</envar></emphasis>: gridding cross-reference</entry>
<entry>A</entry>
<entry><filename class="directory"><envar>$GE_DAT</envar>/</filename></entry>
<entry><filename>amgref.m3.us+mex.txt</filename></entry>
</row>
<row>
<entry><emphasis role="bold"><envar>GRIDDESC</envar></emphasis>*: grid descriptions</entry>
<entry>A, M, P</entry>
<entry><filename class="directory"><envar>$GE_DAT</envar>/</filename></entry>
<entry><filename>GRIDDESC</filename></entry>
</row>
<row>
<entry><envar>MCODES</envar>*: mobile code definitions</entry>
<entry>M</entry>
<entry><filename class="directory"><envar>$INVDIR</envar>/mobile/</filename></entry>
<entry><filename>mcodes.txt</filename></entry>
</row>
<row>
<entry><emphasis role="bold"><envar>MGPRO</envar></emphasis>: gridding surrogates</entry>
<entry>M</entry>
<entry><filename class="directory"><envar>$GE_DAT</envar>/</filename></entry>
<entry><filename>abmgpro.m3.040402.us36+can+mex.txt</filename></entry>
</row>
<row>
<entry><emphasis role="bold"><envar>MGREF</envar></emphasis>: gridding cross-reference</entry>
<entry>M</entry>
<entry><filename class="directory"><envar>$GE_DAT</envar>/</filename></entry>
<entry><filename>amgref.m3.us+mex.txt</filename></entry>
</row>

<row>
<entry namest="Logical" nameend="Physical"><command>Grwinven</command></entry>
</row>

<row>
<entry><envar>COSTCY</envar>*: country, state, and county names</entry>
<entry>A, M, P</entry>
<entry><filename class="directory"><envar>$GE_DAT</envar>/</filename></entry>
<entry><filename>costcy.txt</filename></entry>
</row>

<row>
<entry namest="Logical" nameend="Physical"><command>Laypoint</command></entry>
</row>

<row>
<entry><emphasis role="bold"><envar>GRID_CRO_3D</envar></emphasis>: 3-d cross-point grid data</entry>
<entry>P</entry>
<entry><filename class="directory"><envar>$METDAT</envar>/</filename></entry>
<entry><filename>GRIDCRO3D</filename></entry>
</row>
<row>
<entry><emphasis role="bold"><envar>GRIDDESC</envar></emphasis>*: grid descriptions</entry>
<entry>P</entry>
<entry><filename class="directory"><envar>$GE_DAT</envar>/</filename></entry>
<entry><filename>GRIDDESC</filename></entry>
</row>
<row>
<entry><emphasis role="bold"><envar>MET_CRO_2D</envar></emphasis>*: 2-d cross-point meteorology data</entry>
<entry>P</entry>
<entry><filename class="directory"><envar>$METDAT</envar>/</filename></entry>
<entry>
<simplelist>
<member><filename>METCRO2D_1996191</filename></member>
<member><filename>METCRO2D_1996192</filename></member>
</simplelist>
</entry>
</row>
<row>
<entry><emphasis role="bold"><envar>MET_CRO_3D</envar></emphasis>*: 3-d cross-point grid data</entry>
<entry>P</entry>
<entry><filename class="directory"><envar>$METDAT</envar>/</filename></entry>
<entry>
<simplelist>
<member><filename>METCRO3D_1996191</filename></member>
<member><filename>METCRO3D_1996192</filename></member>
</simplelist>
</entry>
</row>
<row>
<entry><emphasis role="bold"><envar>MET_DOT_3D</envar></emphasis>: 3-d dot-point grid data (for winds)</entry>
<entry>P</entry>
<entry><filename class="directory"><envar>$METDAT</envar>/</filename></entry>
<entry>
<simplelist>
<member><filename>METDOT3D_1996191</filename></member>
<member><filename>METDOT3D_1996192</filename></member>
</simplelist>
</entry>
</row>

<row>
<entry namest="Logical" nameend="Physical"><command>Mbsetup</command></entry>
</row>

<row>
<entry><emphasis role="bold"><envar>MCREF</envar></emphasis>: county cross-reference</entry>
<entry>M</entry>
<entry><filename class="directory"><envar>$INVDIR</envar>/mobile/</filename></entry>
<entry><filename>mcref.nctox.txt</filename></entry>
</row>
<row>
<entry><emphasis role="bold"><envar>MVREF</envar></emphasis>: county meteorology group settings</entry>
<entry>M</entry>
<entry><filename class="directory"><envar>$INVDIR</envar>/mobile/</filename></entry>
<entry><filename>mvref.nctox.txt</filename></entry>
</row>

<row>
<entry namest="Logical" nameend="Physical"><command>Mrggrid</command></entry>
</row>

<row>
<entry><emphasis role="bold"><envar>FILELIST</envar></emphasis>: list of logical file names to merge</entry>
<entry>All</entry>
<entry><filename class="directory"><envar>$INVDIR</envar>/other/</filename></entry>
<entry><filename>filelist.mrggrid.txt</filename></entry>
</row>

<row>
<entry namest="Logical" nameend="Physical"><command>Normbeis3</command></entry>
</row>

<row>
<entry><emphasis role="bold"><envar>B3FAC</envar></emphasis>: BEIS3 emissions factors</entry>
<entry>B</entry>
<entry><filename class="directory"><envar>$GE_DAT</envar>/</filename></entry>
<entry><filename>b3fac.march2002.beisv3.09.txt</filename></entry>
</row>
<row>
<entry><emphasis role="bold"><envar>BELD3_A</envar></emphasis>: File A of biogenic gridded landuse</entry>
<entry>B</entry>
<entry><filename class="directory"><envar>$SMKDAT</envar>/inventory/beld3</filename></entry>
<entry><filename>LANDA_c_cmaq_nat.dat</filename></entry>
</row>
<row>
<entry><emphasis role="bold"><envar>BELD3_B</envar></emphasis>: File B of biogenic gridded landuse</entry>
<entry>B</entry>
<entry><filename class="directory"><envar>$SMKDAT</envar>/inventory/beld3</filename></entry>
<entry><filename>LANDB_c_cmaq_nat.dat</filename></entry>
</row>
<row>
<entry><emphasis role="bold"><envar>BELD3_TOT</envar></emphasis>: Landuse totals</entry>
<entry>B</entry>
<entry><filename class="directory"><envar>$SMKDAT</envar>/inventory/beld3</filename></entry>
<entry><filename>LAND_TOTALS_c_cmaq_nat.dat</filename></entry>
</row>

<row>
<entry namest="Logical" nameend="Physical"><command>Premobl</command></entry>
</row>

<row>
<entry><emphasis role="bold"><envar>METLIST</envar></emphasis>: temperature file list</entry>
<entry>M</entry>
<entry><filename class="directory"><envar>$INVDIR</envar>/mobile/</filename></entry>
<entry><filename>metlist.premobl.txt</filename> (This list will include the paths of the 2-d or 3-d meteorology files for the entire modeling episode)</entry>
</row>

<row>
<entry namest="Logical" nameend="Physical"><command>Rawbio</command></entry>
</row>

<row>
<entry><envar>BCUSE</envar>: county land use</entry>
<entry>B</entry>
<entry><filename class="directory"><envar>$GE_DAT</envar>/</filename></entry>
<entry>not used in this case</entry>
</row>
<row>
<entry><envar>BFAC</envar>: emission factors</entry>
<entry>B</entry>
<entry><filename class="directory"><envar>$GE_DAT</envar>/</filename></entry>
<entry>
<simplelist>
<member><filename>bfac.summer.txt</filename></member>
<member><filename>bfac.winter.txt</filename></member>
</simplelist>
</entry>
</row>
<row>
<entry><emphasis role="bold"><envar>BGUSE</envar></emphasis>: gridded land use</entry>
<entry>B</entry>
<entry><filename class="directory"><envar>$SMKDAT</envar>/inventory/beld2/</filename></entry>
<entry><filename>beld.5.us36.txt</filename></entry>
</row>
<row>
<entry><emphasis role="bold"><envar>GRIDDESC</envar></emphasis>*: grid descriptions</entry>
<entry>B</entry>
<entry><filename class="directory"><envar>$GE_DAT</envar>/</filename></entry>
<entry><filename>GRIDDESC</filename></entry>
</row>

<row>
<entry namest="Logical" nameend="Physical"><command>Smkinven</command></entry>
</row>

<row>
<entry><emphasis role="bold"><envar>ARINV</envar></emphasis> (area): stationary area/nonpoint inventory (or list of inventories)</entry>
<entry>A</entry>
<entry><filename class="directory"><envar>$INVDIR</envar>/area/</filename></entry>
<entry><filename>arinv.stationary.lst</filename></entry>
</row>
<row>
<entry><emphasis role="bold"><envar>ARINV</envar></emphasis> (nonroad): nonroad inventory (or list of inventories)</entry>
<entry>A</entry>
<entry><filename class="directory"><envar>$INVDIR</envar>/nonroad/</filename></entry>
<entry><filename>arinv.nonroad.lst</filename></entry>
</row>
<row>
<entry><envar>ARTOPNT</envar>: area-to-point assignments</entry>
<entry>A</entry>
<entry><filename class="directory"><envar>$INVDIR</envar>/other/</filename></entry>
<entry><filename>artopnt.1999.txt</filename></entry>
</row>
<row>
<entry><envar>COSTCY</envar>*: time zones by county</entry>
<entry>All</entry>
<entry><filename class="directory"><envar>$GE_DAT</envar>/</filename></entry>
<entry><filename>costcy.txt</filename></entry>
</row>
<row>
<entry><envar>INVTABLE</envar>*: inventory table</entry>
<entry>
<simplelist>
<member>A,&nbsp;P</member>
<member>M</member>
</simplelist>
</entry>
<entry><filename class="directory"><envar>$INVDIR</envar>/other/</filename></entry>
<entry>
<simplelist>
<member><filename>invtable_nonroad.cb4.120202.txt</filename></member>
<member><filename>invtable_onroad.cb4.120202.txt</filename></member>
</simplelist>
</entry>
</row>
<row>
<entry><emphasis role="bold"><envar>MBINV</envar></emphasis>: on-road mobile inventory (or list of inventories)</entry>
<entry>M</entry>
<entry><filename class="directory"><envar>$INVDIR</envar>/mobile/</filename></entry>
<entry><filename>mbinv.lst</filename></entry>
</row>
<row>
<entry><envar>MCODES</envar>*: mobile code definitions</entry>
<entry>M</entry>
<entry><filename class="directory"><envar>$INVDIR</envar>/mobile/</filename></entry>
<entry><filename>mcodes.txt</filename></entry>
</row>
<row>
<entry><envar>NHAPEXCLUDE</envar>: exclusions from NONHAPVOC calculation</entry>
<entry>
<simplelist>
<member>A&nbsp;(nonroad),&nbsp;M</member>
<member>A&nbsp;(stationary),&nbsp;P</member>
</simplelist>
</entry>
<entry><filename class="directory"><envar>$INVDIR</envar>/other/</filename></entry>
<entry>
<simplelist>
<member><filename>nhapexclude.1999.txt</filename></member>
<member><filename>nhapexclude.all.txt</filename></member>
</simplelist>
</entry>
</row>
<row>
<entry><envar>ORISDESC</envar>: ORIS ID descriptions</entry>
<entry>P</entry>
<entry><filename class="directory"><envar>$GE_DAT</envar>/</filename></entry>
<entry><filename>oris_info.txt</filename></entry>
</row>
<row>
<entry><emphasis role="bold"><envar>PTDAY</envar></emphasis>: point source list of day-specific data</entry>
<entry>P</entry>
<entry><filename class="directory"><envar>$INVDIR</envar>/point/</filename></entry>
<entry>Not used in this case</entry>
</row>
<row>
<entry><emphasis role="bold"><envar>PTHOUR</envar></emphasis>: point source list of hour-specific data</entry>
<entry>P</entry>
<entry><filename class="directory"><envar>$INVDIR</envar>/point/</filename></entry>
<entry><filename>pthour.lst</filename> (List of CEM files of interest)</entry>
</row>
<row>
<entry><emphasis role="bold"><envar>PTINV</envar></emphasis>: point source inventory (or list of inventories)</entry>
<entry>P</entry>
<entry><filename class="directory"><envar>$INVDIR</envar>/point/</filename></entry>
<entry><filename>ptinv.lst</filename></entry>
</row>
<row>
<entry><envar>PSTK</envar>: replacements for bad stack parameters</entry>
<entry>P</entry>
<entry><filename class="directory"><envar>$GE_DAT</envar>/</filename></entry>
<entry><filename>pstk.m3.txt</filename></entry>
</row>
<row>
<entry><envar>SCCDESC</envar>*: SCC descriptions</entry>
<entry>A, M, P</entry>
<entry><filename class="directory"><envar>$GE_DAT</envar>/</filename></entry>
<entry><filename>scc_desc.txt</filename></entry>
</row>
<row>
<entry><emphasis role="bold"><envar>VMTMIX</envar></emphasis>: vehicle mix </entry>
<entry>M</entry>
<entry><filename class="directory"><envar>$INVDIR</envar>/mobile/</filename></entry>
<entry>Not used in this case because of <envar>MBINV</envar> format selected.</entry>
</row>

<row>
<entry namest="Logical" nameend="Physical"><command>Smkmerge</command></entry>
</row>

<row>
<entry><emphasis role="bold"><envar>BGPRO</envar></emphasis>: spatial surrogates with cell-area surrogate</entry>
<entry>B</entry>
<entry><filename class="directory"><envar>$GE_DAT</envar>/</filename></entry>
<entry><filename>abmgpro.m3.040402.us36+can+mex.txt</filename></entry>
</row>
<row>
<entry><emphasis role="bold"><envar>GRIDDESC</envar></emphasis>*: grid descriptions</entry>
<entry>All</entry>
<entry><filename class="directory"><envar>$GE_DAT</envar>/</filename></entry>
<entry><filename>GRIDDESC</filename></entry>
</row>

<row>
<entry namest="Logical" nameend="Physical"><command>Spcmat</command></entry>
</row>

<row>
<entry><envar>GSCNV</envar>: pollutant-to-pollutant conversion</entry>
<entry>A, M, P</entry>
<entry><filename class="directory"><envar>$GE_DAT</envar>/</filename></entry>
<entry><filename>gscnv.txt</filename></entry>
</row>
<row>
<entry><envar>GSPRO</envar>*: speciation profiles</entry>
<entry>
<simplelist>
<member>M</member>
<member>A,&nbsp;P</member>
</simplelist>
</entry>
<entry><filename class="directory"><envar>$GE_DAT</envar>/</filename></entry>
<entry>
<simplelist>
<member><filename>gspro.cmaq.cb4p25_wtox.m.txt</filename></member>
<member><filename>gspro.cmaq.cb4p25_wtox.txt</filename></member>
</simplelist>
</entry>
</row>
<row>
<entry><envar>GSREF</envar>: speciation cross-reference</entry>
<entry>A, M, P</entry>
<entry><filename class="directory"><envar>$GE_DAT</envar>/</filename></entry>
<entry><filename>gsref.cmaq.cb4p25_wtox.txt</filename></entry>
</row>
<row>
<entry><envar>MCODES</envar>*: mobile code definitions</entry>
<entry>M</entry>
<entry><filename class="directory"><envar>$INVDIR</envar>/mobile/</filename></entry>
<entry><filename>mcodes.txt</filename></entry>
</row>
<row>
<entry><envar>MEPROC</envar>*: mobile processes</entry>
<entry>M</entry>
<entry><filename class="directory"><envar>$INVDIR</envar>/mobile/</filename></entry>
<entry><filename>meproc.txt</filename></entry>
</row>

<row>
<entry namest="Logical" nameend="Physical"><command>Temporal</command></entry>
</row>

<row>
<entry><envar>ATPRO</envar>: Temporal profiles</entry>
<entry>A</entry>
<entry><filename class="directory"><envar>$GE_DAT</envar>/</filename></entry>
<entry><filename>amptpro.m3.us+can.txt</filename></entry>
</row>
<row>
<entry><envar>ATREF</envar>: Temporal cross-reference</entry>
<entry>A</entry>
<entry><filename class="directory"><envar>$GE_DAT</envar>/</filename></entry>
<entry><filename>amptref.m3.us+can.txt</filename></entry>
</row>
<row>
<entry><envar>COSTCY</envar>*: Daylight time exemptions</entry>
<entry>All</entry>
<entry><filename class="directory"><envar>$GE_DAT</envar>/</filename></entry>
<entry><filename>costcy.txt</filename></entry>
</row>
<row>
<entry><envar>HOLIDAYS</envar>: Holidays date list</entry>
<entry>A, M, P</entry>
<entry><filename class="directory"><envar>$GE_DAT</envar>/</filename></entry>
<entry><filename>holidays.txt</filename></entry>
</row>
<row>
<entry><envar>MCODES</envar>*: mobile code definitions</entry>
<entry>M</entry>
<entry><filename class="directory"><envar>$INVDIR</envar>/mobile/</filename></entry>
<entry><filename>mcodes.txt</filename></entry>
</row>
<row>
<entry><envar>MEFLIST</envar></entry>
<entry>M</entry>
<entry><filename class="directory"><envar>$SMK_EMISPATH</envar>/</filename></entry>
<entry><filename>meflist.txt</filename> (note: this file is created automatically when running using SMOKE scripts)</entry>
</row>
<row>
<entry><envar>MEPROC</envar>*: mobile processes</entry>
<entry>M</entry>
<entry><filename class="directory"><envar>$INVDIR</envar>/mobile/</filename></entry>
<entry><filename>meproc.txt</filename></entry>
</row>
<row>
<entry><envar>MTPRO</envar>: Temporal profiles</entry>
<entry>M</entry>
<entry><filename class="directory"><envar>$GE_DAT</envar>/</filename></entry>
<entry><filename>amptpro.m3.us+can.txt</filename></entry>
</row>
<row>
<entry><envar>MTREF</envar>: Temporal cross-reference</entry>
<entry>M</entry>
<entry><filename class="directory"><envar>$GE_DAT</envar>/</filename></entry>
<entry><filename>amptref.m3.us+can.txt</filename></entry>
</row>
<row>
<entry><envar>PTPRO</envar>: Temporal profiles</entry>
<entry>P</entry>
<entry><filename class="directory"><envar>$GE_DAT</envar>/</filename></entry>
<entry><filename>amptpro.m3.us+can.txt</filename></entry>
</row>
<row>
<entry><envar>PTREF</envar>: Temporal cross-reference</entry>
<entry>P</entry>
<entry><filename class="directory"><envar>$GE_DAT</envar>/</filename></entry>
<entry><filename>amptref.m3.us+can.txt</filename></entry>
</row>

<row>
<entry namest="Logical" nameend="Physical"><command>Tmpbeis3</command></entry>
</row>

<row>
<entry>Same raw inputs as Tmpbio program, documented below</entry>
<entry>See Tmpbio</entry>
<entry>See Tmpbio</entry>
<entry>See Tmpbio</entry>
</row>

<row>
<entry namest="Logical" nameend="Physical"><command>Tmpbio</command></entry>
</row>

<row>
<entry><envar>BIOSEASON</envar>: Winter/summer designation by cell and day</entry>
<entry>B</entry>
<entry><filename class="directory"><envar>$GE_DAT</envar>/</filename></entry>
<entry><filename>bioseason.ncf</filename></entry>
</row>
<row>
<entry><emphasis role="bold"><envar>GRID_CRO_2D</envar></emphasis>: 2-d cross-point grid data </entry>
<entry>B</entry>
<entry><filename class="directory"><envar>$METDAT</envar>/</filename></entry>
<entry>Not used in this case (From MCIP)</entry>
</row>
<row>
<entry><envar>GSPRO</envar>*: Speciation profiles</entry>
<entry>B</entry>
<entry><filename class="directory"><envar>$GE_DAT</envar>/</filename></entry>
<entry><filename>gspro.cmaq.cb4p25.txt</filename></entry>
</row>
<row>
<entry><emphasis role="bold"><envar>METLIST</envar></emphasis>: List of MCIP outputs with temperature data</entry>
<entry>B</entry>
<entry><filename class="directory"><envar>$INVDIR</envar>/biog/</filename></entry>
<entry><filename>metlist.tmpbio.txt</filename> (note: this file is created automatically when running using SMOKE scripts)</entry>
</row>
<row>
<entry><emphasis role="bold"><envar>RADLIST</envar></emphasis>: List of MCIP outputs with solar radiation data</entry>
<entry>B</entry>
<entry><filename class="directory"><envar>$INVDIR</envar>/biog/</filename></entry>
<entry><filename>radlist.tmpbio.txt</filename> (note: this file is created automatically when running using SMOKE scripts)</entry>
</row>

</tbody>
</tgroup>
</table>

<para>As you can see from the <remark>table above</remark>, there are several directories for raw SMOKE inputs. These are:</para>

<itemizedlist>
<listitem>
<para><filename class="directory"><envar>$INVDIR</envar>/area</filename>: Raw area inputs</para>
</listitem>
<listitem>
<para><filename class="directory"><envar>$SMKDAT</envar>/inventory/beld</filename>: Raw biogenic inputs</para>
</listitem>
<listitem>
<para><filename class="directory"><envar>$INVDIR</envar>/mobile</filename>: Raw on-road mobile inputs</para>
</listitem>
<listitem>
<para><filename class="directory"><envar>$INVDIR</envar>/nonroad</filename>: Raw nonroad mobile inputs (these can alternatively be included in the area directory)</para>
</listitem>
<listitem>
<para><filename class="directory"><envar>$INVDIR</envar>/point</filename>: Raw point inputs</para>
</listitem>
<listitem>
<para><filename class="directory"><envar>$INVDIR</envar>/other</filename>: Other raw inputs not associated with a specific source category</para>
</listitem>
<listitem>
<para><filename class="directory"><envar>$GE_DAT</envar></filename>: Shared data</para>
</listitem>
<listitem>
<para><filename class="directory"><envar>$SMK_M6PATH</envar></filename>: Raw MOBILE6 input files</para>
</listitem>
<listitem>
<para><filename class="directory"><envar>$SMK_EMISPATH</envar></filename>: Emission factor inputs (the single file that is considered a raw input file is actually prepared by the SMOKE scripts, when these are being used).</para>
</listitem>
<listitem>
<para><filename class="directory"><envar>$METDAT</envar></filename>: Meteorology data (in UNIX, this can be linked to a meteorology directory that is also used by the air quality model).</para>
</listitem>
</itemizedlist>

<para>All of these directories are based on the <filename class="directory"><envar>$SMKDAT</envar></filename> directory, which is set by the Assigns file as <filename class="directory"><envar>$EDSS_ROOT</envar>/data</filename>. The <envar>EDSS_ROOT</envar> environment variable should be set as part of the SMOKE installation process, as described in <remark>Chapter 12</remark>.</para>

<para>For the nctox case, these directories (based on your <envar>EDSS_ROOT</envar> setting) are as follows:</para>

<itemizedlist>
<listitem>
<para><filename class="directory"><envar>$SMKDAT</envar></filename>: <filename class="directory"><envar>$EDSS_ROOT</envar>/data</filename></para>
</listitem>
<listitem>
<para><filename class="directory"><envar>$INVDIR</envar></filename>: <filename class="directory"><envar>$SMKDAT</envar>/inventory/nctox</filename></para>
</listitem>
<listitem>
<para><filename class="directory"><envar>$GE_DAT</envar></filename>: <filename class="directory"><envar>$SMKDAT</envar>/ge_dat</filename></para>
</listitem>
<listitem>
<para><filename class="directory"><envar>$SMK_M6PATH</envar></filename>: <filename class="directory"><envar>$SMKDAT</envar>/run_nctox/static/m6</filename> (<remark>NOTE: Currently, this directory name must be constrained to 50 characters. The Assigns file checks this.</remark>)</para>
</listitem>
<listitem>
<para><filename class="directory"><envar>$SMK_EMISPATH</envar></filename>: <filename class="directory"><envar>$SMKDAT</envar>/run_nctox/static/m6emfac</filename></para>
</listitem>
<listitem>
<para><filename class="directory"><envar>$METDAT</envar></filename>: <filename class="directory"><envar>$SMKDAT</envar>/met/run_a1a</filename></para>
</listitem>
</itemizedlist>

</section>

</section>

<section>

<title>Inventory Files</title>

<para>All area, mobile, and point source inventory files must include a header entry specifying the file format. Valid options are:</para>

<itemizedlist>
<listitem>#CEM indicates that the file is in CEM format</listitem>
<listitem>#EMS-95 indicates that the file is in EMS-95 format</listitem>
<listitem>#IDA indicates that the file is in IDA format</listitem>
<listitem>#LIST indicates that the file is in list format</listitem>
<listitem>#TOXICS indicates that the file is in ORL format (usually used for toxics inventories)</listitem>
<listitem>#TOXICS NONPOINT indicates that the file is in ORL format for nonpoint sources</listitem>
</itemizedlist>

<para>Rather than having a format header entry in each individual file, the #LIST header can include an additional format label that will specify the type of inventory files. For example, the following line #LIST IDA indicates that the current file is in list format and that all additional files are IDA format. List-formatted files can include multiple #LIST &lt;format&gt; entries to include multiple file types. Format indicators in the individual inventory files will override settings in the list file.</para>

<para>For column-specific file formats, you may leave blank the fields that are not required (labeled as either "recommended," "optional," or "not used by SMOKE"). List-formatted files must have a default value (usually -9) for these fields. The required fields are listed as "required" for the inventory file formats.</para>

<section>

<title><envar>ARINV</envar>: Area source annual or average-day emissions</title>

<para>The <envar>ARINV</envar> file is the input area source inventory file for annual or average-day data. The SMOKE Tool can create this file in IDA format. Alternatively, this file can also have the same format as the SMOKE prototype's ANLST file, which can be used to import EMS-95 data.</para>

<section>

<title>IDA Format</title>

<para>This inventory file consists of a set of fixed-format detail records, preceded by a set of header records. The general format of the header records is:</para>

<para>command parm1 parm2 ... parm <emphasis>n</emphasis></para>

<para>The <emphasis>command</emphasis> field starts in the first position. The remainder of the header is free-format, blank delimited. The specific header command formats are:</para>

<informaltable>
<tgroup cols="3">
<thead>
<row>
<entry>Command</entry>
<entry>Paramater</entry>
<entry>Description and values</entry>
</row>
</thead>

<tbody>
<row>
<entry>#IDA</entry>
<entry>N/A</entry>
<entry>N/A</entry>
</row>
<row>
<entry>#TYPE</entry>
<entry>file type</entry>
<entry>first nonblank character after the command to the last character of the record</entry>
</row>
<row>
<entry>#COUNTRY</entry>
<entry>country name</entry>
<entry>first nonblank character after the command to the last character of the record; valid country names are those in the <envar>COSTCY</envar> file</entry>
</row>
<row>
<entry>#YEAR</entry>
<entry>data year</entry>
<entry>number from 1900 to 2200</entry>
</row>
<row>
<entry>#DESC</entry>
<entry>description</entry>
<entry>a description of the data (SMOKE does not use)</entry>
</row>
<row>
<entry>#POLID or #DATA</entry>
<entry>pol1 pol2 ... pol<emphasis>n</emphasis></entry>
<entry>defines the pollutants that are contained on the detail records. "pol1" is the ID of the first pollutant, "pol2" is the ID of the second pollutant, etc.</entry>
</row>
</tbody>
</tgroup>
</informaltable>

<para>Sample header records are shown below:</para>

<programlisting>#IDA
#TYPE     Area Source Inventory
#COUNTRY  US
#YEAR     1995
#DESC     Alabama 1995
#POLID    CO NH3 NOX PM10 PM2_5 SO2 VOC</programlisting>

<para>The detail records are fixed-format. The fields in each record are shown in the table below:</para>

<informaltable>
<tgroup cols="4">
<thead>
<row>
<entry>Position</entry>
<entry>Field Name</entry>
<entry>Type</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1&#8209;2</entry>
<entry>STID</entry>
<entry>Int</entry>
<entry>State Code (required)</entry>
</row>
<row>
<entry>3&#8209;5</entry>
<entry>CYID</entry>
<entry>Int</entry>
<entry>County Code (required)</entry>
</row>
<row>
<entry>6&#8209;15</entry>
<entry>SCC</entry>
<entry>Char</entry>
<entry>SCC (required)</entry>
</row>
<row>
<entry>16&#8209;25</entry>
<entry>ANN1</entry>
<entry>Real</entry>
<entry>pol1 Annual Emissions (short tons/yr) (required)</entry>
</row>
<row>
<entry>26&#8209;35</entry>
<entry>AVD1</entry>
<entry>Real</entry>
<entry>pol1 Average-day Emissions (short tons/average day) (optional)</entry>
</row>
<row>
<entry>36&#8209;46</entry>
<entry>EMF1</entry>
<entry>Real</entry>
<entry>pol1 Emission Factors (SCC units) (not used by SMOKE)</entry>
</row>
<row>
<entry>47&#8209;53</entry>
<entry>CE1</entry>
<entry>Real</entry>
<entry>pol1 Control Efficiency (give value of 0-100) (optional; if left blank, SMOKE default is 0)</entry>
</row>
<row>
<entry>54&#8209;56</entry>
<entry>RE1</entry>
<entry>Real</entry>
<entry>pol1 Rule Effectiveness (give value of 0-100), (optional; if left blank, SMOKE default is 100)</entry>
</row>
<row>
<entry>57&#8209;62</entry>
<entry>RP1</entry>
<entry>Real</entry>
<entry>pol1 Rule Penetration (give value of 0-100) (optional; if left blank, SMOKE default is 100)</entry>
</row>
<row>
<entry>63&#8209;72</entry>
<entry>ANN2</entry>
<entry>Real</entry>
<entry>pol2 Annual Emissions (short tons/yr) </entry>
</row>
<row>
<entry>73&#8209;82</entry>
<entry>AVD2</entry>
<entry>Real</entry>
<entry>pol2 Average-day Emissions (short tons/average day)</entry>
</row>
<row>
<entry>83&#8209;93</entry>
<entry>EMF2</entry>
<entry>Real</entry>
<entry>pol2 Emission Factors (SCC units)</entry>
</row>
<row>
<entry>94&#8209;100</entry>
<entry>CE2</entry>
<entry>Real</entry>
<entry>pol2 Control Efficiency (0-100)</entry>
</row>
<row>
<entry>101&#8209;103</entry>
<entry>RE2</entry>
<entry>Real</entry>
<entry>pol2 Rule Effectiveness (0-100)</entry>
</row>
<row>
<entry>104&#8209;109</entry>
<entry>RP2</entry>
<entry>Real</entry>
<entry>pol2 Rule Penetration (0-100)</entry>
</row>
<row>
<entry>110&#8209;119</entry>
<entry>ANN3</entry>
<entry>Real</entry>
<entry>pol3 Annual Emissions (short tons/yr)</entry>
</row>
<row>
<entry>120&#8209;129</entry>
<entry>AVD3</entry>
<entry>Real</entry>
<entry>pol3 Average-day Emissions (short tons/average day)</entry>
</row>
<row>
<entry>130&#8209;140</entry>
<entry>EMF3</entry>
<entry>Real</entry>
<entry>pol3 Emission Factors (SCC units)</entry>
</row>
<row>
<entry>141&#8209;147</entry>
<entry>CE3</entry>
<entry>Real</entry>
<entry>pol3 Control Efficiency (0-100)</entry>
</row>
<row>
<entry>148&#8209;150</entry>
<entry>RE3</entry>
<entry>Real</entry>
<entry>pol3 Rule Effectiveness (0-100)</entry>
</row>
<row>
<entry>151&#8209;156</entry>
<entry>RP3</entry>
<entry>Real</entry>
<entry>pol3 Rule Penetration (0-100)</entry>
</row>
</tbody>
</tgroup>
</informaltable>

<para>(Repeat for <emphasis>n</emphasis> pollutants)</para>

</section>

<section>

<title>EMS-95 Format</title>

<para>For EMS-95 inputs, the <envar>ARINV</envar> file must list the EMS-95 files. This format is called a SMOKE list format. The <envar>ARINV</envar> file can be created by using the following UNIX command, which assumes the EMS-95 files (and only these files) are all in the <filename class="directory"><envar>$ARDAT</envar></filename> directory.</para>

<para><userinput><command>ls</command> <filename><envar>$ARDAT</envar>/*.pt</filename> > <envar>$ARINV</envar></userinput></para>

<para>When using a list format, the <envar>ARINV</envar> file must also contain one or more INVYEAR packets. This packet acts as a switch that sets the inventory year for the files, each of which will get the year designated by the packet until another INVYEAR packet appears in the file. In this way, multiple years of inventory data can be combined to the same SMOKE inventory file.</para>

<para>Format for EMS-95- formatted area source emissions file:</para>

<para>The columns listed here are only those that are used by SMOKE. In addition, these files can have a #COUNTRY entry as the first line of the file to set the country code. The default country code is 0.</para>

<informaltable>
<tgroup cols="3">
<thead>
<row>
<entry>Columns</entry>
<entry>Type</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1&#8209;2 </entry>
<entry>Int</entry>
<entry>FIPS state code (required)</entry>
</row>
<row>
<entry>3&#8209;5 </entry>
<entry>Int</entry>
<entry>FIPS county code (required)</entry>
</row>
<row>
<entry>6&#8209;20 </entry>
<entry>Char</entry>
<entry>SCC or ASC code (required)</entry>
</row>
<row>
<entry>21&#8209;25 </entry>
<entry>Char</entry>
<entry>Pollutant ID (e.g. VOC) (required)</entry>
</row>
<row>
<entry>52&#8209;65 </entry>
<entry>Real</entry>
<entry>Actual emissions of specified pollutant (short tons/average annual day) (required)</entry>
</row>
<row>
<entry>88&#8209;94 </entry>
<entry>Real</entry>
<entry>Control equipment efficiency (percent, give value of 0-100) (optional; SMOKE default is 0)</entry>
</row>
<row>
<entry>95&#8209;96 </entry>
<entry>Char</entry>
<entry><para>Temporal basis: (required)</para>

<itemizedlist>
<listitem>AA = annual emissions</listitem>
<listitem>AD = daily emissions with weekday normalizer</listitem>
<listitem>DS = day-specific (will not cause SMOKE to crash, but may not be fully supported to give same behavior as EMS-95 - use with caution)</listitem>
</itemizedlist></entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

<section>

<title>ORL Formats (Toxics)</title>

<para>Since area sources encompass both nonpoint and nonroad mobile sources, two different ORL formats are available depending on source type. Both formats consist of a set of list-formatted detail records, proceeded by a set of header records. The general format of the header records is:</para>

<para>command parm1 parm2 ... parm <emphasis>n</emphasis></para>

<para>The <emphasis>command</emphasis> field starts in the first position. The remainder of the header is free-format, blank delimited. The specific header formats are:</para>

<informaltable>
<tgroup cols="3">
<thead>
<row>
<entry>Command</entry>
<entry>Paramater</entry>
<entry>Description and values</entry>
</row>
</thead>

<tbody>
<row>
<entry>#TOXICS or #TOXICS NONPOINT</entry>
<entry>N/A</entry>
<entry>N/A</entry>
</row>
<row>
<entry>#TYPE</entry>
<entry>file type</entry>
<entry>first nonblank character after the command to the last character of the record</entry>
</row>
<row>
<entry>#COUNTRY</entry>
<entry>country name</entry>
<entry>first nonblank character after the command to the last character of the record; valid country names are those in the <envar>COSTCY</envar> file</entry>
</row>
<row>
<entry>#YEAR</entry>
<entry>data year</entry>
<entry>number from 1900 to 2200</entry>
</row>
<row>
<entry>#DESC</entry>
<entry>description</entry>
<entry>a description of the data (SMOKE does not use)</entry>
</row>
</tbody>
</tgroup>
</informaltable>

<para>Sample header records are shown below.</para>

<para>For nonroad sources:</para>

<programlisting>#TOXICS
#TYPE     Nonroad Source Toxics Inventory
#COUNTRY  US
#YEAR     1999
#DESC     Draft 1999 version 2.0</programlisting>

<para>For nonpoint sources:</para>

<programlisting>#TOXICS NONPOINT
#TYPE     Nonpoint Source Toxics Inventory
#COUNTRY  US
#YEAR     1999
#DESC     Draft 1999 version 2.0</programlisting>

<section>

<title>ORL Nonpoint Format</title>

<informaltable>
<tgroup cols="4">
<thead>
<row>
<entry>Column</entry>
<entry>Name</entry>
<entry>Type</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>A</entry>
<entry>FIPS</entry>
<entry>Int</entry>
<entry>Five digit FIPS code for state and county (required)</entry>
</row>
<row>
<entry>B</entry>
<entry>SCC</entry>
<entry>Char</entry>
<entry>Source Classification Code (10 characters maximum) (required)</entry>
</row>
<row>
<entry>C</entry>
<entry>SIC</entry>
<entry>Int</entry>
<entry>Standard Industrial Code (recommended)</entry>
</row>
<row>
<entry>D</entry>
<entry>MACT</entry>
<entry>Char</entry>
<entry>Maximum Available Control Technology Code (6 characters maximum) (recommended)</entry>
</row>
<row>
<entry>E</entry>
<entry>SRCTYPE</entry>
<entry>Char</entry>
<entry><para>Source type (2 characaters maximum); used by SMOKE in determining applicable MACT-based controls (required)</para>

<itemizedlist>
<listitem>01 = major</listitem>
<listitem>02 = Section 12 area source</listitem>
</itemizedlist>
</entry>
</row>
<row>
<entry>F</entry>
<entry>NAICS</entry>
<entry>Char</entry>
<entry>North American Industrial Classification System Code (6 characters maximum) (optional)</entry>
</row>
<row>
<entry>G</entry>
<entry>CAS</entry>
<entry>Char</entry>
<entry>Pollutant CAS number or other code (10 characters maximum) (required; this is called the pollutant code in the NIF)</entry>
</row>
<row>
<entry>H</entry>
<entry>ANN_EMIS</entry>
<entry>Real</entry>
<entry>Annual emissions (tons/year) (required)</entry>
</row>
<row>
<entry>I</entry>
<entry>AVD_EMIS</entry>
<entry>Real</entry>
<entry>Average-day emissions (tons/average day) (optional)</entry>
</row>
<row>
<entry>J</entry>
<entry>CEFF</entry>
<entry>Real</entry>
<entry>Control Efficiency percentage (give value of 0-100) (optional; if missing will result in SMOKE default of 0)</entry>
</row>
<row>
<entry>K</entry>
<entry>REFF</entry>
<entry>Real</entry>
<entry>Rule Effectiveness percentage (give value of 0-100) (optional; if missing will result in SMOKE default of 100)</entry>
</row>
<row>
<entry>L</entry>
<entry>RPEN</entry>
<entry>Real</entry>
<entry>Rule Penetration percentage (give value of 0-100) (optional; if missing will result in SMOKE default of 100)</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

<section>

<title>ORL Nonroad Format</title>

<informaltable>
<tgroup cols="4">
<thead>
<row>
<entry>Column</entry>
<entry>Name</entry>
<entry>Type</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>A</entry>
<entry>STATE</entry>
<entry>Int</entry>
<entry>Two digit FIPS code for state (required)</entry>
</row>
<row>
<entry>B</entry>
<entry>COUNTY</entry>
<entry>Int</entry>
<entry>Three digit FIPS code for county (required)</entry>
</row>
<row>
<entry>C</entry>
<entry>SCC</entry>
<entry>Char</entry>
<entry>Source Classification Code (10 characters maximum) (required)</entry>
</row>
<row>
<entry>D</entry>
<entry>CAS</entry>
<entry>Char</entry>
<entry>Pollutant CAS number or other code (10 characters maximum) (required; this is called the pollutant code in the NIF)</entry>
</row>
<row>
<entry>E</entry>
<entry>ANN_EMIS</entry>
<entry>Real</entry>
<entry>Annual emissions (tons/year) (required)</entry>
</row>
<row>
<entry>F</entry>
<entry>AVD_EMIS</entry>
<entry>Real</entry>
<entry>Average-day emissions (tons/average day) (optional)</entry>
</row>
<row>
<entry>G</entry>
<entry>CEFF</entry>
<entry>Real</entry>
<entry>Control Efficiency percentage (give value of 0-100) (optional; if missing will result in SMOKE default of 0)</entry>
</row>
<row>
<entry>H</entry>
<entry>REFF</entry>
<entry>Real</entry>
<entry>Rule Effectiveness percentage (give value of 0-100) (optional; if missing will result in SMOKE default of 100)</entry>
</row>
<row>
<entry>I</entry>
<entry>RPEN</entry>
<entry>Real</entry>
<entry>Rule Penetration percentage (give value of 0-100) (optional; if missing will result in SMOKE default of 100)</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

</section>

</section>

<section>

<title><envar>BCUSE</envar>: Biogenic county land use</title>

<para><envar>BCUSE</envar> is the BEIS2-format ASCII biogenic county land use file input to the <command>Rawbio</command> program. <envar>BCUSE</envar> has the following structure:</para>

<informaltable>
<tgroup cols="3">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Description" />

<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1</entry>
<entry>A</entry>
<entry>Country/state/county code (Integer)</entry>
</row>
<row>
<entry>2</entry>
<entry>A</entry>
<entry>Rural forest land area (Real)</entry>
</row>
<row>
<entry colname="Columns">B</entry>
<entry>Rural forest number of subtypes (Integer)</entry>
</row>
<row>
<entry namest="Line" nameend="Description">For each rural forest subtype:
(These subtypes must match the emission factors in <envar>BFAC</envar>)</entry>
</row>
<row>
<entry>3+</entry>
<entry>A</entry>
<entry>Name of land use subtype as per BEIS2 documentation</entry>
</row>
<row>
<entry colname="Columns">B</entry>
<entry>Area within the county devoted to this land use subtype</entry>
</row>
<row>
<entry namest="Line" nameend="Description">Repeat lines 2 and 3+ for each of the other land use types: urban forest, agriculture, and "other".</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

<section>

<title><envar>BGUSE</envar>: Biogenic gridded land use</title>

<para><envar>BGUSE</envar> is the BEIS2-format ASCII biogenic gridded land use file input to the <command>Rawbio</command> program. <envar>BGUSE</envar> has the following structure; note that the data records in <envar>BGUSE</envar> all have list-directed formatting (e.g., quoted strings instead of free-form).</para>

<informaltable>
<tgroup cols="3">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Description" />

<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1</entry>
<entry>A</entry>
<entry>#GRID header (see <envar>AGPRO</envar> and <envar>MGPRO</envar>)</entry>
</row>
<row>
<entry>optional</entry>
<entry>A</entry>
<entry><para>Header with text metadata sections including the following:</para>

<simplelist>
<member>Introduction</member>
<member>Grid Definition</member>
<member>File Description</member>
<member>A list of "VEGID" names and descriptions, formatted "(1X, A4, 3X, A)"</member>
<member>Notes on VEGID</member>
<member>Source of Data</member>
<member>Version</member>
</simplelist>
</entry>
</row>
<row>
<entry>2</entry>
<entry>A</entry>
<entry>ENDHEADER (this text is required even if there is no header)</entry>
</row>
<row>
<entry namest="Line" nameend="Description">Repeat the following for each cell</entry>
</row>
<row>
<entry>3+</entry>
<entry>A</entry>
<entry>Cell column number (Integer)</entry>
</row>
<row>
<entry colname="Columns">B</entry>
<entry>Cell row number (Integer)</entry>
</row>
<row>
<entry colname="Columns">C</entry>
<entry>Cell area in hectares (Real)</entry>
</row>
<row>
<entry namest="Line" nameend="Description">For a given cell, repeat the following for each land use type (rural forest, urban forest, agriculture, or "other")</entry>
</row>
<row>
<entry>4+</entry>
<entry>A</entry>
<entry>Area of land use type in the cell (hectares) (Real)</entry>
</row>
<row>
<entry colname="Columns">B</entry>
<entry>Number of land use subtypes for this land use type in the cell (Integer)</entry>
</row>
<row>
<entry namest="Line" nameend="Description">Repeat the following for each land use subtype in the cell</entry>
</row>
<row>
<entry>5+</entry>
<entry>2&#8209;5</entry>
<entry>4-character name of land use type (in quotes)</entry>
</row>
<row>
<entry colname="Columns">7&#8209;80</entry>
<entry>Area of land use subtype (hectares) (Real)</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

<section>

<title><envar>MBINV</envar>: Mobile source activity and emissions</title>

<para>The <envar>MBINV</envar> file is the input mobile source inventory data file. The SMOKE Tool can create this file in either IDA activities format or IDA emissions format. The IDA activities format is a list-formatted file format, while the IDA emissions format is a column-specific format. Note that although the IDA format supports the LINK ID field, SMOKE cannot yet read the IDA link definitions file, which contains the coordinates for the links. So, in order to use link data with the current version of SMOKE, one must use the EMS-95 format.</para>

<para>For using EMS-95 data, the <envar>MBINV</envar> file can be in either a SMOKE list format, to read in EMS-95 link and non-link data, or a modified EMS-95 format that is list-formatted. The following sections have details about these file formats and how the files are created.</para>

<section>

<title>IDA Format</title>

<para>The mobile IDA inventory formats consists of a set of fixed-format data records, preceded by a set of header records. The header records can appear anywhere in the file to change the parameters of the data. For example, the #COUNTRY value could change to allow for multiple countries in a single file, the #YEAR value could change to allow for multiple years, and the #DATA and #UNITS values could change to allow for different data fields in different parts of the inventory file.</para>

<para>The general format of the header records is:</para>

<para>command parm1 parm2 ... parm <emphasis>n</emphasis></para>

<para>The <emphasis>command</emphasis> field starts in the first position. The remainder of the header is free-format, blank delimited. The specific header command formats are:</para>

<informaltable>
<tgroup cols="3">
<thead>
<row>
<entry>Command</entry>
<entry>Data</entry>
<entry>Description and values</entry>
</row>
</thead>

<tbody>
<row>
<entry>#IDA</entry>
<entry>N/A</entry>
<entry>N/A</entry>
</row>
<row>
<entry>#TYPE</entry>
<entry>file type</entry>
<entry><para>first nonblank character after the command to the last character of the record; valid types are:</para>

<itemizedlist>
<listitem>Motor Vehicle Activity Inventory</listitem>
<listitem>Motor Vehicle Emission Inventory</listitem>
</itemizedlist>

<para>If the word "activity" does not appear in the header, emissions are assumed.</para></entry>
</row>
<row>
<entry>#COUNTRY</entry>
<entry>country name</entry>
<entry>first nonblank character after the command to the last character of the record; valid country names are those in the <envar>COSTCY</envar> file (defaults "US", "CANADA", and "MEXICO")</entry>
</row>
<row>
<entry>#YEAR</entry>
<entry>data year</entry>
<entry>number from 1900 to 2200</entry>
</row>
<row>
<entry>#DESC</entry>
<entry>description</entry>
<entry>a description of the data (not used by SMOKE)</entry>
</row>
<row>
<entry>#DATA</entry>
<entry>data1, data2, data <emphasis>n</emphasis></entry>
<entry>defines the data that are contained after the source identifiers on each records. "data1" is the name of the first data type, "data2" is the name of the second data type, etc.</entry>
</row>
<row>
<entry>#UNITS</entry>
<entry>units1, units2, units <emphasis>n</emphasis></entry>
<entry>defines the units of the input data. "units1" is the name of the first units, and so forth. These must be included in quotes. This command is valid only for mobile activity data, because emissions data have units built into the file formats.</entry>
</row>
</tbody>
</tgroup>
</informaltable>

<para>Sample header records are shown below.</para>

<para>For activities:</para>

<programlisting>#IDA
#TYPE     Motor Vehicle Activity Inventory
#COUNTRY  US
#YEAR     1996
#DESC     1996 NET inventory, version 3.1
#DATA     SPEED VMT
#UNITS    "miles/hr" "10E6 miles/yr"</programlisting>

<para>For emissions:</para>

<programlisting>#IDA
#TYPE     Motor Vehicle Emission Inventory
#COUNTRY  US
#YEAR     1996
#DESC     1996 NET inventory, version 3.1
#DATA     VOC NOX CO SO2 PM10 PM2_5 NH3</programlisting>

<section>

<title>Mobile IDA Activity Data Format</title>

<para>The records are list-formatted.</para>

<informaltable>
<tgroup cols="3">
<thead>
<row>
<entry>Position</entry>
<entry>Name</entry>
<entry>Type</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>A</entry>
<entry>STID</entry>
<entry>Int</entry>
<entry>FIPS state code (required)</entry>
</row>
<row>
<entry>B</entry>
<entry>CYID</entry>
<entry>Int</entry>
<entry>FIPS county code (required)</entry>
</row>
<row>
<entry>C</entry>
<entry>LINK ID</entry>
<entry>Char</entry>
<entry>Link identifier (optional; put zero for non-link data)</entry>
</row>
<row>
<entry>D</entry>
<entry>SCC</entry>
<entry>Char</entry>
<entry>AMS SCC (required)</entry>
</row>
<row>
<entry>E</entry>
<entry>DATA(1)</entry>
<entry>Real</entry>
<entry>Data for the first field in the #DATA header list, given in the units of the first field in the #UNITS header list (required)</entry>
</row>
<row>
<entry>F</entry>
<entry>DATA(2)</entry>
<entry>Real</entry>
<entry>Data for the second field in the #DATA header list, given in the units of the second field in the #UNITS header list (required if <emphasis>n</emphasis> > 1)</entry>
</row>
<row>
<entry>G</entry>
<entry>DATA(3)</entry>
<entry>Real</entry>
<entry>Data for the third field... (required if <emphasis>n</emphasis> > 2)</entry>
</row>
<row>
<entry>...</entry>
<entry>DATA(<emphasis>n</emphasis>)</entry>
<entry>Real</entry>
<entry>Data for the final field... (required if <emphasis>n</emphasis> > 3)</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

<section>

<title>Mobile IDA Emissions Data Format</title>

<para>The records are fixed-format.</para>

<informaltable>
<tgroup cols="4">
<thead>
<row>
<entry>Position</entry>
<entry>Name</entry>
<entry>Type</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1&#8209;2</entry>
<entry>STID</entry>
<entry>Int</entry>
<entry>State Code (required)</entry>
</row>
<row>
<entry>3&#8209;5</entry>
<entry>CYID</entry>
<entry>Int</entry>
<entry>County Code (required)</entry>
</row>
<row>
<entry>6&#8209;15</entry>
<entry>LINK ID</entry>
<entry>Char</entry>
<entry>Link identifier (optional; put zero for nonlink data)</entry>
</row>
<row>
<entry>16&#8209;25</entry>
<entry>SCC</entry>
<entry>Char</entry>
<entry>AMS SCC (required)</entry>
</row>
<row>
<entry>26&#8209;35</entry>
<entry>DATA(1)</entry>
<entry>Real</entry>
<entry>Data for the first field in the #DATA header list (short tons/year) (required)</entry>
</row>
<row>
<entry>36&#8209;45</entry>
<entry>AVD(1)</entry>
<entry>Real</entry>
<entry>Average-day data for the first field in the #DATA header list (short tons/average day) (optional)</entry>
</row>
<row>
<entry>46&#8209;55</entry>
<entry>DATA(2)</entry>
<entry>Real</entry>
<entry>Data for the second field in the #DATA header list (short tons/yr)</entry>
</row>
<row>
<entry>56&#8209;65</entry>
<entry>AVD(2)</entry>
<entry>Real</entry>
<entry>Average-day data for the second field in the #DATA header list (short tons/average day)</entry>
</row>
<row>
<entry>66&#8209;75</entry>
<entry>DATA(3)</entry>
<entry>Real</entry>
<entry>Data for the third field (short tons/yr)</entry>
</row>
<row>
<entry>76&#8209;85</entry>
<entry>AVD(3)</entry>
<entry>Real</entry>
<entry>Average-day data for the third field (short tons/average day)</entry>
</row>
<row>
<entry>...</entry>
<entry>DATA(<emphasis>n</emphasis>)</entry>
<entry>Real</entry>
<entry>Data for the final field (short tons/yr)</entry>
</row>
<row>
<entry>...</entry>
<entry>AVD(<emphasis>n</emphasis>)</entry>
<entry>Real</entry>
<entry>Average-day data for the final field (short tons/average day)</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

</section>

<section>

<title>EMS-95 Formats</title>

<para>For EMS-95 inputs, the <envar>MBINV</envar> file must list the nonlink and link EMS-95 files. This format is called a SMOKE list format. The file can be created by using the following UNIX command, which assumes the EMS-95 files (and only these files) are all in the <filename class="directory"><envar>$MBDAT</envar></filename> directory.</para>

<para><userinput><command>ls</command> <filename><envar>$MBDAT</envar>/*.mb</filename> > <envar>$MBINV</envar></userinput></para>

<para>When using a list format, the <envar>MBINV</envar> file must also contain one or more INVYEAR packets. This packet acts as a switch that sets the inventory year for the files, each of which will get the year designated by the packet until another INVYEAR packet appears in the file. In this way, multiple years of inventory data can be combined to the same SMOKE inventory file.</para>

<para>The data files that are referenced by the SMOKE list-formatted <envar>MBINV</envar> files may also contain the following header fields: #COUNTRY, #YEAR, and/or #DATA, as described for IDA-formatted mobile source files. The default country is 0 and the default year is set by the INVYEAR packet. The #DATA header must appear, even if the only data in the file are VMT data. The #UNITS header must NOT appear.</para>

<section>

<title>EMS-95 nonlink column-specific format</title>

<informaltable>
<tgroup cols="4">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Type" />
<colspec colname="Description" />

<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Type</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1</entry>
<entry>A</entry>
<entry>Char</entry>
<entry>#NONLINK</entry>
</row>
<row>
<entry>2</entry>
<entry>A&#8209;B</entry>
<entry>Char</entry>
<entry>#DATA VMT</entry>
</row>
<row>
<entry>3+ </entry>
<entry>1&#8209;2 </entry>
<entry>Int</entry>
<entry>FIPS state code (required)</entry>
</row>
<row>
<entry colname="Columns">3&#8209;5</entry>
<entry>Int</entry>
<entry>FIPS county code (required)</entry>
</row>
<row>
<entry colname="Columns">6&#8209;6</entry>
<entry>Int</entry>
<entry>Area type code (required)</entry>
</row>
<row>
<entry colname="Columns">7&#8209;10</entry>
<entry>Int</entry>
<entry>Facility type code (required)</entry>
</row>
<row>
<entry colname="Columns">11&#8209;18</entry>
<entry>Real</entry>
<entry>VMT (miles/average annual weekday) (required)</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

<section>

<title>EMS-95 nonlink list-directed format</title>

<informaltable>
<tgroup cols="4">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Type" />
<colspec colname="Description" />

<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Type</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1</entry>
<entry>A</entry>
<entry>Char</entry>
<entry>#NONLINK</entry>
</row>
<row>
<entry>2</entry>
<entry>A+</entry>
<entry>Char</entry>
<entry>#DATA VMT  PM10  PM2_5 ... Last data type</entry>
</row>
<row>
<entry>3+</entry>
<entry>A</entry>
<entry>Int</entry>
<entry>Country, state, and county code (YSSCCC) (required)</entry>
</row>
<row>
<entry colname="Columns">B</entry>
<entry>Int</entry>
<entry>Road type code (required)</entry>
</row>
<row>
<entry colname="Columns">C</entry>
<entry>Real</entry>
<entry>VMT (miles/average annual weekday) (required)</entry>
</row>
<row>
<entry colname="Columns">D</entry>
<entry>Real</entry>
<entry>PM10 (short tons/average annual weekday)</entry>
</row>
<row>
<entry colname="Columns">E</entry>
<entry>Real</entry>
<entry>PM2_5 (short tons/average annual weekday)</entry>
</row>
<row>
<entry namest="Columns" nameend="Description">additional columns for additional data types listed on the #DATA line</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

<section>

<title>EMS-95 link list-directed format</title>

<informaltable>
<tgroup cols="4">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Type" />
<colspec colname="Description" />

<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Type</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1</entry>
<entry>A</entry>
<entry>Char</entry>
<entry>#LINK</entry>
</row>
<row>
<entry>2</entry>
<entry>A+</entry>
<entry>Char</entry>
<entry>#DATA  VMT  PM10  PM2_5 ... Last data type</entry>
</row>
<row>
<entry>3+</entry>
<entry>A</entry>
<entry>Int</entry>
<entry>Country, state, and county code (YSSCCC, required)</entry>
</row>
<row>
<entry colname="Columns">B </entry>
<entry>Int</entry>
<entry>Road type code (required)</entry>
</row>
<row>
<entry colname="Columns">C</entry>
<entry>Char</entry>
<entry>Link ID (15 characters) (required)</entry>
</row>
<row>
<entry colname="Columns">D</entry>
<entry>Real</entry>
<entry>Link start longitude (decimal degrees) or UTM Easting (m) (required)</entry>
</row>
<row>
<entry colname="Columns">E</entry>
<entry>Real</entry>
<entry>Link start latitude (decimal degrees) or UTM Northing (m) (required)</entry>
</row>
<row>
<entry colname="Columns">F</entry>
<entry>Real</entry>
<entry>Link end longitude (decimal degrees) or UTM Easting (m) (required)</entry>
</row>
<row>
<entry colname="Columns">G</entry>
<entry>Real</entry>
<entry>Link end latitude (decimal degrees) or UTM Northing (m) (required)</entry>
</row>
<row>
<entry colname="Columns">H</entry>
<entry>Int</entry>
<entry>UTM zone or zero for lat/lon coordinates (required)</entry>
</row>
<row>
<entry colname="Columns">I</entry>
<entry>Real</entry>
<entry>VMT (miles/average annual weekday) (required)</entry>
</row>
<row>
<entry colname="Columns">J</entry>
<entry>Real</entry>
<entry>PM10 (short tons/average annual weekday)</entry>
</row>
<row>
<entry colname="Columns">K</entry>
<entry>Real</entry>
<entry>PM2_5 (short tons/average annual weekday)</entry>
</row>
<row>
<entry namest="Columns" nameend="Description">additional columns for additional data types listed on the #DATA line</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

</section>

<section>

<title>ORL Format (Toxics)</title>

<para>This format consists of a set of list-formatted detail records, proceeded by a set of header records. The general format of the header records is:</para>

<para>command parm1 parm2 ... parm <emphasis>n</emphasis></para>

<para>The <emphasis>command</emphasis> field starts in the first position. The remainder of the header is free-format, blank delimited. The specific header formats are:</para>

<informaltable>
<tgroup cols="3">
<thead>
<row>
<entry>Command</entry>
<entry>Data</entry>
<entry>Description and values</entry>
</row>
</thead>

<tbody>
<row>
<entry>#TOXICS</entry>
<entry>N/A</entry>
<entry>N/A</entry>
</row>
<row>
<entry>#TYPE</entry>
<entry>file type</entry>
<entry>first nonblank character after the command to the last character of the record</entry>
</row>
<row>
<entry>#COUNTRY</entry>
<entry>country name</entry>
<entry>first nonblank character after the command to the last character of the record; valid country names are those in the <envar>COSTCY</envar> file</entry>
</row>
<row>
<entry>#YEAR</entry>
<entry>data year</entry>
<entry>number from 1900 to 2200</entry>
</row>
<row>
<entry>#DESC</entry>
<entry>description</entry>
<entry>a description of the data (SMOKE does not use)</entry>
</row>
</tbody>
</tgroup>
</informaltable>

<para>Sample header records are shown below.</para>

<programlisting>#TOXICS
#TYPE     Mobile Source Toxics Inventory
#COUNTRY  US
#YEAR     1999
#DESC     Draft 1999 version 2.0</programlisting>

<para>The format of the detail records is as follows:</para>

<informaltable>
<tgroup cols="4">
<thead>
<row>
<entry>Column</entry>
<entry>Name</entry>
<entry>Type</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>A</entry>
<entry>STATE</entry>
<entry>Int</entry>
<entry>Two digit FIPS code for state (required)</entry>
</row>
<row>
<entry>B</entry>
<entry>COUNTY</entry>
<entry>Int</entry>
<entry>Three digit FIPS code for county (required)</entry>
</row>
<row>
<entry>C</entry>
<entry>SCC</entry>
<entry>Char</entry>
<entry>Ten character SCC (required)</entry>
</row>
<row>
<entry>D</entry>
<entry>CAS</entry>
<entry>Char</entry>
<entry>Pollutant CAS number or other code (10 characters maximum) (required; this is called the pollutant code in the NIF)</entry>
</row>
<row>
<entry>E</entry>
<entry>ANN_EMIS</entry>
<entry>Real</entry>
<entry>Annual emissions (tons/year) (required)</entry>
</row>
<row>
<entry>F</entry>
<entry>AVD_EMIS</entry>
<entry>Real</entry>
<entry>Average-day emissions (tons/average day) (optional)</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

</section>

<section>

<title><envar>PTDAY</envar>: Point source day-specific emissions</title>

<para>The <envar>PTDAY</envar> file is the input point source inventory file for day-specific data. The user must create it without the SMOKE Tool. The file is simply a list of day-specific data files (directory paths included) that are to be read in by SMOKE as day-specific data. The files listed in the <envar>PTDAY</envar> file must be in the format shown in the table below. The contents of the day-specific data files vary depending on whether the <envar>PTINV</envar> file is in EMS-95 or IDA format. In addition, these files can have a #COUNTRY entry as the first line of the file to set the country code; valid country names are those in the <envar>COSTCY</envar> file. If no #COUNTRY header is used, then the default country code that will be assumed by SMOKE is 0 (for which the default <envar>COSTCY</envar> file has the US as the country code).</para>

<para>SMOKE requires that the sources in the <envar>PTDAY</envar> file also be in the <envar>PTINV</envar> file, and that the user has matched the sources between the annual data inventory and the day-specific data. See the documentation for the <envar>PTHOUR</envar> file for additional information on how to use this file with IDA annual inventories.</para>

<informaltable>
<tgroup cols="4">
<thead>
<row>
<entry>Position</entry>
<entry>Name</entry>
<entry>Type</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1&#8209;2</entry>
<entry>STID</entry>
<entry>Int</entry>
<entry>State Code (required)</entry>
</row>
<row>
<entry>3&#8209;5</entry>
<entry>CYID</entry>
<entry>Int</entry>
<entry>County Code (required)</entry>
</row>
<row>
<entry>6&#8209;20</entry>
<entry>FCID</entry>
<entry>Char</entry>
<entry>Facility ID (a.k.a. plant ID)</entry>
</row>
<row>
<entry>21&#8209;32</entry>
<entry>CHAR1</entry>
<entry>Char</entry>
<entry>
<simplelist>
<member>If <envar>PTINV</envar> in EMS-95 format: Stack ID (required)</member>
<member>If <envar>PTINV</envar> in IDA format: Point ID</member>
</simplelist>
</entry>
</row>
<row>
<entry>33&#8209;44</entry>
<entry>CHAR2</entry>
<entry>Char</entry>
<entry>
<simplelist>
<member>If <envar>PTINV</envar> in EMS-95 format: Device ID (required)</member>
<member>If <envar>PTINV</envar> in IDA format: Stack ID</member>
</simplelist>
</entry>
</row>
<row>
<entry>45&#8209;56</entry>
<entry>CHAR3</entry>
<entry>Char</entry>
<entry>
<simplelist>
<member>If <envar>PTINV</envar> in EMS-95 format: Process ID (required)</member>
<member>If <envar>PTINV</envar> in IDA format: Segment</member>
</simplelist>
</entry>
</row>
<row>
<entry>57&#8209;61</entry>
<entry>POLID</entry>
<entry>Char</entry>
<entry>Pollutant name (required)</entry>
</row>
<row>
<entry>62&#8209;69</entry>
<entry>DATE</entry>
<entry>Char</entry>
<entry>Date in MM/DD/YY. Years less than 70 are treated as century 2000. (required)</entry>
</row>
<row>
<entry>70&#8209;72</entry>
<entry>TZONNAM</entry>
<entry>Char</entry>
<entry>Time zone name. Valid entries GMT, ADT, AST, EDT, EST, CDT, CST, MDT, MST, PDT, PST. Add others to <filename>EMCNST3.EXT</filename> include file and recompile. (required)</entry>
</row>
<row>
<entry>73&#8209;90</entry>
<entry>DAYTOT</entry>
<entry>Real</entry>
<entry>Daily emissions total (short tons/day) (required)</entry>
</row>
<row>
<entry>92&#8209;101</entry>
<entry>SCC</entry>
<entry>Char</entry>
<entry>Only if <envar>PTINV</envar> in IDA format: SCC is required.</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

<section>

<title><envar>PTHOUR</envar>: Point source hour-specific emissions</title>

<para>The <envar>PTHOUR</envar> file is the input point source inventory file for hour-specific data and profiles. The file is simply a list of hour-specific data files (directory paths included) that are to be read in by SMOKE as hour-specific data. The files listed in the <envar>PTHOUR</envar> file must be in the format described in this section. The contents of the hour-specific data files vary depending on whether the <envar>PTINV</envar> file is in EMS-95 or IDA format. In addition, these files can have a #COUNTRY entry as the first line of the file to set the country code. The default country code is 0.</para>

<para>The hour-specific data files that are listed in the <envar>PTHOUR</envar> file can be provided in two ASCII formats: EMS-95 format and Continuous Emissions Monitoring (CEM) format. The EMS-95 format must be created by the user manually. The CEM format can be output from the SMOKE Tool.</para>

<section>

<title>Date range setting</title>

<para>The <envar>PTHOUR</envar> file may optionally contain a packet to control the range of dates that <command>Smkinven</command> will read in the data. When this feature is needed, the following entry should appear on the first line of the <envar>PTHOUR</envar> file.</para>

<para>DATERANGE  MMDD(start) MMDD(end)</para>

<para>where MMDD is the two-digit month and day of the month at the start and end of the period of interest. For example, to request July 10th through 12th, the first line of the file should read:</para>

<para>DATERANGE  0710  0712</para>

<para>The year is implied by the CEM data themselves, which can only be provided to SMOKE with a single year in the input file. The year can be broken up by the user into smaller periods in separate files, and SMOKE can read in only part of the year as well from a file with only specific dates in it. This feature is useful when users want to input the default files and extract a certain period to output to the <envar>PHOUR</envar> file from <command>Smkinven</command>. Note that reading in the whole year of data and extracting just a few days will take much more time than manually editing the CEM file to contains just the days of interest. Also note that if you choose the manual editing option, you must select days that fully cover the modeling episode after accounting for time zone differences between the facility's time zone and the modeling time zone (set by the <envar>OUTZONE</envar> option).</para>

</section>

<section>

<title>EMS-95 Format</title>

<para>For EMS-95 formatted data, SMOKE requires that the sources in the <envar>PTHOUR</envar> file also be in the <envar>PTINV</envar> file. The values of the fields that are common to the hour-specific data and the annual data need to match exactly. These fields are Facility ID, Stack ID, Device ID, and Process ID. These fields are treated as text fields (not numeric) in SMOKE, so leading zeros need to be consistent between the hour-specific and annual or average-day inventory files.</para>

<para>When using hour-specific data in EMS-95 format with the IDA annual inventory, the fields in the <envar>PTHOUR</envar> file should line up with the fields in the <envar>PTINV</envar> file as follows:</para>

<itemizedlist>
<listitem>
<para><envar>PTHOUR</envar> Facility ID (FCID) maps to <envar>PTINV</envar> PLANTID</para>
</listitem>
<listitem>
<para><envar>PTHOUR</envar> Stack ID (SKID) maps to <envar>PTINV</envar> POINTID</para>
</listitem>
<listitem>
<para><envar>PTHOUR</envar> Device ID (DVID) maps to <envar>PTINV</envar> STACKID</para>
</listitem>
<listitem>
<para><envar>PTHOUR</envar> Process ID (PRID) maps to <envar>PTINV</envar> SEGMENT</para>
</listitem>
<listitem>
<para><envar>PTHOUR</envar> SCC (implied by Process ID in EMS-95 process file) maps to <envar>PTINV</envar> SCC</para>
</listitem>
</itemizedlist>

<informaltable>
<tgroup cols="4">
<thead>
<row>
<entry>Position</entry>
<entry>Name</entry>
<entry>Type</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1&#8209;2</entry>
<entry>STID</entry>
<entry>Int</entry>
<entry>State Code (required)</entry>
</row>
<row>
<entry>3&#8209;5</entry>
<entry>CYID</entry>
<entry>Int</entry>
<entry>County Code (required)</entry>
</row>
<row>
<entry>6&#8209;20</entry>
<entry>FCID</entry>
<entry>Char</entry>
<entry>Facility ID (a.k.a. plant ID) (required)</entry>
</row>
<row>
<entry>21&#8209;32</entry>
<entry>SKID</entry>
<entry>Char</entry>
<entry>
<simplelist>
<member>If <envar>PTINV</envar> in EMS-95 format: Stack ID (required)</member>
<member>If <envar>PTINV</envar> in IDA format: Point ID</member>
</simplelist>
</entry>
</row>
<row>
<entry>33&#8209;44</entry>
<entry>DVID</entry>
<entry>Char</entry>
<entry>
<simplelist>
<member>If <envar>PTINV</envar> in EMS-95 format: Device ID (required)</member>
<member>If <envar>PTINV</envar> in IDA format: Stack ID</member>
</simplelist>
</entry>
</row>
<row>
<entry>45&#8209;56</entry>
<entry>PRID</entry>
<entry>Char</entry>
<entry>
<simplelist>
<member>If <envar>PTINV</envar> in EMS-95 format: Process ID (required)</member>
<member>If <envar>PTINV</envar> in IDA format: Segment</member>
</simplelist>
</entry>
</row>
<row>
<entry>57&#8209;61</entry>
<entry>POLID</entry>
<entry>Char</entry>
<entry>Pollutant name (required)</entry>
</row>
<row>
<entry>62&#8209;69</entry>
<entry>DATE</entry>
<entry>Char</entry>
<entry>Date in MM/DD/YY format. Years less than 70 are treated as century 2000 (required)</entry>
</row>
<row>
<entry>70&#8209;72</entry>
<entry>TZONNAM</entry>
<entry>Char</entry>
<entry>Time zone name associated with emissions data. Valid entries are GMT, ADT, AST, EDT, EST, CDT, CST, MDT, MST, PDT, PST. NOTE: Add others to <filename>EMCNST3.EXT</filename> include file and recompile. (required)</entry>
</row>
<row>
<entry>73&#8209;79</entry>
<entry>HRVAL1</entry>
<entry>Real</entry>
<entry>Hourly emissions for hour 1 (short tons/hour) (required)</entry>
</row>
<row>
<entry>80&#8209;86</entry>
<entry>HRVAL2</entry>
<entry>Real</entry>
<entry>Hourly emissions for hour 2 (short tons/hour) (required)</entry>
</row>
<row>
<entry>87&#8209;93</entry>
<entry>HRVAL3</entry>
<entry>Real</entry>
<entry>Hourly emissions for hour 3 (short tons/hour) (required)</entry>
</row>
<row>
<entry>...</entry>
</row>
<row>
<entry>234&#8209;240</entry>
<entry>HRVAL24</entry>
<entry>Real</entry>
<entry>Hourly emissions for hour 24 (short tons/hour) (required)</entry>
</row>
<row>
<entry>241&#8209;248</entry>
<entry>DAYTOT</entry>
<entry>Real</entry>
<entry>Daily emissions total (short tons/day)</entry>
</row>
<row>
<entry>250&#8209;259</entry>
<entry>SCC</entry>
<entry>Char</entry>
<entry>Only if <envar>PTINV</envar> in IDA format: SCC is required.</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

<section>

<title>CEM hour-specific format</title>

<para>The CEM hour-specific format can be written by the SMOKE Tool in Models-3. This format can only be used with IDA-formatted annual inventory files at this time. With the CEM hour-specific format, SMOKE uses the CEM ORIS ID and Boiler ID fields to match sources in the CEM hour-specific inventory to those in the IDA-formatted annual inventory. <remark>Note that the DATERANGE header can be used in the list file (not the individual CEM files) to limit the dates read from the individual CEM files.</remark></para>

<informaltable>
<tgroup cols="4">
<thead>
<row>
<entry>Position</entry>
<entry>Name</entry>
<entry>Type</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>A</entry>
<entry>ORISID</entry>
<entry>Char</entry>
<entry>DOE Plant ID (required) (should match the same field in the <envar>PTINV</envar> file in IDA format)</entry>
</row>
<row>
<entry>B</entry>
<entry>BLRID</entry>
<entry>Char</entry>
<entry>Boiler Identification Code (required) (should match the same field in the <envar>PTINV</envar> file in IDA format)</entry>
</row>
<row>
<entry>C</entry>
<entry>YYMMDD</entry>
<entry>Int</entry>
<entry>Date of data in YYMMDD format (required)</entry>
</row>
<row>
<entry>D</entry>
<entry>HOUR</entry>
<entry>Integer</entry>
<entry>Hour value from 0 to 23</entry>
</row>
<row>
<entry>E</entry>
<entry>CO2</entry>
<entry>Real</entry>
<entry>Carbon dioxide emissions (lb/h)</entry>
</row>
<row>
<entry>F</entry>
<entry>SO2</entry>
<entry>Real</entry>
<entry>Sulfur dioxide emissions (lb/h)</entry>
</row>
<row>
<entry>G</entry>
<entry>NOXRATE</entry>
<entry>Real</entry>
<entry>Nitrogen dioxide emissions (lb/MMBtu)</entry>
</row>
<row>
<entry>H</entry>
<entry>OPTIME</entry>
<entry>Real</entry>
<entry>Operating time (not used by SMOKE)</entry>
</row>
<row>
<entry>I</entry>
<entry>GLOAD</entry>
<entry>Real</entry>
<entry>Not used by SMOKE, but some real number must be in the field</entry>
</row>
<row>
<entry>J</entry>
<entry>SLOAD</entry>
<entry>Real</entry>
<entry>Not used by SMOKE, but some real number must be in the field</entry>
</row>
<row>
<entry>K</entry>
<entry>HTINPUT</entry>
<entry>Real</entry>
<entry>Heat input (MMBtu)</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

</section>

<section>

<title><envar>PTINV</envar>: Point source annual or average day emissions</title>

<para>The <envar>PTINV</envar> file is the input point source inventory file for annual and average-day data. The SMOKE Tool can create this file in IDA format. Alternatively, this file can have the same format as the SMOKE prototype's PNLST file, which can be used to import EMS-95 data.</para>

<section>

<title>IDA Format</title>

<para>This inventory file consists of a set of fixed-format detail records, preceded by a set of header records. The general format of the header records is:</para>

<para>command parm1 parm2 ... parm <emphasis>n</emphasis></para>

<para>The <emphasis>command</emphasis> field starts in the first position. The remainder of the header is free-format, blank delimited. The specific header command formats are:</para>

<informaltable>
<tgroup cols="3">
<thead>
<row>
<entry>Command</entry>
<entry>Data</entry>
<entry>Description and values</entry>
</row>
</thead>

<tbody>
<row>
<entry>#IDA</entry>
<entry>N/A</entry>
<entry>N/A</entry>
</row>
<row>
<entry>#TYPE</entry>
<entry>file type</entry>
<entry>first nonblank character after the command to the last character of the record</entry>
</row>
<row>
<entry>#COUNTRY</entry>
<entry>country name</entry>
<entry>first nonblank character after the command to the last character of the record; valid country names are those in the <envar>COSTCY</envar> file</entry>
</row>
<row>
<entry>#YEAR</entry>
<entry>data year</entry>
<entry>number from 1900 to 2200</entry>
</row>
<row>
<entry>#DESC</entry>
<entry>description</entry>
<entry>a description of the data (not used by SMOKE)</entry>
</row>
<row>
<entry>#POLID or #DATA</entry>
<entry>pol1 pol2 ... pol <emphasis>n</emphasis></entry>
<entry>defines the pollutants that are contained in the detail records. "pol1" is the ID of the first pollutant, "pol2" is the ID of the second pollutant, etc.</entry>
</row>
</tbody>
</tgroup>
</informaltable>

<para>Sample header records are shown below:</para>

<programlisting>#IDA
#TYPE     Point Source Inventory
#COUNTRY  US
#YEAR     1995
#DESC     Alabama 1995
#POLID    CO NH3 NOX PM10 PM2_5 SO2 VOC</programlisting>

<para>Starting in version 1.4 of SMOKE, the reader of this file has been changed to work around a bug in the version 6.5 IRIX operating system. This workaround makes the reader more sensitive to missing pollutant data. This can cause problems when reading the data if a record has missing emissions data for the last pollutant in the list given by the #POLID header. To prevent this problem, fill in the missing data columns with spaces.</para>

<para>The detail records are fixed-format. The fields in each record are shown in the table below.</para>

<informaltable>
<tgroup cols="4">
<thead>
<row>
<entry>Position</entry>
<entry>Field Name</entry>
<entry>Type</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1&#8209;2</entry>
<entry>STID</entry>
<entry>Int</entry>
<entry>State Code (required)</entry>
</row>
<row>
<entry>3&#8209;5</entry>
<entry>CYID</entry>
<entry>Int</entry>
<entry>County Code (required)</entry>
</row>
<row>
<entry>6&#8209;20</entry>
<entry>PLANTID</entry>
<entry>Char</entry>
<entry>Plant Identification Code (required)</entry>
</row>
<row>
<entry>21&#8209;35</entry>
<entry>POINTID</entry>
<entry>Char</entry>
<entry>Point Identification Code (recommended)</entry>
</row>
<row>
<entry>36&#8209;47</entry>
<entry>STACKID</entry>
<entry>Char</entry>
<entry>Stack Identification Code (recommended)</entry>
</row>
<row>
<entry>48&#8209;53</entry>
<entry>ORISID</entry>
<entry>Char</entry>
<entry>DOE Plant ID (generally recommended, and required if matching to hour-specific CEM data)</entry>
</row>
<row>
<entry>54&#8209;59</entry>
<entry>BLRID</entry>
<entry>Char</entry>
<entry>Boiler Identification Code (recommended)</entry>
</row>
<row>
<entry>60&#8209;61</entry>
<entry>SEGMENT</entry>
<entry>Char</entry>
<entry>DOE ID (recommended)</entry>
</row>
<row>
<entry>62&#8209;101</entry>
<entry>PLANT</entry>
<entry>Char</entry>
<entry>Plant Name (recommended)</entry>
</row>
<row>
<entry>102&#8209;111</entry>
<entry>SCC</entry>
<entry>Char</entry>
<entry>SCC (required)</entry>
</row>
<row>
<entry>112&#8209;115</entry>
<entry>BEGYR</entry>
<entry>Int</entry>
<entry>Beginning Year of Plant Operation (not used by SMOKE)</entry>
</row>
<row>
<entry>116&#8209;119</entry>
<entry>ENDYR</entry>
<entry>Int</entry>
<entry>Ending Year of Plant Operation (not used by SMOKE)</entry>
</row>
<row>
<entry>120&#8209;123</entry>
<entry>STKHGT</entry>
<entry>Real</entry>
<entry>Stack Height (ft) (required)</entry>
</row>
<row>
<entry>124&#8209;129</entry>
<entry>STKDIAM</entry>
<entry>Real</entry>
<entry>Stack Diameter (ft) (required)</entry>
</row>
<row>
<entry>130&#8209;133</entry>
<entry>STKTEMP</entry>
<entry>Real</entry>
<entry>Stack Gas Exit Temperature (&deg;F) (required)</entry>
</row>
<row>
<entry>134&#8209;143</entry>
<entry>STKFLOW</entry>
<entry>Real</entry>
<entry>Stack Gas Flow Rate (ft<superscript>3</superscript>/s) (optional; automatically calculated by <command>Smkinven</command> from velocity and diameter if not given in file)</entry>
</row>
<row>
<entry>144&#8209;152</entry>
<entry>STKVEL</entry>
<entry>Real</entry>
<entry>Stack Gas Exit Velocity (ft/s) (required)</entry>
</row>
<row>
<entry>153&#8209;160</entry>
<entry>BOILCAP</entry>
<entry>Real</entry>
<entry>Design Capacity (mmBtu/h) (not used by SMOKE)</entry>
</row>
<row>
<entry>161&#8209;161</entry>
<entry>CAPUNITS</entry>
<entry>Char</entry>
<entry>Capacity Unit Code (not used by SMOKE)</entry>
</row>
<row>
<entry>162&#8209;163</entry>
<entry>WINTHRU</entry>
<entry>Real</entry>
<entry>Winter throughput (% of Annual) (not used by SMOKE)</entry>
</row>
<row>
<entry>164&#8209;165</entry>
<entry>SPRTHRU</entry>
<entry>Real</entry>
<entry>Spring throughput (% of Annual) (not used by SMOKE)</entry>
</row>
<row>
<entry>166&#8209;167</entry>
<entry>SUMTHRU</entry>
<entry>Real</entry>
<entry>Summer throughput (% of Annual) (not used by SMOKE)</entry>
</row>
<row>
<entry>168&#8209;169</entry>
<entry>FALTHRU</entry>
<entry>Real</entry>
<entry>Fall throughput (% of Annual) (not used by SMOKE)</entry>
</row>
<row>
<entry>170&#8209;171</entry>
<entry>HOURS</entry>
<entry>Int</entry>
<entry>Normal Operating Time (/day) (not used by SMOKE)</entry>
</row>
<row>
<entry>172&#8209;173</entry>
<entry>START</entry>
<entry>Int</entry>
<entry>Normal Operation Start Time (not used by SMOKE)</entry>
</row>
<row>
<entry>174&#8209;174</entry>
<entry>DAYS</entry>
<entry>Int</entry>
<entry>Normal Operating Time (days/wk) (not used by SMOKE)</entry>
</row>
<row>
<entry>175&#8209;176</entry>
<entry>WEEKS</entry>
<entry>Int</entry>
<entry>Normal Operating Time (wk/yr) (not used by SMOKE)</entry>
</row>
<row>
<entry>177&#8209;187</entry>
<entry>THRUPUT</entry>
<entry>Real</entry>
<entry>Throughput Rate (SCC units/yr) (not used by SMOKE)</entry>
</row>
<row>
<entry>188&#8209;199</entry>
<entry>MAXRATE</entry>
<entry>Real</entry>
<entry>Maximum O<subscript>3</subscript> Season Rate (units/day) (not used by SMOKE)</entry>
</row>
<row>
<entry>200&#8209;207</entry>
<entry>HEATCON</entry>
<entry>Real</entry>
<entry>Heat Content (mmBtu/SCC unit) (not used by SMOKE)</entry>
</row>
<row>
<entry>208&#8209;212</entry>
<entry>SULFCON</entry>
<entry>Real</entry>
<entry>Sulfur Content (mass percent) (not used by SMOKE)</entry>
</row>
<row>
<entry>213&#8209;217</entry>
<entry>ASHCON</entry>
<entry>Real</entry>
<entry>Ash Content (mass percent) (not used by SMOKE)</entry>
</row>
<row>
<entry>218&#8209;226</entry>
<entry>NETDC</entry>
<entry>Real</entry>
<entry>Maximum Nameplate Capacity (MW) (not used by SMOKE)</entry>
</row>
<row>
<entry>227&#8209;230</entry>
<entry>SIC</entry>
<entry>Int</entry>
<entry>Standard Industrial Classification Code (SIC) (required)</entry>
</row>
<row>
<entry>231&#8209;239</entry>
<entry>LATC</entry>
<entry>Real</entry>
<entry>Latitude (decimal degrees) (required)</entry>
</row>
<row>
<entry>240&#8209;248</entry>
<entry>LONC</entry>
<entry>Real</entry>
<entry>Longitude (decimal degrees) (required)</entry>
</row>
<row>
<entry>249&#8209;249</entry>
<entry>OFFSHORE</entry>
<entry>Char</entry>
<entry>Offshore Flag (fill in with "X" if source is offshore), (not used by SMOKE)</entry>
</row>
<row>
<entry>250&#8209;262</entry>
<entry>ANN1</entry>
<entry>Real</entry>
<entry>pol1 Annual Emissions (short tons/yr) (required)</entry>
</row>
<row>
<entry>263&#8209;275</entry>
<entry>AVD1</entry>
<entry>Real</entry>
<entry>pol1 Average-day Emissions (short tons/average day) (optional)</entry>
</row>
<row>
<entry>276&#8209;282</entry>
<entry>CE1</entry>
<entry>Real</entry>
<entry>pol1 Control Efficiency (give value of 0-100) (recommended; if left blank, SMOKE default is 0)</entry>
</row>
<row>
<entry>283&#8209;285</entry>
<entry>RE1</entry>
<entry>Real</entry>
<entry>pol1 Rule Effectiveness (give value of 0-100) (recommended; if left blank, SMOKE default is 100)</entry>
</row>
<row>
<entry>286&#8209;295</entry>
<entry>EMF1</entry>
<entry>Real</entry>
<entry>pol1 Emission Factors (SCC units) (not used by SMOKE)</entry>
</row>
<row>
<entry>296&#8209;298</entry>
<entry>CPRI1</entry>
<entry>Int</entry>
<entry>pol1 Primary Control Equipment Code (not used by SMOKE)</entry>
</row>
<row>
<entry>299&#8209;301</entry>
<entry>CSEC1</entry>
<entry>Int</entry>
<entry>pol1 Secondary Control Equipment Code (not used by SMOKE)</entry>
</row>
<row>
<entry>302&#8209;314</entry>
<entry>ANN2</entry>
<entry>Real</entry>
<entry>pol2 Annual Emissions (short tons/yr) (required)</entry>
</row>
<row>
<entry>315&#8209;327</entry>
<entry>AVD2</entry>
<entry>Real</entry>
<entry>pol2 Average-day Emissions (short tons/average day) (optional)</entry>
</row>
<row>
<entry>328&#8209;334</entry>
<entry>CE2</entry>
<entry>Real</entry>
<entry>pol2 Control Efficiency (0-100); see pol1 above</entry>
</row>
<row>
<entry>335&#8209;337</entry>
<entry>RE2</entry>
<entry>Real</entry>
<entry>pol2 Rule Effectiveness (0-100); see pol1 above</entry>
</row>
<row>
<entry>338&#8209;347</entry>
<entry>EMF2</entry>
<entry>Real</entry>
<entry>pol2 Emission Factors (SCC units) (not used by SMOKE)</entry>
</row>
<row>
<entry>348&#8209;350</entry>
<entry>CPRI2</entry>
<entry>Int</entry>
<entry>pol2 Primary Control Equipment Code (not used by SMOKE)</entry>
</row>
<row>
<entry>351&#8209;353</entry>
<entry>CSEC2</entry>
<entry>Int</entry>
<entry>pol2 Secondary Control Equipment Code (not used by SMOKE)</entry>
</row>
<row>
<entry>354&#8209;366</entry>
<entry>ANN3</entry>
<entry>Real</entry>
<entry>pol3 Annual Emissions (short tons/yr) (required)</entry>
</row>
<row>
<entry>367&#8209;379</entry>
<entry>AVD3</entry>
<entry>Real</entry>
<entry>pol3 Average-day Emissions (short tons/average day) (optional)</entry>
</row>
<row>
<entry>380&#8209;386</entry>
<entry>CE3</entry>
<entry>Real</entry>
<entry>pol3 Control Efficiency (0-100); see pol1 above</entry>
</row>
<row>
<entry>387&#8209;389</entry>
<entry>RE3</entry>
<entry>Real</entry>
<entry>pol3 Rule Effectiveness (0-100); see pol1 above</entry>
</row>
<row>
<entry>390&#8209;399</entry>
<entry>EMF3</entry>
<entry>Real</entry>
<entry>pol3 Emission Factors (SCC units) (not used by SMOKE)</entry>
</row>
<row>
<entry>400&#8209;402</entry>
<entry>CPRI3</entry>
<entry>Int</entry>
<entry>pol3 Primary Control Equipment Code (not used by SMOKE)</entry>
</row>
<row>
<entry>403&#8209;405</entry>
<entry>CSEC3</entry>
<entry>Int</entry>
<entry>pol3 Secondary Control Equipment Code (not used by SMOKE)</entry>
</row>
</tbody>
</tgroup>
</informaltable>

<para>(Repeat for <emphasis>n</emphasis> pollutants)</para>

</section>

<section>

<title>EMS-95 Format</title>

<para>For EMS-95 inputs, the <envar>PTINV</envar> file must list the different types of EMS-95 files in a specific order. A list of files with complete paths and names is called SMOKE list format. The order of the EMS-95 files is the same as would be achieved using from the UNIX command <command>ls</command> (i.e. alphabetical): device file, emissions file, facility file, process file, and stack file. These five files must be grouped together for the files to work together; for example, the North Carolina files must be together to correctly match source characteristics between the files. The <envar>PTINV</envar> list file can be created by using the following UNIX command, which assumes the EMS-95 files (and only these files) are all in the <filename class="directory"><envar>$PTDAT</envar></filename> directory.</para>

<para><userinput><command>ls</command> <filename><envar>$PTDAT</envar>/*.pt</filename> > <envar>$PTINV</envar></userinput></para>

<para>When using a list format, the <envar>PTINV</envar> file must also contain one or more INVYEAR packets. This packet acts as a switch that sets the inventory years for the files, each of which will get the year designated by the packet until another INVYEAR packet appears in the file. In this way, multiple years of inventory data can be combined to the same SMOKE inventory file.
Although it would be possible to create a single file of each type (i.e., a single device, emission, facility, process, or stack file with all records for all states), this approach is not recommended because <command>Smkinven</command> will be much slower than if the files are separated by state. This is because SMOKE must match the records among the various files, and it is much faster to do the matching with subsets of the data than with all of the data at once.</para>

<para>The following is an example of a correct <envar>PTINV</envar> file when used for EMS-95 inputs.</para>

<programlisting>#LIST EMS-95
INVYEAR 1995
/epserv/apps/smoke/inventory/smraq95/al/common/device.pt
/epserv/apps/smoke/inventory/smraq95/al/common/emission.pt
/epserv/apps/smoke/inventory/smraq95/al/common/facility.pt
/epserv/apps/smoke/inventory/smraq95/al/common/process.pt
/epserv/apps/smoke/inventory/smraq95/al/common/stack.pt
/epserv/apps/smoke/inventory/smraq95/ar/common/device.pt
/epserv/apps/smoke/inventory/smraq95/ar/common/emission.pt
/epserv/apps/smoke/inventory/smraq95/ar/common/facility.pt
/epserv/apps/smoke/inventory/smraq95/ar/common/process.pt
/epserv/apps/smoke/inventory/smraq95/ar/common/stack.pt</programlisting>

<section>

<title>Format for EMS-95 <filename>device.pt</filename> file(s)</title>

<para>The columns listed here are only those that are used by SMOKE. These files cannot have a #COUNTRY entry. The default country code is 0 for the United States.</para>

<informaltable>
<tgroup cols="3">
<thead>
<row>
<entry>Columns</entry>
<entry>Type</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1&#8209;2 </entry>
<entry>Int</entry>
<entry>FIPS state code (required)</entry>
</row>
<row>
<entry>3&#8209;5 </entry>
<entry>Int</entry>
<entry>FIPS county code (required)</entry>
</row>
<row>
<entry>6&#8209;20 </entry>
<entry>Char</entry>
<entry>Facility ID (required)</entry>
</row>
<row>
<entry>21&#8209;32 </entry>
<entry>Char</entry>
<entry>Stack ID (required)</entry>
</row>
<row>
<entry>33&#8209;44 </entry>
<entry>Char</entry>
<entry>Device ID (required)</entry>
</row>
<row>
<entry>45&#8209;48 </entry>
<entry>Char</entry>
<entry>SIC (required)</entry>
</row>
<row>
<entry>121&#8209;122</entry>
<entry>Int</entry>
<entry>Diurnal profile code (optional; you may use the <envar>PTREF</envar> file instead)</entry>
</row>
<row>
<entry>123&#8209;124</entry>
<entry>Int</entry>
<entry>Weekly profile code (optional; you may use the <envar>PTREF</envar> file instead)</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

<section>

<title>Format for EMS-95 <filename>emission.pt</filename> file(s)</title>

<para>The columns listed here are only those that are used by SMOKE.</para>

<informaltable>
<tgroup cols="3">
<thead>
<row>
<entry>Columns</entry>
<entry>Type</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1&#8209;2 </entry>
<entry>Int</entry>
<entry>FIPS state code (required)</entry>
</row>
<row>
<entry>3&#8209;5 </entry>
<entry>Int</entry>
<entry>FIPS county code (required)</entry>
</row>
<row>
<entry>6&#8209;20 </entry>
<entry>Char</entry>
<entry>Facility ID (required)</entry>
</row>
<row>
<entry>21&#8209;32 </entry>
<entry>Char</entry>
<entry>Stack ID (required)</entry>
</row>
<row>
<entry>33&#8209;44 </entry>
<entry>Char</entry>
<entry>Device ID (required)</entry>
</row>
<row>
<entry>45&#8209;56 </entry>
<entry>Char</entry>
<entry>Process ID (required)</entry>
</row>
<row>
<entry>57&#8209;61 </entry>
<entry>Char</entry>
<entry>Pollutant ID (e.g., NOX) (required)</entry>
</row>
<row>
<entry>88&#8209;100 </entry>
<entry>Real</entry>
<entry>Actual emissions of specified pollutant (short tons/average annual day) (required)</entry>
</row>
<row>
<entry>114&#8209;115 </entry>
<entry>Char</entry>
<entry><para>Temporal basis (required)</para>

<itemizedlist>
<listitem>AA = annual emissions</listitem>
<listitem>AD = daily emissions with weekday normalizer</listitem>
<listitem>DS = day-specific emissions</listitem>
</itemizedlist>

</entry>
</row>
<row>
<entry>126&#8209;132 </entry>
<entry>Real</entry>
<entry>Control equipment efficiency (percent, give value 0-100) (optional; SMOKE default is 0)</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

<section>

<title>Format for EMS-95 <filename>facility.pt</filename> file(s)</title>

<para>The columns listed here are only those that are used by SMOKE.</para>

<informaltable>
<tgroup cols="3">
<thead>
<row>
<entry>Columns</entry>
<entry>Type</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1&#8209;2 </entry>
<entry>Int</entry>
<entry>FIPS state code (required)</entry>
</row>
<row>
<entry>3&#8209;5 </entry>
<entry>Int</entry>
<entry>FIPS county code (required)</entry>
</row>
<row>
<entry>6&#8209;20 </entry>
<entry>Char</entry>
<entry>Facility ID (required)</entry>
</row>
<row>
<entry>21&#8209;24 </entry>
<entry>Int</entry>
<entry>SIC (required)</entry>
</row>
<row>
<entry>25&#8209;33 </entry>
<entry>Real</entry>
<entry>UTM easting (m) (required)</entry>
</row>
<row>
<entry>34&#8209;42 </entry>
<entry>Real</entry>
<entry>UTM northing (m) (required)</entry>
</row>
<row>
<entry>43&#8209;44 </entry>
<entry>Int</entry>
<entry>UTM zone (required)</entry>
</row>
<row>
<entry>45&#8209;84 </entry>
<entry>Char</entry>
<entry>Facility name (required)</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

<section>

<title>Format for EMS-95 <filename>process.pt</filename> file(s)</title>

<para>The columns listed here are only those that are used by SMOKE.</para>

<informaltable>
<tgroup cols="3">
<thead>
<row>
<entry>Columns</entry>
<entry>Type</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1&#8209;2 </entry>
<entry>Int</entry>
<entry>FIPS state code (required)</entry>
</row>
<row>
<entry>3&#8209;5 </entry>
<entry>Int</entry>
<entry>FIPS county code (required)</entry>
</row>
<row>
<entry>6&#8209;20 </entry>
<entry>Char</entry>
<entry>Facility ID (required)</entry>
</row>
<row>
<entry>21&#8209;32 </entry>
<entry>Char</entry>
<entry>Stack ID (required)</entry>
</row>
<row>
<entry>33&#8209;44 </entry>
<entry>Char</entry>
<entry>Device ID (required)</entry>
</row>
<row>
<entry>45&#8209;56 </entry>
<entry>Char</entry>
<entry>Process ID (required)</entry>
</row>
<row>
<entry>57&#8209;64 </entry>
<entry>Char</entry>
<entry>SCC (required)</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

<section>

<title>Format for EMS-95 <filename>stack.pt</filename> file(s)</title>

<para>The columns listed here are only those that are used by SMOKE.</para>

<informaltable>
<tgroup cols="3">
<thead>
<row>
<entry>Columns</entry>
<entry>Type</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1&#8209;2 </entry>
<entry>Int</entry>
<entry>FIPS state code (required)</entry>
</row>
<row>
<entry>3&#8209;5 </entry>
<entry>Int</entry>
<entry>FIPS county code (required)</entry>
</row>
<row>
<entry>6&#8209;20 </entry>
<entry>Char</entry>
<entry>Facility ID (required)</entry>
</row>
<row>
<entry>21&#8209;32 </entry>
<entry>Char</entry>
<entry>Stack ID (required)</entry>
</row>
<row>
<entry>33&#8209;40 </entry>
<entry>Real</entry>
<entry>Stack diameter (ft) (required)</entry>
</row>
<row>
<entry>41&#8209;47 </entry>
<entry>Real</entry>
<entry>Stack height above ground surface (ft) (required)</entry>
</row>
<row>
<entry>48&#8209;54 </entry>
<entry>Real</entry>
<entry>Stack exit gas temperature (K) (required)</entry>
</row>
<row>
<entry>55&#8209;61 </entry>
<entry>Real</entry>
<entry>Stack exit gas velocity (ft/s) (required)</entry>
</row>
<row>
<entry>62&#8209;71 </entry>
<entry>Real</entry>
<entry>Stack exit flow rate (ft<superscript>3</superscript>/min) (optional)</entry>
</row>
<row>
<entry>72&#8209;80 </entry>
<entry>Real</entry>
<entry>UTM easting of stack (m) (default is plant's value) (optional; SMOKE will value from facility file)</entry>
</row>
<row>
<entry>81&#8209;89 </entry>
<entry>Real</entry>
<entry>UTM northing of stack (m) (default is plant's value) (optional; SMOKE will use value from facility file)</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

</section>

<section>

<title>ORL Format (Toxics)</title>

<para>This inventory file consists of a set of list-formatted records, each line containing data for one pollutant. ORL format uses a similar header as the IDA format. The general format of the header records is:</para>

<para>command parm1 parm2 ... parm <emphasis>n</emphasis></para>

<para>The <emphasis>command</emphasis> field starts in the first position. The remainder of the header is free-format, blank delimited. The specific header formats are:</para>

<informaltable>
<tgroup cols="3">
<thead>
<row>
<entry>Command</entry>
<entry>Data</entry>
<entry>Description and values</entry>
</row>
</thead>

<tbody>
<row>
<entry>#TOXICS</entry>
<entry>N/A</entry>
<entry>N/A</entry>
</row>
<row>
<entry>#TYPE</entry>
<entry>file type</entry>
<entry>first nonblank character after the command to the last character of the record</entry>
</row>
<row>
<entry>#COUNTRY</entry>
<entry>country name</entry>
<entry>first nonblank character after the command to the last character of the record; valid country names are those in the <envar>COSTCY</envar> file</entry>
</row>
<row>
<entry>#YEAR</entry>
<entry>data year</entry>
<entry>number from 1900 to 2200</entry>
</row>
<row>
<entry>#DESC</entry>
<entry>description</entry>
<entry>a description of the data (SMOKE does not use)</entry>
</row>
</tbody>
</tgroup>
</informaltable>

<para>Sample header records are shown below:</para>

<programlisting>#TOXICS
#TYPE     Point Source Toxics Inventory
#COUNTRY  US
#YEAR     1999
#DESC     Alabama 1999</programlisting>

<para>The detail records are list-format. The fields in each record are shown in the table below.</para>

<informaltable>
<tgroup cols="4">
<thead>
<row>
<entry>Column</entry>
<entry>Name</entry>
<entry>Type</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>A</entry>
<entry>FIPS</entry>
<entry>Int</entry>
<entry>Five digit FIPS code for state and county (required)</entry>
</row>
<row>
<entry>B</entry>
<entry>PLANDID</entry>
<entry>Char</entry>
<entry>Plant Identification Code (15 characters maximum) (required; this is the same as the State Facility Identifier in the NIF)</entry>
</row>
<row>
<entry>C</entry>
<entry>POINTID</entry>
<entry>Char</entry>
<entry>Point Identification Code (15 characters maximum) (required; this is the same as the Emission Unit ID in the NIF)</entry>
</row>
<row>
<entry>D</entry>
<entry>STACKID</entry>
<entry>Char</entry>
<entry>Stack Identification Code (15 characters maximum) (recommended; this is the same as the Emissions Release Point ID in the NIF)</entry>
</row>
<row>
<entry>E</entry>
<entry>SEGMENT</entry>
<entry>Char</entry>
<entry>DOE Plant ID (15 characters maximum) (recommended; this is the same as the Process ID in the NIF)</entry>
</row>
<row>
<entry>F</entry>
<entry>PLANT</entry>
<entry>Char</entry>
<entry>Plant Name (40 characters maximum) (recommended)</entry>
</row>
<row>
<entry>G</entry>
<entry>SCC</entry>
<entry>Char</entry>
<entry>Source Classification Code (8 characters maximum) (required)</entry>
</row>
<row>
<entry>H</entry>
<entry>ERPTYPE</entry>
<entry>Char</entry>
<entry><para>Emissions release point type (2 characters maximum); indicates type of stack (not used by SMOKE)</para>

<itemizedlist>
<listitem>01 = fugitive</listitem>
<listitem>02 = vertical stack</listitem>
<listitem>03 = horizontal stack</listitem>
<listitem>04 = goose neck</listitem>
<listitem>05 = vertical with rain cap</listitem>
<listitem>06 = downward-facing vent</listitem>
</itemizedlist>

</entry>
</row>
<row>
<entry>I</entry>
<entry>SRCTYPE</entry>
<entry>Char</entry>
<entry><para>Source type (2 characters maximum); used by SMOKE in determining applicable MACT-based controls (required)</para>

<itemizedlist>
<listitem>01 = major</listitem>
<listitem>02 = Section 12 area source</listitem>
</itemizedlist>

</entry>
</row>
<row>
<entry>J</entry>
<entry>STKHGT</entry>
<entry>Real</entry>
<entry>Stack Height (ft) (required)</entry>
</row>
<row>
<entry>K</entry>
<entry>STKDIAM</entry>
<entry>Real</entry>
<entry>Stack Diameter (ft) (required)</entry>
</row>
<row>
<entry>L</entry>
<entry>STKTEMP</entry>
<entry>Real</entry>
<entry>Stack Gas Exit Temperature (&deg;F) (required)</entry>
</row>
<row>
<entry>M</entry>
<entry>STKFLOW</entry>
<entry>Real</entry>
<entry>Stack Gas Flow Rate (ft<superscript>3</superscript>/sec) (optional; automatically calculated by <command>Smkinven</command> from velocity and diameter if not given in file)</entry>
</row>
<row>
<entry>N</entry>
<entry>STKVEL</entry>
<entry>Real</entry>
<entry>Stack Gas Exit Velocity (ft/sec) (required)</entry>
</row>
<row>
<entry>O</entry>
<entry>SIC</entry>
<entry>Int</entry>
<entry>Standard Industrial Classification Code (recommended)</entry>
</row>
<row>
<entry>P</entry>
<entry>MACT</entry>
<entry>Char</entry>
<entry>Maximum Available Control Technology Code (6 characters maximum) (optional)</entry>
</row>
<row>
<entry>Q</entry>
<entry>NAICS</entry>
<entry>Char</entry>
<entry>North American Industrial Classification System Code (6 characters maximum) (optional)</entry>
</row>
<row>
<entry>R</entry>
<entry>CTYPE</entry>
<entry>Char</entry>
<entry><para>Coordinate system type (1 character maximum) (required)</para>

<itemizedlist>
<listitem>U = Universal Transverse Mercator</listitem>
<listitem>L = Latitude/longitude</listitem>
</itemizedlist>

</entry>
</row>
<row>
<entry>S</entry>
<entry>XLOC</entry>
<entry>Real</entry>
<entry><para>X location (required)</para>

<itemizedlist>
<listitem>If CTYPE = U, Easting value (meters)</listitem>
<listitem>If CTYPE = L, Latitude (decimal degrees)</listitem>
</itemizedlist>

</entry>
</row>
<row>
<entry>T</entry>
<entry>YLOC</entry>
<entry>Real</entry>
<entry><para>Y location (required)</para>

<itemizedlist>
<listitem>If CTYPE = U, Northing value (meters)</listitem>
<listitem>If CTYPE = L, Longitude (decimal degrees)</listitem>
</itemizedlist>

</entry>
</row>
<row>
<entry>U</entry>
<entry>UTMZ</entry>
<entry>Int</entry>
<entry>UTM zone (required if CTYPE = U)</entry>
</row>
<row>
<entry>V</entry>
<entry>CAS</entry>
<entry>Char</entry>
<entry>Pollutant CAS number or other code (10 characters maximum) (required; this is called the pollutant code in the NIF)</entry>
</row>
<row>
<entry>W</entry>
<entry>ANN_EMIS</entry>
<entry>Real</entry>
<entry>Annual Emissions (tons/year) (required)</entry>
</row>
<row>
<entry>X</entry>
<entry>AVD_EMIS</entry>
<entry>Real</entry>
<entry>Average-day Emissions (tons/average day) (optional)</entry>
</row>
<row>
<entry>Y</entry>
<entry>CEFF</entry>
<entry>Real</entry>
<entry>Control Efficiency percentage (give value of 0-100) (recommended, if left blank, SMOKE default is 0)</entry>
</row>
<row>
<entry>Z</entry>
<entry>REFF</entry>
<entry>Real</entry>
<entry>Rule Effectiveness percentage (give value of 0-100) (recommended, if left blank, SMOKE default is 100)</entry>
</row>
<row>
<entry>AA</entry>
<entry>CPRI</entry>
<entry>Int</entry>
<entry>Primary Control Equipment Code (not used by SMOKE)</entry>
</row>
<row>
<entry>BB</entry>
<entry>CSEC</entry>
<entry>Int</entry>
<entry>Secondary Control Equipment Code (not used by SMOKE)</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

</section>

<section>

<title><envar>VMTMIX</envar>: Mobile vehicle mix data</title>

<para>The <envar>VMTMIX</envar> file is used for EMS-95 inventory import to disaggregate the data totals by road type. This file can be in EMS-95 column-specific format, or in a list-directed format based on the EMS-95 column-specific format. The roadway type or road class codes used in either <envar>VMTMIX</envar> file format <emphasis>must</emphasis> match the codes that are used in the mobile VMT inventory file.</para>

<para>For both files, a header line is needed to indicate the number and order of vehicle types listed in the file. The standard EMS-95 structure is</para>

<programlisting>#VTYPES  LDGV  LDGT1  LDGT2  HDGV  LDDV  LDDT  HDDV  MC</programlisting>

<section>

<title>EMS-95 column-specific format</title>

<informaltable>
<tgroup cols="4">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Type" />
<colspec colname="Description" />

<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Type</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1</entry>
<entry>A</entry>
<entry>Char</entry>
<entry>#VTYPES header line (required) (see example above)</entry>
</row>
<row>
<entry>2+</entry>
<entry>1&#8209;2 </entry>
<entry>Int</entry>
<entry>State code (required)</entry>
</row>
<row>
<entry colname="Columns">3&#8209;5 </entry>
<entry>Int</entry>
<entry>County code (required)</entry>
</row>
<row>
<entry colname="Columns">6&#8209;6 </entry>
<entry>Int</entry>
<entry>Area type code (required)</entry>
</row>
<row>
<entry colname="Columns">7&#8209;10 </entry>
<entry>Int</entry>
<entry>Facility type code (required)</entry>
</row>
<row>
<entry colname="Columns">11&#8209;20</entry>
<entry>Char</entry>
<entry>Link ID (optional; zero if nonlink data)</entry>
</row>
<row>
<entry colname="Columns">21&#8209;25</entry>
<entry>Real</entry>
<entry>Fraction of total VMT from gas vehicles (thas and all other fractions below are required)</entry>
</row>
<row>
<entry colname="Columns">26&#8209;30</entry>
<entry>Real</entry>
<entry>Fraction of total VMT from light-duty gas trucks 1 </entry>
</row>
<row>
<entry colname="Columns">31&#8209;35</entry>
<entry>Real</entry>
<entry>Fraction of total VMT from light-duty gas trucks 2 </entry>
</row>
<row>
<entry colname="Columns">36&#8209;40</entry>
<entry>Real</entry>
<entry>Fraction of total VMT from heavy-duty gas vehicles </entry>
</row>
<row>
<entry colname="Columns">41&#8209;45</entry>
<entry>Real</entry>
<entry>Fraction of total VMT from light-duty diesel vehicles </entry>
</row>
<row>
<entry colname="Columns">46&#8209;50</entry>
<entry>Real</entry>
<entry>Fraction of total VMT from heavy-duty diesel trucks </entry>
</row>
<row>
<entry colname="Columns">51&#8209;55</entry>
<entry>Real</entry>
<entry>Fraction of total VMT from heavy-duty diesel vehicles </entry>
</row>
<row>
<entry colname="Columns">56&#8209;60</entry>
<entry>Real</entry>
<entry>Fraction of total VMT from motorcycles </entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

<section>

<title>EMS-95 list-formatted format</title>

<informaltable>
<tgroup cols="4">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Type" />
<colspec colname="Description" />

<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Type</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1</entry>
<entry>A</entry>
<entry>Char</entry>
<entry>#VTYPES header line (required) (see example above)</entry>
</row>
<row>
<entry>2+</entry>
<entry>A</entry>
<entry>Int</entry>
<entry>Country, state, and county code (required)</entry>
</row>
<row>
<entry colname="Columns">B</entry>
<entry>Int</entry>
<entry>Roadway type or road class code (required)</entry>
</row>
<row>
<entry colname="Columns">C</entry>
<entry>Char</entry>
<entry>Link ID (optional; zero if nonlink data)</entry>
</row>
<row>
<entry colname="Columns">D</entry>
<entry>Real</entry>
<entry>Fraction of total VMT from first vehicle type (this and all other fractions below are required)</entry>
</row>
<row>
<entry colname="Columns">E</entry>
<entry>Real</entry>
<entry>Fraction of total VMT from second vehicle type</entry>
</row>
<row>
<entry colname="Columns">F</entry>
<entry>Real</entry>
<entry>Fraction of total VMT from third vehicle type</entry>
</row>
<row>
<entry colname="Columns">G</entry>
<entry>Real</entry>
<entry>Fraction of total VMT from fourth vehicle type</entry>
</row>
<row>
<entry colname="Columns">H</entry>
<entry>Real</entry>
<entry>Fraction of total VMT from fifth vehicle type</entry>
</row>
<row>
<entry colname="Columns">I</entry>
<entry>Real</entry>
<entry>Fraction of total VMT from sixth vehicle type</entry>
</row>
<row>
<entry colname="Columns">J</entry>
<entry>Real</entry>
<entry>Fraction of total VMT from seventh vehicle type</entry>
</row>
<row>
<entry colname="Columns">K</entry>
<entry>Real</entry>
<entry>Fraction of total VMT from eighth vehicle type</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

</section>

</section>

<section>

<title>Temporal Allocation Files</title>

<section>

<title><envar>[A|M|P]TPRO</envar>: Temporal profiles file</title>

<para>The <envar>ATPRO</envar>, <envar>MTPRO</envar>, and <envar>PTPRO</envar> files are used by the <command>Temporal</command> program for area, mobile, and point sources, respectively. These files contain the monthly, weekly, and diurnal temporal profiles used to convert the annual emissions stored in the inventory to hourly emissions. The SMOKE Tool can create these files, if you are using the Models-3 system. The files can contain four types of records:</para>

<itemizedlist>
<listitem>
<para>Monthly temporal weighting factors (/MONTHLY/ packet)</para>
</listitem>
<listitem>
<para>Weekly temporal weighting factors (/WEEKLY/ packet)</para>
</listitem>
<listitem>
<para>Weekday diurnal temporal weighting factors (/DIURNAL WEEKDAY/ packet)</para>
</listitem>
<listitem>
<para>Weekend diurnal temporal weighting factors (/DIURNAL WEEKEND/ packet)</para>
</listitem>
</itemizedlist>

<para>The weekend diurnal temporal factors are optional. If the monthly factors are not used because all of the inventory emissions are supplied as "per day" emissions, at least one monthly profile is still needed to prevent an error message. The file format is column-specific based on the columns listed in the following table. All three source categories use the same file format, and they can share the same file.</para>

<informaltable>
<tgroup cols="3">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Description" />

<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>

<row>
<entry namest="Line" nameend="Description">/MONTHLY/ packet</entry>
</row>

<row>
<entry>1</entry>
<entry>1&#8209;20</entry>
<entry>Packet identifier = /MONTHLY/ </entry>
</row>
<row>
<entry>2+</entry>
<entry>1&#8209;5</entry>
<entry>Monthly temporal profile code (Integer)</entry>
</row>
<row>
<entry colname="Columns">7&#8209;9</entry>
<entry>Temporal weight for January (Integer)</entry>
</row>
<row>
<entry colname="Columns">11&#8209;13</entry>
<entry>Temporal weight for February (Integer)</entry>
</row>
<row>
<entry colname="Columns">...</entry>
<entry>...</entry>
</row>
<row>
<entry colname="Columns">51&#8209;53</entry>
<entry>Temporal weight for December (Integer)</entry>
</row>
<row>
<entry colname="Columns">54&#8209;58</entry>
<entry>Total of weights for entire year (Integer)</entry>
</row>
<row>
<entry>3</entry>
<entry>1&#8209;20</entry>
<entry>Packet terminator = /END/</entry>
</row>

<row>
<entry namest="Line" nameend="Description">/WEEKLY/ packet</entry>
</row>

<row>
<entry>1</entry>
<entry>1&#8209;20</entry>
<entry>Packet identifier = /WEEKLY/</entry>
</row>
<row>
<entry>2+</entry>
<entry>1&#8209;5</entry>
<entry>Weekly temporal profile code (Integer)</entry>
</row>
<row>
<entry colname="Columns">7&#8209;9</entry>
<entry>Temporal weight for Monday (Integer)</entry>
</row>
<row>
<entry colname="Columns">11&#8209;13</entry>
<entry>Temporal weight for Tuesday (Integer)</entry>
</row>
<row>
<entry colname="Columns">...</entry>
<entry>...</entry>
</row>
<row>
<entry colname="Columns">31&#8209;33</entry>
<entry>Temporal weight for Sunday (Integer)</entry>
</row>
<row>
<entry colname="Columns">34&#8209;38</entry>
<entry>Total of weights for entire week (Integer)</entry>
</row>
<row>
<entry>3</entry>
<entry>1&#8209;20</entry>
<entry>Packet terminator = /END/</entry>
</row>

<row>
<entry namest="Line" nameend="Description">/DIURNAL/ packets</entry>
</row>

<row>
<entry>1</entry>
<entry>1&#8209;20</entry>
<entry>Packet identifier = /DIURNAL WEEKDAY/ or /DIURNAL WEEKEND/</entry>
</row>
<row>
<entry>2+</entry>
<entry>1&#8209;5</entry>
<entry>Diurnal temporal profile code (Integer)</entry>
</row>
<row>
<entry colname="Columns">7&#8209;9</entry>
<entry>Temporal weight for hour beginning 0000 (Integer)</entry>
</row>
<row>
<entry colname="Columns">11&#8209;13</entry>
<entry>Temporal weight for hour beginning 0100 (Integer)</entry>
</row>
<row>
<entry colname="Columns">...</entry>
<entry>...</entry>
</row>
<row>
<entry colname="Columns">99&#8209;101</entry>
<entry>Temporal weight for hour beginning 2300 (Integer)</entry>
</row>
<row>
<entry colname="Columns">102&#8209;106</entry>
<entry>Total of weights for entire day (Integer)</entry>
</row>
<row>
<entry>3</entry>
<entry>1&#8209;20</entry>
<entry>Packet terminator = /END/</entry>
</row>
</tbody>
</tgroup>
</informaltable>

<example>
<title><envar>[A|M|P]TPRO</envar> file</title>

<programlisting>
/MONTHLY/
    1  83  83  83  83  83  83  83  83  83  83  83  83  996
/END/
/WEEKLY/
    1   1   1   1   1   1   0   0    5
    2   0   0   0   0   0   1   1    2
    3   1   1   1   1   1   0   0    5
/END/
/DIURNAL WEEKDAY/
    1   0   0   0   0   0   0   0   0   1   1   1   1   1   1   1   1   0   0   0   0   0   0   0   0    8
    2   0   0   0   0   0   0   0   0   1   1   1   1   1   1   1   1   0   0   0   0   0   0   0   0    8
   81 417 417 417 417 417 417 417 417 417 417 417 416 414 415 417 417 417 417 417 417 417 417 417 41510000
   82 388 351 315 299 299 321 348 402 441 456 457 461 457 461 461 460 464 460 456 456 455 453 450 42910000
/END/
</programlisting>
</example>

</section>

<section>

<title><envar>[A|M|P]TREF</envar>: Temporal cross-reference file</title>

<para>The <envar>ATREF</envar>, <envar>MTREF</envar>, and <envar>PTREF</envar> files contain the area, mobile, and point source cross-reference records for assigning the temporal profiles to the sources. If needed, the same file can be used for area, mobile, or point source categories, but more fields are used for mobile than for area, and more fields are used for point than for mobile. The SMOKE Tool can create these files, if you are using the Models-3 modeling system. The description of the <command>Temporal</command> program in <remark>Chapter 6</remark> provides a list of the matching hierarchies that SMOKE uses when applying the file to an inventory. <emphasis>If a field is blank, it must be set to -9.</emphasis></para>

<para>For point sources, users can fill in whatever fields they want for the source characteristics after plant ID. It is important to ensure, however, that one is consistent between the <envar>PTINV</envar> and the <envar>PTREF</envar> file. For example, if one uses the Process ID in place of the Stack ID field in the <envar>PTINV</envar> file, the same approach would need to be used in building the <envar>PTREF</envar> file. Remember that all of the field widths are limited to what is in the original <envar>PTINV</envar> input format (IDA or EMS-95). Also remember that these fields are character strings, and therefore leading zeros are not ignored (this has caused other users problems in the past).</para>

<para>The pollutant field allows users to assigns a different temporal profile for each pollutant associated with a given source. This is an optional approach; if users wish not to use pollutant as a characteristic in assigning temporal profiles, users can put a "-9" in the pollutant field. In that case, all pollutants for a given source will be assigned that temporal profile.</para>

<para>Note that the country/state/county code is defined as follows:</para>

<simplelist>
<member>000000 = applies to all counties, states, and counties</member>
<member>y00000 = applies to all states and counties in country y</member>
<member>ymm000 = applies to all counties in state mm and country y</member>
<member>ymmccc = applies to county ccc in state mm and country y</member>
</simplelist>

<section>

<title>Area-source temporal cross-reference file</title>

<informaltable>
<tgroup cols="3">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Description" />

<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1+</entry>
<entry>A</entry>
<entry>10-digit SCC, or 7-digit SCC with zeros filling the remaining digits (Character) (optional; put zero for entry that is not SCC-specific)</entry>
</row>
<row>
<entry colname="Columns">B</entry>
<entry>Monthly temporal profile code (Integer) (required)</entry>
</row>
<row>
<entry colname="Columns">C</entry>
<entry>Weekly temporal profile code (Integer) (required)</entry>
</row>
<row>
<entry colname="Columns">D</entry>
<entry>Weekday or weekend diurnal temporal profile code (Integer) (required)</entry>
</row>
<row>
<entry colname="Columns">E</entry>
<entry>Pollutant name (Character) (optional; put zero if not pollutant-dependent)</entry>
</row>
<row>
<entry colname="Columns">F</entry>
<entry><para>Country/state/county code (6-digit Integer in format YSSCCC) (optional):</para>

<itemizedlist>
<listitem>leave blank or put zero if not country/state-dependent</listitem>
<listitem>set to YSS000 for country/state-dependent</listitem>
<listitem>set to YSSCCC for county-dependent</listitem>
</itemizedlist>

</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

<section>

<title>Mobile-source temporal cross-reference file</title>

<informaltable>
<tgroup cols="3">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Description" />

<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1+</entry>
<entry>A</entry>
<entry>10-digit SCC (Character) (optional; put zero for entry that is not SCC-specific)</entry>
</row>
<row>
<entry colname="Columns">B</entry>
<entry>Monthly temporal profile code (Integer) (required)</entry>
</row>
<row>
<entry colname="Columns">C</entry>
<entry>Weekly temporal profile code (Integer) (required)</entry>
</row>
<row>
<entry colname="Columns">D</entry>
<entry>Weekday or weekend diurnal temporal profile code (Integer) (required)</entry>
</row>
<row>
<entry colname="Columns">E</entry>
<entry>Pollutant name (Character) (optional; put zero if not pollutant-dependent)</entry>
</row>
<row>
<entry colname="Columns">F</entry>
<entry><para>Country/state/county code (6-digit Integer in format YSSCCC) (optional):</para>

<itemizedlist>
<listitem>leave blank or put zero if not country/state-dependent</listitem>
<listitem>set to YSS000 for country/state-dependent</listitem>
<listitem>set to YSSCCC for county-dependent</listitem>
</itemizedlist>

</entry>
</row>
<row>
<entry colname="Columns">G</entry>
<entry>Link ID (Character) (optional; leave blank or put zero for entry that is not link-specific)</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

<section>

<title>Point-source temporal cross-reference file</title>

<para>Note: for EMS-95 inventories, Characteristic 1 is the stack ID, Characteristic 2 is the device ID, and Characteristic 3 is the process ID.</para>

<informaltable>
<tgroup cols="3">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Description" />

<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1</entry>
<entry>A</entry>
<entry>/POINT DEFN/</entry>
</row>
<row>
<entry colname="Columns">B</entry>
<entry>Number of point source characteristics in addition to plant ID in point source definition (for IDA, this will always be 4)</entry>
</row>
<row>
<entry colname="Columns">C</entry>
<entry><para>Number of point source characteristics in addition to plant ID (if SCC is a part of the source definition), zero otherwise.</para>

<itemizedlist>
<listitem>IDA inventories: 4</listitem>
<listitem>EMS-95 inventories: 0</listitem>
</itemizedlist>

</entry>
</row>
<row>
<entry>2+</entry>
<entry>A</entry>
<entry>10-digit SCC, or 5-digit SCC with zeros filling the remaining digits (Character) (optional; put zero for entry that is not SCC-specific)</entry>
</row>
<row>
<entry colname="Columns">B</entry>
<entry>Monthly temporal profile code (Integer) (required)</entry>
</row>
<row>
<entry colname="Columns">C</entry>
<entry>Weekly temporal profile code (Integer) (required)</entry>
</row>
<row>
<entry colname="Columns">D</entry>
<entry>Weekday or weekend diurnal temporal profile code (Integer) (required)</entry>
</row>
<row>
<entry colname="Columns">E</entry>
<entry>Pollutant name (Character) (optional; put zero if not pollutant-dependent)</entry>
</row>
<row>
<entry colname="Columns">F</entry>
<entry><para>Country/state/county code (6-digit Integer in format YSSCCC) (optional):</para>

<itemizedlist>
<listitem>leave blank or put zero if not country/state-dependent</listitem>
<listitem>set to YSS000 for country/state-dependent</listitem>
<listitem>set to YSSCCC for county-dependent</listitem>
</itemizedlist>

</entry>
</row>
<row>
<entry colname="Columns">G</entry>
<entry>Plant ID (Character) (optional; leave blank for not plant-specific)</entry>
</row>
<row>
<entry colname="Columns">H</entry>
<entry>Characteristic 1 (for IDA, this is Point ID or -9) (Character) (optional)</entry>
</row>
<row>
<entry colname="Columns">I</entry>
<entry>Characteristic 2 (for IDA, this is Stack ID or -9) (Character) (optional)</entry>
</row>
<row>
<entry colname="Columns">J</entry>
<entry>Characteristic 3 (for IDA, this is Segment ID or -9) (Character) (optional)</entry>
</row>
<row>
<entry colname="Columns">K</entry>
<entry>Characteristic 4 (blank for IDA because SCC already given in column A of list line) (Character) (optional)</entry>
</row>
<row>
<entry colname="Columns">L</entry>
<entry>Characteristic 5 (blank for IDA) (Character) (optional)</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

<section>

<title><envar>HOLIDAYS</envar>: Holidays date list</title>

<para>SMOKE can process holidays as specific days of the week in order to better model emissions. The holidays file is used to indicate which days should receive special treatment and how the days should be treated.</para>

<informaltable>
<tgroup cols="3">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Description" />

<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1+</entry>
<entry>A</entry>
<entry>Six-digit FIPS code, only 000000 is currently supported (required)</entry>
</row>
<row>
<entry colname="Columns">B</entry>
<entry>Month of holiday (1 - 12) (required)</entry>
</row>
<row>
<entry colname="Columns">C</entry>
<entry>Day of holiday (1 - 31) (required)</entry>
</row>
<row>
<entry colname="Columns">D</entry>
<entry>Year of holiday (4 digits) (required)</entry>
</row>
<row>
<entry colname="Columns">E</entry>
<entry>Day of the week to treat holiday as, valid values are Monday, Tuesday, Wednesday, Thursday, Friday, Saturday, and Sunday (required)</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

</section>

</section>

<section>

<title>Spatial Allocation Files</title>

<para>Preparation of the spatial allocation inputs to SMOKE is one of the major stumbling blocks for most users at this time. All spatial allocation (a.k.a. "gridding") inputs need to be consistent. Each file has a header to indicate the grid projection, location, dimensions, and resolution; SMOKE uses these headers to ensure consistency across all inputs. SMOKE also requires that any meteorology data inputs be consistent with these gridded data. Most programs in SMOKE v2.0 are capable of processing a modeling grid that is a subgrid of the input data (i.e. spatial surrogates, meteorology data).</para>

<para>SMOKE does not require that you have a graphical information system (GIS) to be able to install the software. However, some processing with a GIS is required to create the <envar>AGPRO</envar>, <envar>MGPRO</envar>, and <envar>BGPRO</envar> or <envar>BGUSE</envar> files. Users currently have the following options to prepare these files:</para>

<itemizedlist>
<listitem>
<para>Use the national 36-km Lambert surrogates provided with SMOKE (appropriate only for 36-km modeling). Users will have to manually copy and edit the 36-km file to create a file for a smaller grid.</para>
</listitem>
<listitem>
<para>Use the MIMS Spatial Surrogate Tool to create surrogates for any desired modeling grid.</para>
</listitem>
<listitem>
<para>Hire a contractor to prepare the gridding surrogates and/or gridded land use data, or prepare the data yourself using a GIS.</para>
</listitem>
</itemizedlist>

<section>

<title><envar>AGPRO</envar> and <envar>MGPRO</envar>: Area and Mobile Spatial Surrogates Files</title>

<para>The spatial surrogates files contain the spatial allocation factors for all area sources and non-link mobile sources. One file may be used for both area and mobile sources, although the SMOKE programs use the two logical file names to access it.</para>

<informaltable>
<tgroup cols="3">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Description" />

<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1</entry>
<entry>A</entry>
<entry>#GRID</entry>
</row>
<row>
<entry colname="Columns">B</entry>
<entry>Grid name</entry>
</row>
<row>
<entry colname="Columns">C</entry>
<entry>X origin in units of the projection</entry>
</row>
<row>
<entry colname="Columns">D</entry>
<entry>Y origin in units of the projection</entry>
</row>
<row>
<entry colname="Columns">E</entry>
<entry>X direction cell length in units of the projection</entry>
</row>
<row>
<entry colname="Columns">F</entry>
<entry>Y direction cell length in units of the projection</entry>
</row>
<row>
<entry colname="Columns">G</entry>
<entry>Number of columns</entry>
</row>
<row>
<entry colname="Columns">H</entry>
<entry>Number of rows</entry>
</row>
<row>
<entry colname="Columns">I</entry>
<entry>Number of boundary cells</entry>
</row>
<row>
<entry colname="Columns">J</entry>
<entry><para>Projection types:</para>

<itemizedlist>
<listitem>Latitude-Longitude: "LAT-LON" or "LATGRD3"</listitem>
<listitem>Lambert Conformal: "LAMBERT" or "LAMGRD3"</listitem>
<listitem>UTM: "UTM" or "UTMGRD3"</listitem>
</itemizedlist>

</entry>
</row>
<row>
<entry colname="Columns">K</entry>
<entry>Projection units</entry>
</row>
<row>
<entry colname="Columns">L</entry>
<entry>Projection alpha value</entry>
</row>
<row>
<entry colname="Columns">M</entry>
<entry>Projection beta value</entry>
</row>
<row>
<entry colname="Columns">N</entry>
<entry>Projection gamma value</entry>
</row>
<row>
<entry colname="Columns">O</entry>
<entry>X-direction projection center in units of the projection</entry>
</row>
<row>
<entry colname="Columns">P</entry>
<entry>Y-direction projection center in units of the projection</entry>
</row>
<row>
<entry>2+</entry>
<entry>A</entry>
<entry>Spatial surrogates code (area) or county feature/roadway type (mobile) (Integer) (required)</entry>
</row>
<row>
<entry colname="Columns">B</entry>
<entry>Country/state/county code (6-digit Integer YSSCCC) (required)</entry>
</row>
<row>
<entry colname="Columns">C</entry>
<entry>Grid column number (Integer) (required)</entry>
</row>
<row>
<entry colname="Columns">D</entry>
<entry>Grid row number (Integer) (required)</entry>
</row>
<row>
<entry colname="Columns">E</entry>
<entry>Spatial surrogate ratio (area) or fraction of county feature in cell (mobile) (Real) (required)</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

<section>

<title><envar>AGREF</envar> and <envar>MGREF</envar>: Gridding cross-reference files for area and mobile sources</title>

<para>The gridding cross-reference files are used to match the emissions sources with the spatial surrogates in the surrogates file. The way that of the gridding cross-reference files are applied in SMOKE ensures that the most-specific matches override the less-specific ones. A description of how the gridding cross-reference is applied to the inventory is provided with the description of the <command>Grdmat</command> program.</para> 

<informaltable>
<tgroup cols="3">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Description" />

<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1+</entry>
<entry>A</entry>
<entry><para>Country/state/county code (6-digit Integer YSSCCC) (optional):</para>

<itemizedlist>
<listitem>leave blank or put zero if not country/state-dependent</listitem>
<listitem>set to YSS000 for country/state-dependent</listitem>
<listitem>set to YSSCCC for county-dependent</listitem>
</itemizedlist>

</entry>
</row>
<row>
<entry colname="Columns">B</entry>
<entry>10-digit SCC (Character) (optional, set to zero if not SCC-dependent)</entry>
</row>
<row>
<entry colname="Columns">C</entry>
<entry>Spatial surrogate code (Integer) (required)</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

<section>

<title><envar>BELD3_A</envar>, <envar>BELD3_B</envar>, <envar>BELD3_TOT</envar>: BELD3 land use data files</title>

<para><envar>BELD3_A</envar>, <envar>BELD3_B</envar>, and <envar>BELD3_TOT</envar> files are I/O API netCDF files that contain gridded BELD3 data. The BELD3 data comprise 230 land use types. Since the I/O API limit on the number of variables in one netCDF file is 120, the gridded BELD3 data is broken up into two files (<envar>BELD_A</envar> and <envar>BELD_B</envar>). The <envar>BELD_TOT</envar> file contains additional information on the BELD3 data for the same grid as the <envar>BELD3_A</envar> and <envar>BELD3_B</envar> files. For a list of the BELD3 land use types, look in the <envar>B3XRF</envar> or <envar>B3FAC</envar> file. The <envar>BELD3_TOT</envar> file contains the following variables and descriptions:</para>

<itemizedlist>
<listitem>
<para>FIPCODE: Dominant FIPS code for each grid cell</para>
</listitem>
<listitem>
<para>URW_FLAG: Urban-rural-water flag</para>
</listitem>
<listitem>
<para>USGS_TYPE: Dominant USGS type for each grid cell</para>
</listitem>
<listitem>
<para>USGS_TOTAL: Total USGS area in each grid cell</para>
</listitem>
<listitem>
<para>FOREST: Total forest (FIA) area in each grid cell</para>
</listitem>
<listitem>
<para>AGRICULTURE: Total agricultural area in each grid cell</para>
</listitem>
<listitem>
<para>TOTAL_AREA: Total area in each grid cell</para>
</listitem>
<listitem>
<para>LAND: Total land area in each grid cell</para>
</listitem>
</itemizedlist>

</section>

<section>

<title><envar>BGPRO</envar>: Biogenic spatial surrogate file</title>

<para>The <envar>BGPRO</envar> file must be provided to SMOKE when using county land use data, in order to provide a means of converting county land use to gridded land use. The format for the <envar>BGPRO</envar> file is the same as for the <envar>AGPRO</envar> and <envar>MGPRO</envar> files. Typically, the same gridded surrogates file would be used, and the <command>Rawbio</command> options would be set to assign the county area, agriculture, or forest surrogates to the various biogenic land use groups.</para>

</section>

<section>

<title><envar>G_GRIDPATH</envar>: Grids and grid projection information</title>

<para>The <envar>G_GRIDPATH</envar> file is written by the Models-3 framework when you are using SMOKE through Models-3. Otherwise, users must manually prepare this file with a text editor.</para>

<informaltable>
<tgroup cols="3">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Description" />

<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1</entry>
<entry>A</entry>
<entry>Keyword for variable name (these are described below this table) (Character)</entry>
</row>
<row>
<entry colname="Columns">B</entry>
<entry>Number of dimensions (Integer)</entry>
</row>
<row>
<entry colname="Columns">C</entry>
<entry>Number of elements in the first dimension (Integer) (optional)</entry>
</row>
<row>
<entry colname="Columns">D</entry>
<entry>Number of elements in the second dimension (Integer) (optional)</entry>
</row>
<row>
<entry colname="Columns">E</entry>
<entry>Number of elements in the third dimension (Integer) (optional)</entry>
</row>
<row>
<entry>2</entry>
<entry>A+</entry>
<entry>Value(s) of record (the number of values depends on entries in columns C, D, and E).</entry>
</row>
</tbody>
</tgroup>
</informaltable>

<para>NOTE: The number of dimensions can be set to 0 for a single value, which allows the value to appear on the same line as the keyword.</para>

<para>The keywords are:</para>

<itemizedlist>
<listitem>
<para>GDNAME_GD: Grid name (16 character maximum)</para>
</listitem>
<listitem>
<para>GDDESC_GD: Grid description (80 character maximum)</para>
</listitem>
<listitem>
<para>GDTYP_GD: Coordinate system type</para>

<para>Valid entries include the following:</para>

<itemizedlist>
<listitem>
<para>Latitude-longitude grids: "LAT-LON" or "LATGRD3"</para>
</listitem>
<listitem>
<para>Lambert grids: "LAMBERT" or "LATGRD3"</para>
</listitem>
<listitem>
<para>UTM grids: "UTM" or "UTMGRD3"</para>
</listitem>
</itemizedlist>

<para>Users are responsible for ensuring that other settings in the file are consistent with the grid selected.</para>
</listitem>
<listitem>
<para>GDUNT_GD: Units of coordinate system</para>
</listitem>
<listitem>
<para>P_ALP_GD: Alpha projection factor</para>
</listitem>
<listitem>
<para>P_BET_GD: Beta projection factor</para>
</listitem>
<listitem>
<para>P_GAM_GD: Gamma projection factor</para>
</listitem>
<listitem>
<para>XCENT_GD: X center of projection</para>
</listitem>
<listitem>
<para>YCENT_GD: Y center of projection</para>
</listitem>
<listitem>
<para>XORIG_GD: Column offset (x-origin) in projection units</para>
</listitem>
<listitem>
<para>YORIG_GD: Row offset (y-origin) in projection units</para>
</listitem>
<listitem>
<para>XCELL_GD: X direction cell thickness in projection units</para>
</listitem>
<listitem>
<para>YCELL_GD: Y direction cell thickness in projection units</para>
</listitem>
<listitem>
<para>NCOLS: Number of grid columns (x-cells)</para>
</listitem>
<listitem>
<para>NROWS: Number of grid rows (y-cells)</para>
</listitem>
<listitem>
<para>NTHIK: Number of boundary cells (not used in SMOKE, but needs to be consistent among all of your files)</para>
</listitem>
<listitem>
<para>NLAYS: Number of vertical layers (not used in SMOKE; see documentation on the <envar>SMK_EMLAYS</envar> environment variable <remark>in Chapter 8</remark>)</para>
</listitem>
<listitem>
<para>VG_TYP_GD: Type of vertical structure. (not used in SMOKE). Possible values:</para>

<itemizedlist>
<listitem>
<para>VGSGPH3: hydrostatic sigma-P</para>
</listitem>
<listitem>
<para>VGSGPN3: non-hydrostatic sigma-P</para>
</listitem>
<listitem>
<para>VGSIGZ3: sigma-Z</para>
</listitem>
<listitem>
<para>VGPRES3: pressure (mb)</para>
</listitem>
<listitem>
<para>VGZVAL3: Z (m) (above sea level)</para>
</listitem>
<listitem>
<para>VGHVAL3: H (m) (above ground)</para>
</listitem>
</itemizedlist>

</listitem>
<listitem>
<para>VGTPUN_GD: Units of vertical structure (not used in SMOKE)</para>
</listitem>
<listitem>
<para>VGTOP_GD: Value of top of domain in units of vertical structure (not used in SMOKE)</para>
</listitem>
<listitem>
<para>VGLVS_GD: Vertical layer structure values in units of vertical structure (not used in SMOKE)</para>
</listitem>
</itemizedlist>

</section>

<section>

<title><envar>GRIDDESC</envar>: Grids and projection information</title>

<para>Like the <envar>G_GRIDPATH</envar> file, the <envar>GRIDDESC</envar> file is used to provide grid and projection information to SMOKE. However, the <envar>GRIDDESC</envar> file is more flexible in that it can contain data for many different projections and many different grids. The format of the <envar>GRIDDESC</envar> file is available in the I/O API documentation at <ulink url="http://www.baronams.com/products/ioapi/GRIDDESC.html" />.</para>

</section>

</section>

<section>

<title>Chemical speciation</title>

<section>

<title><envar>GSCNV</envar>: Pollutant-to-pollutant conversion file (optional)</title>

<para>The pollutant-to-pollutant conversion factors files are required when there is a mismatch between the pollutant in the inventory and the pollutant for which the speciation profiles have been developed. One example is when the inventory has VOC (ROG), but the speciation profiles were developed for TOG. SMOKE permits such a factor to be applied to any pollutant. The same format is used by all source categories. The available combinations and hierarchies for applying the factors are the same as for the speciation cross-reference, with the exception of the plant ID and other more specific source characteristics for point sources. The <envar>GSCNV</envar> file is not needed if there is no mismatch between the inventory and the pollutants in the speciation profiles file. The <command>Spcmat</command> program will input this file wheh the <envar>POLLUTANT_CONVERSION</envar> environment variable is set to Y.</para>

<para>If emission types are being used, as with mobile source processing using the <command>Emisfac</command> program, the emission type must be listed instead of the pollutant. For example, if exhaust running VOC were being converted to exhaust TOG, then EXR__VOC  and EXR__TOG would need to appear in their respective columns on the header line (line 1 in the format below). It would not be correct to put only VOC and TOG. All emission processes must be listed, or the conversion factor that will be applied is 1. This approach permits conversion factors that are specific to each emission process (e.g., different conversions for EXR and EXS).</para>

<informaltable>
<tgroup cols="3">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Description" />

<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1</entry>
<entry>1&#8209;16</entry>
<entry>Name of pollutant or emission type converting from (Character) (required)</entry>
</row>
<row>
<entry colname="Columns">18&#8209;33</entry>
<entry>Name of pollutant or emission type converting to (Character) (required)</entry>
</row>
<row>
<entry>2+</entry>
<entry>1&#8209;6</entry>
<entry>Country/State/County code (Integer) (optional, put zero if entry is not country/state/county-specific)</entry>
</row>
<row>
<entry colname="Columns">8&#8209;17</entry>
<entry>

<itemizedlist>
<listitem>Area: 10-digit SCC (full SCC is needed) (Character)</listitem>
<listitem>Mobile: 10-digit SCC (full SCC is needed) (Character)</listitem>
<listitem>Point: 8-digit SCC (full SCC is needed) (Character)</listitem>
<listitem>Zero if entry is not SCC-specific</listitem>
</itemizedlist>

</entry>
</row>
<row>
<entry colname="Columns">19&#8209;23</entry>
<entry>Volatile conversion factor (Real) (required)</entry>
</row>
<row>
<entry namest="Line" nameend="Description">Repeat lines 1 and 2+ as needed for multiple pollutants and/or emission types</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

<section>

<title><envar>GSPRO</envar>: Speciation profile file</title>

<para>The speciation profile file, <envar>GSPRO</envar>, contains the factors that are used to separate aggregated inventory pollutant emissions totals into emissions of model species required by the AQM. In traditional ozone air quality modeling, this file contained split factors only for VOC. In SMOKE, all inventory pollutants need to be represented in this file, even if it is only to indicate that a pollutant is not split into any model species (e.g., CO emissions would have a "split factor" of 1.0).</para>

<informaltable>
<tgroup cols="3">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Description" />

<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Description (all fields are required)</entry>
</row>
</thead>

<tbody>
<row>
<entry>1+</entry>
<entry>A</entry>
<entry>Speciation profile number (Character)</entry>
</row>
<row>
<entry colname="Columns">B</entry>
<entry>Pollutant ID (name) (Character)</entry>
</row>
<row>
<entry colname="Columns">C</entry>
<entry>Species ID (name) (Character)</entry>
</row>
<row>
<entry colname="Columns">D</entry>
<entry>Split factor (Real)</entry>
</row>
<row>
<entry colname="Columns">E</entry>
<entry>Divisor (Real)</entry>
</row>
<row>
<entry colname="Columns">F</entry>
<entry>Mass Fraction (Real)</entry>
</row>
</tbody>
</tgroup>
</informaltable>

<para>The columns are used by SMOKE as follows:</para>

<itemizedlist>
<listitem>
<para>The speciation profile number is matched with the number in the <envar>GSREF</envar> file. This "number" is treated as a character string, so leading zeros must be the same in both the <envar>GSPRO</envar> and <envar>GSREF</envar> files. For BEIS3 modeling, the user must use profile "BV309" in order to properly speciate for CB-IV modeling.  There are also BEIS3 speciation profiles for the RADM2 and SAPRC99 chemical mechanisms in the <filename class="directory"><envar>$GE_DAT</envar></filename> directory.</para>
</listitem>
<listitem>
<para>The pollutant ID must match the pollutant names in the SMOKE inventory file (<envar>AREA</envar>, <envar>MOBL</envar>, or <envar>PNTS</envar>). These names are set by the #POLID or #DATA headers in the <command>Smkinven</command> input files.</para>
</listitem>
<listitem>
<para>The species IDs are the names of the model species needed by the AQM for which SMOKE is being used. These depend on the requirements of that model. The default SMOKE inputs will not be correct for all AQMs.</para>
</listitem>
<listitem>
<para>The split factor is the numerator in the factor computed for the mole-based speciation matrix.</para>
</listitem>
<listitem>
<para>The divisor is the denominator in the factor computed for the mole-based speciation matrix.</para>
</listitem>
<listitem>
<para>The mass fraction is the value put in the mass-based speciation matrix. The ratio of the mass fraction and the split factor is the average molecular weight for the species and profile, if the divisor is 1.</para>
</listitem>
</itemizedlist>

</section>

<section>

<title><envar>GSREF</envar>: Speciation cross-reference file (mapping table)</title>

<para>The speciation cross-reference file is used to match the emission sources with the speciation profiles in <envar>GSPRO</envar>.</para>

<para>The <envar>GSREF</envar> file uses a header to define the point-source unique characteristics. The same file can be used for all source categories; the SMOKE programs use only the applicable entries in the file. The way that the file is applied in SMOKE ensures that the most-specific matches override the less-specific ones. A description of how the speciation cross-reference is applied to the inventory is provided with the description of the <command>Spcmat</command> program.</para>

<section>

<title>Area- and mobile-source speciation cross-reference file entries</title>

<para>When emission processes are used (as with mobile source processing using the <command>Emisfac</command> program), column C must contain the emission types instead of the pollutants. For example, if the <envar>MEPROC</envar> file contained processes EXR (exhaust running), EVR (evaporative running), and RFL (refueling), then in order to use pollutant-specific entries in this file for mobile sources, records would need to be added to the file that use the emission types EXR__TOG, EVR__TOG, and RFL__TOG in column C. Note that the separator within these process-pollutant combinations must be a double underscore.</para>

<informaltable>
<tgroup cols="3">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Description" />

<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1+</entry>
<entry>A</entry>
<entry>

<itemizedlist>
<listitem>Area: 10-digit SCC, or 7-digit SCC with zeros filling the remaining digits (Character)</listitem>
<listitem>Mobile: 10-character SCC code (Character)</listitem>
<listitem>Set to zero if cross-reference entry is not SCC-specific</listitem>
</itemizedlist>

</entry>
</row>
<row>
<entry colname="Columns">B</entry>
<entry>Speciation profile code (Character) (required; must match codes in the <envar>GSPRO</envar> file)</entry>
</row>
<row>
<entry colname="Columns">C</entry>
<entry>Pollutant name or emission type (Character) (required; must match pollutants for profile code in <envar>GSPRO</envar> file; use zero for all pollutants)</entry>
</row>
<row>
<entry colname="Columns">D</entry>
<entry><para>Country/state/county code (6-digit Integer in format YSSCCC) (optional):</para>

<itemizedlist>
<listitem>put zero if not country/state-dependent</listitem>
<listitem>set to YSS000 for country/state-dependent</listitem>
<listitem>set to YSSCCC for county-dependent</listitem>
</itemizedlist>

</entry>
</row>
<row>
<entry colname="Columns">E</entry>
<entry>Maximum Achievable Technology Code (6-character String) (optional; use 0 if not needed)</entry>
</row>
<row>
<entry colname="Columns">F</entry>
<entry>Standard Industrial Code (4-character String) (optional; use 0 if not needed)</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

<section>

<title>Point-source speciation cross-reference file entries</title>

<para>Note: For EMS-95 inventories, Characteristic 1 is the stack ID, Characteristic 2 is the device ID, and Characteristic 3 is the process ID.</para>

<informaltable>
<tgroup cols="3">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Description" />

<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1</entry>
<entry>A</entry>
<entry>/POINT DEFN/</entry>
</row>
<row>
<entry colname="Columns">B</entry>
<entry>Number of point source characteristics in addition to plant ID in point source definition (for IDA, this will always be 4)</entry>
</row>
<row>
<entry colname="Columns">C</entry>
<entry><para>Number of point source characteristic in addition to plant ID (if SCC is a part of the source definition); zero otherwise.</para>

<itemizedlist>
<listitem>IDA inventories: 4</listitem>
<listitem>EMS-95 inventories: 0</listitem>
</itemizedlist>

</entry>
</row>
<row>
<entry>2+</entry>
<entry>A</entry>
<entry>8- or 10-digit SCC (Character) (optional; set to zero if cross-reference entry is not SCC-specific)</entry>
</row>
<row>
<entry colname="Columns">B</entry>
<entry>Speciation profile code (Character) (required; must match codes in the <envar>GSPRO</envar> file)</entry>
</row>
<row>
<entry colname="Columns">C</entry>
<entry>Pollutant name or emission type (Character) (required; must match pollutants for profile code in <envar>GSPRO</envar> file; use zero for all pollutants)</entry>
</row>
<row>
<entry colname="Columns">D</entry>
<entry><para>Country/state/county code (6-digit Integer in format YSSCCC) (optional):</para>

<itemizedlist>
<listitem>leave blank or put zero if not country/state-dependent</listitem>
<listitem>set to YSS000 for country/state-dependent</listitem>
<listitem>set to YSSCCC for county-dependent</listitem>
</itemizedlist>

</entry>
</row>
<row>
<entry colname="Columns">E</entry>
<entry>Maximum Achievable Technology Code (6-character String) (optional; use 0 if not needed)</entry>
</row>
<row>
<entry colname="Columns">F</entry>
<entry>Standard Industrial Code (4-character String) (optional; use 0 if not needed)</entry>
</row>
<row>
<entry colname="Columns">G</entry>
<entry>Plant ID for point sources (Character) (optional; leave blank if entry is not plant-specific)</entry>
</row>
<row>
<entry colname="Columns">H</entry>
<entry>Characteristic 1 (for IDA, this is Point ID or -9) (Character) (optional)</entry>
</row>
<row>
<entry colname="Columns">I</entry>
<entry>Characteristic 2 (for IDA, this is Stack ID or -9) (Character) (optional)</entry>
</row>
<row>
<entry colname="Columns">J</entry>
<entry>Characteristic 3 (for IDA, this is Segment ID or -9) (Character) (optional)</entry>
</row>
<row>
<entry colname="Columns">K</entry>
<entry>Characteristic 4 (for IDA, this is 10-digit SCC, or 5-digit with zeroes) (Character) (optional)</entry>
</row>
<row>
<entry colname="Columns">L</entry>
<entry>Characteristic 5 (blank for IDA) (Character) (optional)</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

</section>

</section>

<section>

<title>Controls and Growth Files</title>

<section>

<title><envar>GCNTL</envar>: Files for controls and/or past- and future-year growth</title>

<para>SMOKE uses growth and control packets to get the information needed for growth and control of emissions. A packet is a group of inputs used to apply specific types of controls. A single control file containing a series of packets can be shared by area, mobile, and point sources and the packets that do not apply to a given source category will be ignored. The following packets are recognized by the SMOKE control programs:</para>

<itemizedlist>
<listitem>
<para>/ALLOWABLE/ contains county-specific, SIC-specific, SCC-specific controls, caps, and replacement emissions. Contributes to the multiplicative control matrix.</para>
</listitem>
<listitem>
<para>/CONTROL/ contains settings for control efficiency, rule effectiveness, and rule penetration. Contributes to the multiplicative control matrix. Cannot appear in the same input file as an /EMS_CONTROL/ packet.</para>
</listitem>
<listitem>
<para>/CTG/ contains settings for CTG, MACT, and RACT controls. Contributes to the multiplicative control matrix.</para>
</listitem>
<listitem>
<para>/EMS_CONTROL/ contains settings for control efficiency, rule effectiveness, and rule penetration for both the base year and a future year. Also contains a point source conversion factor and a control aggregated factor. Contributes to the multiplicative control matrix. Cannot appear in the same input file as a /CONTROL/ packet. This packet is for point sources only.</para>
</listitem>
<listitem>
<para>/MACT/ contains settings to support the primary MACT controls needed for toxics processing. Contributes to the multiplicative control matrix.</para>
</listitem>
<listitem>
<para>/PROJECTION/ contains settings to permit growth of emission values into the past or future. Creates a projection matrix for each pollutant and/or activity.</para>
</listitem>
<listitem>
<para>/REACTIVITY/ contains settings needed for reactivity-based controls. Creates the reactivity control matrix.</para>
</listitem>
</itemizedlist>

<para>The formats for these packets are described in the tables below. The projection formats have been designed to handle multiple year-to-year projections. No packets except for the /EMS_CONTROL/ packet are column specific formats.</para>

<section>

<title>/ALLOWABLE/ Packet</title>

<para>Note: For EMS-95 inventories, Characteristic 1 is the stack ID, Characteristic 2 is the device ID, and Characteristic 3 is the process ID.</para>

<informaltable>
<tgroup cols="3">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Description" />

<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1</entry>
<entry>A</entry>
<entry>/ALLOWABLE/</entry>
</row>
<row>
<entry>2+</entry>
<entry>A</entry>
<entry>Country/State/County code or Country/state code with zero for county, or zero (Integer)</entry>
</row>
<row>
<entry colname="Columns">B</entry>
<entry>8 or 10-digit SCC, or pieces of SCC with remaining digits filled in with zeros, or zero (Character)</entry>
</row>
<row>
<entry colname="Columns">C</entry>
<entry>Pollutant ID, or -9 if not a pollutant-specific control; <emphasis>in most cases, the cap or replacement value will be a pollutant-specific value, and that pollutant name needs to be placed in this column</emphasis> (Character)</entry>
</row>
<row>
<entry colname="Columns">D</entry>
<entry>Control factor, <emphasis>no longer used by SMOKE, enter -9 as placeholder</emphasis> (Real)</entry>
</row>
<row>
<entry colname="Columns">E</entry>
<entry>Allowable emissions cap value [tons/day]; required if no "replace" emissions are given (Real)</entry>
</row>
<row>
<entry colname="Columns">F</entry>
<entry>Allowable emissions replacement value [tons/day]; required if no "cap" emissions are given (Real)</entry>
</row>
<row>
<entry colname="Columns">G</entry>
<entry>4-digit SIC for point sources (Integer) or -9 if not needed; <emphasis>not supported by SMOKE at this time</emphasis></entry>
</row>
<row>
<entry colname="Columns">H</entry>
<entry>Plant ID for point sources, optional (Character)</entry>
</row>
<row>
<entry colname="Columns">I</entry>
<entry>Characteristic 1 (for IDA inventory input format, this is Point ID), optional (Character)</entry>
</row>
<row>
<entry colname="Columns">J</entry>
<entry>Characteristic 2 (for IDA inventory input format, this is Stack ID), optional (Character)</entry>
</row>
<row>
<entry colname="Columns">K</entry>
<entry>Characteristic 3 (for IDA inventory input format, this is segment), optional (Character)</entry>
</row>
<row>
<entry colname="Columns">L</entry>
<entry>Characteristic 4 (blank for IDA inventory input format), optional (Character)</entry>
</row>
<row>
<entry colname="Columns">M</entry>
<entry>Characteristic 5 (blank for IDA inventory input format), optional (Character)</entry>
</row>
<row>
<entry>3</entry>
<entry>A</entry>
<entry>/END/</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

<section>

<title>/CONTROL/ Packet</title>

<informaltable>
<tgroup cols="3">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Description" />

<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1</entry>
<entry>A</entry>
<entry>/CONTROL/</entry>
</row>
<row>
<entry>2+</entry>
<entry>A</entry>
<entry>Country/State/County code or Country/state code with zero for county, or zero (Integer)</entry>
</row>
<row>
<entry colname="Columns">B</entry>
<entry>8 or 10-digit SCC, or pieces of  SCC with remaining digits filled in with zeros, or zero (Character)</entry>
</row>
<row>
<entry colname="Columns">C</entry>
<entry>Pollutant ID, or -9 if not a pollutant-specific control (Character)</entry>
</row>
<row>
<entry colname="Columns">D</entry>
<entry>Primary control equipment code (PCEC); -9 or zero applies to all equipment (not yet supported)</entry>
</row>
<row>
<entry colname="Columns">E</entry>
<entry>Control efficiency (value should be a percent; e.g., enter 90 for a 90% control efficiency) (Real)</entry>
</row>
<row>
<entry colname="Columns">F</entry>
<entry>Rule effectiveness (value should be a percent; e.g., enter 50 for a 50% rule effectiveness) (Real)</entry>
</row>
<row>
<entry colname="Columns">G</entry>
<entry>Rule penetration rate (value should be a percent; e.g., enter 80 for a 80% rule penetration) (Real)</entry>
</row>
<row>
<entry colname="Columns">H</entry>
<entry>Standard Industrial Category (SIC), optional (4-digit Integer)</entry>
</row>
<row>
<entry colname="Columns">I</entry>
<entry>Maximum Achievable Control Technology (MACT) code, optional (6-character string)</entry>
</row>
<row>
<entry colname="Columns">J</entry>
<entry><para>Application control flag (Character)</para>

<itemizedlist>
<listitem>Y = control should be applied to inventory</listitem>
<listitem>N = control will not be used</listitem>
</itemizedlist>

</entry>
</row>
<row>
<entry colname="Columns">K</entry>
<entry><para>Replacement flag (Character)</para>

<itemizedlist>
<listitem>A = control is applied in addition to controls from /MACT/ packet</listitem>
<listitem>R = control replaces controls from /MACT/ packet</listitem>
</itemizedlist>

</entry>
</row>
<row>
<entry colname="Columns">L</entry>
<entry>Plant ID for point sources, optional (Character)</entry>
</row>
<row>
<entry colname="Columns">M</entry>
<entry>Characteristic 1 (for IDA inventory input format, this is Point ID), optional (Character)</entry>
</row>
<row>
<entry colname="Columns">N</entry>
<entry>Characteristic 2 (for IDA inventory input format, this is Stack ID), optional (Character)</entry>
</row>
<row>
<entry colname="Columns">O</entry>
<entry>Characteristic 3 (for IDA inventory input format, this is segment), optional (Character)</entry>
</row>
<row>
<entry colname="Columns">P</entry>
<entry>Characteristic 4 (blank for IDA inventory input format), optional (Character)</entry>
</row>
<row>
<entry colname="Columns">Q</entry>
<entry>Characteristic 5 (blank for IDA inventory input format), optional (Character)</entry>
</row>
<row>
<entry>3</entry>
<entry>A</entry>
<entry>/END/</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

<section>

<title>/CTG/ Packet</title>

<informaltable>
<tgroup cols="3">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Description" />

<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1</entry>
<entry>A</entry>
<entry>/CTG/</entry>
</row>
<row>
<entry>2+</entry>
<entry>A</entry>
<entry>Country/State/County code or Country/state code with zero for county, or zero (Integer)</entry>
</row>
<row>
<entry colname="Columns">B</entry>
<entry>8 or 10-digit SCC, or pieces of SCC with remaining digits filled in with zeros, or zero (Character)</entry>
</row>
<row>
<entry colname="Columns">C</entry>
<entry>Pollutant ID, or -9 if not a pollutant-specific control; in most cases, the emissions cutoff value will be a pollutant-specific value, and that pollutant name needs to be placed in this column (Character)</entry>
</row>
<row>
<entry colname="Columns">D</entry>
<entry>Control technology control factor; value should be a fraction 0 to 1. (Real)</entry>
</row>
<row>
<entry colname="Columns">E</entry>
<entry>CTG emissions cutoff for application of CTG, MACT, or RACT factor (tons/day) (Real)</entry>
</row>
<row>
<entry colname="Columns">F</entry>
<entry>MACT control factor; value should be a fraction 0 to 1, or -9 if missing (Real)</entry>
</row>
<row>
<entry colname="Columns">G</entry>
<entry>RACT; value should be a fraction 0 to 1; or -9 if missing (Real)</entry>
</row>
<row>
<entry>3</entry>
<entry>A</entry>
<entry>/END/</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

<section>
 
<title>/EMS_CONTROL/ Packet (point sources only)</title>

<informaltable>
<tgroup cols="3">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Description" />

<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1</entry>
<entry>A</entry>
<entry>/EMS_CONTROL/</entry>
</row>
<row>
<entry>2+</entry>
<entry>1-2</entry>
<entry>State code (Integer) or zero</entry>
</row>
<row>
<entry colname="Columns">3-5</entry>
<entry>County code or zero (Integer)</entry>
</row>
<row>
<entry colname="Columns">6-9</entry>
<entry>SIC code (Integer) or blank for missing; not supported by SMOKE at this time</entry>
</row>
<row>
<entry colname="Columns">10-17</entry>
<entry>8-character SCC, or pieces of SCC with remaining digits filled in with zeroes, or zero (Character)</entry>
</row>
<row>
<entry colname="Columns">18-22</entry>
<entry>Pollutant ID; leave blank if not a pollutant-specific control (Character)</entry>
</row>
<row>
<entry colname="Columns">23-37</entry>
<entry>Plant ID (EMS-95 Facility; leave blank if not needed) (Character)</entry>
</row>
<row>
<entry colname="Columns">38-49</entry>
<entry>Characteristic 2 (EMS-95 Device; blank if not needed) (Character)</entry>
</row>
<row>
<entry colname="Columns">50-61</entry>
<entry>Characteristic 1 (EMS-95 Stack; blank if not needed) (Character)</entry>
</row>
<row>
<entry colname="Columns">62-73</entry>
<entry>Characteristic 3 (EMS-95 Process; blank if not needed) (Character)</entry>
</row>
<row>
<entry colname="Columns">74-81</entry>
<entry>Future year SCC (not used by SMOKE) (Character)</entry>
</row>
<row>
<entry colname="Columns">82-85</entry>
<entry>Base year control efficiency percent [1-100] (Real)</entry>
</row>
<row>
<entry colname="Columns">86-89</entry>
<entry>Base year rule effectiveness percent [0-100] (Real)</entry>
</row>
<row>
<entry colname="Columns">90-93</entry>
<entry>Base year rule penetration rate percent [0-100] (Real)</entry>
</row>
<row>
<entry colname="Columns">94-97</entry>
<entry>Future year control efficiency fraction [0.0-1.0] (Real)</entry>
</row>
<row>
<entry colname="Columns">98-101</entry>
<entry>Future year rule effectiveness fraction [0.0-1.0] (Real)</entry>
</row>
<row>
<entry colname="Columns">102-105</entry>
<entry>Future year rule penetration rate fraction [0.0-1.0] (Real)</entry>
</row>
<row>
<entry colname="Columns">106-110</entry>
<entry>Point source conversion factor fraction [0.0-1.0+ (values > 1.0 are okay)] (Real)</entry>
</row>
<row>
<entry colname="Columns">111-126</entry>
<entry>Control strategy code (not used by SMOKE) (Character)</entry>
</row>
<row>
<entry colname="Columns">127-130</entry>
<entry>Point source ratio (not used by SMOKE) [0.0-1.0] (Real)</entry>
</row>
<row>
<entry colname="Columns">151-154</entry>
<entry>Control adjustment factor [0.0-1.0+ (values > 1.0 are okay)] (Real) </entry>
</row>
<row>
<entry>3</entry>
<entry>A</entry>
<entry>/END/</entry>
</row>
</tbody>
</tgroup>
</informaltable>

<para>The control adjustment factor can be precomputed from other values in each record. The value in this column overrides all other values in the record, and SMOKE uses this value directly as the factor to adjust the emissions.</para>

<para>Note that the expected order of the plant characteristics is reversed in this file from other EMS-95 files. The device is specified before the stack. Also note that the number of characters available for several of the input variables are not at the SMOKE maximum, so this file format must be used cautiously when you are using it for inventories other than EMS-95. Finally, note that the base year factors are expected to be given as percentages (1-100), while the future year factors are expected to be given as fractions (0-1).</para>

</section>

<section>

<title>/MACT/ Packet</title>

<informaltable>
<tgroup cols="3">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Description" />

<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1</entry>
<entry>A</entry>
<entry>/MACT/</entry>
</row>
<row>
<entry>2+</entry>
<entry>A</entry>
<entry>Maximum Achievable Control Technology (MACT) code, optional (6-character string)</entry>
</row>
<row>
<entry colname="Columns">B</entry>
<entry>8 or 10-digit SCC, or pieces of  SCC with remaining digits filled in with zeroes or 0 (Character)</entry>
</row>
<row>
<entry colname="Columns">C</entry>
<entry><para>Source type (2-character string)</para>

<itemizedlist>
<listitem>00 = both</listitem>
<listitem>01 = major</listitem>
<listitem>02 = CAA Section 12 area sources</listitem>
</itemizedlist>

<para>The source type is only used to make a final determination about whether the entry applies for a source. If the record matches the source otherwise (MACT or SCC matches) but the source type does not match, then the source receives no controls from this entry.</para></entry>
</row>
<row>
<entry colname="Columns">D</entry>
<entry>Pollutant ID, or -9 if not a pollutant-specific control (Character)</entry>
</row>
<row>
<entry colname="Columns">E</entry>
<entry>Control efficiency of existing sources (value should be 0-100) (Real)</entry>
</row>
<row>
<entry colname="Columns">F</entry>
<entry>Control efficiency of new sources (value should be 0-100) (Real)</entry>
</row>
<row>
<entry colname="Columns">F</entry>
<entry>Fraction of new and existing sources (value should be 0-100) (Real)</entry>
</row>
<row>
<entry>3</entry>
<entry>A</entry>
<entry>/END/</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

<section>

<title>/PROJECTION/ Packet</title>

<para>Note that if the SCC is supplied, the SIC will not be used in source matching.</para>

<informaltable>
<tgroup cols="3">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Description" />

<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1</entry>
<entry>A</entry>
<entry>/PROJECTION &lt;4-digit from year&gt; &lt;4-digit to year&gt;/</entry>
</row>
<row>
<entry>2+</entry>
<entry>A</entry>
<entry>Country/State/County code, or Country/state code with zero for county, or zero (Integer)</entry>
</row>
<row>
<entry colname="Columns">B</entry>
<entry>8 or 10-digit SCC, or pieces of SCC with remaining digits filled in with zeros, or zero (Character)</entry>
</row>
<row>
<entry colname="Columns">C</entry>
<entry>Projection factor [enter number on fractional basis; e.g., enter 1.2 to increase emissions by 20%] (Real)</entry>
</row>
<row>
<entry colname="Columns">D</entry>
<entry>Pollutant ID, or -9 if not a pollutant-specific projection</entry>
</row>
<row>
<entry colname="Columns">E</entry>
<entry>4-digit SIC, or 2-digit with remaining digits filled in with zeroes or blank for missing, optional (Integer)</entry>
</row>
<row>
<entry colname="Columns">F</entry>
<entry>Maximum Achievable Control Technology code (MACT), optional (6-character string)</entry>
</row>
<row>
<entry>3</entry>
<entry>A</entry>
<entry>/END/</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

<section>

<title>/REACTIVITY/ Packet</title>

<para>Note: For EMS-95 inventories, Characteristic 1 is the stack ID, Characteristic 2 is the device ID, and Characteristic 3 is the process ID.</para>

<informaltable>
<tgroup cols="3">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Description" />

<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1</entry>
<entry>A</entry>
<entry>/REACTIVITY &lt;4-digit base year&gt; &lt;4-digit future year&gt;/</entry>
</row>
<row>
<entry>2+</entry>
<entry>A</entry>
<entry>Country/State/County code or Country/state code with zero for county, or zero (Integer)</entry>
</row>
<row>
<entry colname="Columns">B</entry>
<entry>8 or 10-digit SCC, or pieces of SCC with remaining digits filled in with zeros, or zero (Character)</entry>
</row>
<row>
<entry colname="Columns">C</entry>
<entry>Pollutant ID, required (Character)</entry>
</row>
<row>
<entry colname="Columns">D</entry>
<entry>Replacement emissions for base year [tons/day] (Real)</entry>
</row>
<row>
<entry colname="Columns">E</entry>
<entry>Projection factor (or 0. for none; enter fractional value; e.g., 1.2 to increase emissions by 20%) (Real)</entry>
</row>
<row>
<entry colname="Columns">F</entry>
<entry>Future year 10-digit SCC code (or zero to set equal to base case) (Character)</entry>
</row>
<row>
<entry colname="Columns">G</entry>
<entry>Speciation profile number (or zero to set equal to base case) (Real)</entry>
</row>
<row>
<entry colname="Columns">H</entry>
<entry>Market penetration of new speciation [fraction/year; e.g., enter 0.2 for 20% market penetration per year] (0. to 1.0) (Real)</entry>
</row>
<row>
<entry colname="Columns">I</entry>
<entry>4-digit SIC for point sources (Integer) or -9 if not needed; not supported by SMOKE at this time</entry>
</row>
<row>
<entry colname="Columns">J</entry>
<entry>Plant ID for point sources, optional (Character)</entry>
</row>
<row>
<entry colname="Columns">K</entry>
<entry>Characteristic 1 (for IDA, this is Point ID), optional (Character)</entry>
</row>
<row>
<entry colname="Columns">L</entry>
<entry>Characteristic 2 (for IDA inventory input format, this is Stack ID), optional (Character)</entry>
</row>
<row>
<entry colname="Columns">M</entry>
<entry>Characteristic 3 (for IDA inventory input format, this is segment), optional (Character)</entry>
</row>
<row>
<entry colname="Columns">N</entry>
<entry>Characteristic 4 (blank for IDA inventory input format), optional (Character)</entry>
</row>
<row>
<entry colname="Columns">O</entry>
<entry>Characteristic 5 (blank for IDA inventory input format), optional (Character)</entry>
</row>
<row>
<entry>3</entry>
<entry>A</entry>
<entry>/END/</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

</section>

</section>

<section>

<title>Special Merging Files</title>

<section>

<title><envar>FILELIST</envar>: Gridded merge 2-D file list</title>

<para>The <envar>FILELIST</envar> file provides a list of logical file names to the <command>Mrggrid</command> program. This list should contain the logical file names for all 2- or 3-D files to be merged by a given run. It is a very simple file, and has no limit to the number of files listed.</para>

<informaltable>
<tgroup cols="3">
<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1+</entry>
<entry>A</entry>
<entry>Logical file name</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

</section>

<section>

<title>Meteorology Files</title>

<para>The meteorological input files needed by SMOKE need to come from a MM5 post-processor. Either Models-3 MCIP, EDSS MCIP, or MCPL can be used to supply SMOKE meteorology data.</para>

<para>The five meteorology files that SMOKE needs for biogenic calculations, mobile calculations, and plume rise are <envar>GRID_CRO_2D</envar>, <envar>GRID_CRO_3D</envar>, <envar>MET_CRO_2D</envar>, <envar>MET_CRO_3D</envar>, and <envar>MET_DOT_3D</envar>. <remark>SMOKE computes virtual temperature from information in these files.</remark></para>

<section>

<title><envar>METLIST</envar>: List of meteorology files</title>

<para>The <envar>METLIST</envar> file is used to provide the file names of available temperature files to the <command>Tmpbio</command> and <command>Premobl</command> programs. The <command>Premobl</command> program must run once for the entire modeling episode, and therefore needs all of the files at one time. The <command>Tmpbio</command> program can also take individual files, but this file can be used to string multiple 1-day meteorology files together. In the default SMOKE scripts this file is generated automatically. The files provided must cover the desired episode and contain the requested temperature variables.</para>

<informaltable>
<tgroup cols="3">
<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1+</entry>
<entry>A</entry>
<entry>Full name and path of I/O API meteorology file with temperature data</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

<section>

<title><envar>RADLIST</envar>: List of meteorology files containing radiation data</title>

<para>The <envar>RADLIST</envar> file is used to provide the file names of available radiation files to <command>Tmpbio</command>. As with the <envar>METLIST</envar> file, <command>Tmpbio</command> can take individual files, or this file can be used to string multiple 1-day meteorology files together.</para>

<informaltable>
<tgroup cols="3">
<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1+</entry>
<entry>A</entry>
<entry>Full name and path of I/O API meteorology file with radiation data</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

</section>

<section>

<title>Source-specific files</title>

<section>

<title>Biogenics</title>

<section>

<title><envar>B3FAC</envar>: BEIS3 emissions factors file</title>

<para>This file contains a LAI, dry leaf biomass, winter biomass factor, indicator of specific leaf weight, and normalized emission fluxes for four different species/compounds (ISOP, OVOC, MONO, and NO).  This ASCII file has the following structure:</para>

<informaltable>
<tgroup cols="3">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Description" />

<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1+</entry>
<entry>9-24</entry>
<entry>Abbreviated name for land use type (Character*16)</entry>
</row>
<row>
<entry colname="Columns">A</entry>
<entry>Leaf area index  (m2/m2) (Integer)</entry>
</row>
<row>
<entry colname="Columns">B</entry>
<entry>Dry leaf biomass (g/m2) (Integer)</entry>
</row>
<row>
<entry colname="Columns">C</entry>
<entry>Winter biomass factor (Real)</entry>
</row>
<row>
<entry colname="Columns">D</entry>
<entry>Indicator of specific leaf weight (Integer)</entry>
</row>
<row>
<entry colname="Columns">E</entry>
<entry>Normalized emissions flux for ISOP (Real) </entry>
</row>
<row>
<entry colname="Columns">F</entry>
<entry>Normalized emissions flux for MONO (Real)</entry>
</row>
<row>
<entry colname="Columns">G</entry>
<entry>Normalized emissions flux for OVOC (Real)</entry>
</row>
<row>
<entry colname="Columns">H</entry>
<entry>Normalized emissions flux for NO (Real)</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

<section>

<title><envar>B3XRF</envar>: BELD3 to BELD2 cross-reference file</title>

<para><envar>B3XRF</envar> is an ASCII file that contains cross-reference information needed to convert the 230 BELD3 land use types into the 127 BELD2 land use types. This cross-reference file is used in the program <command>Beld3to2</command>. The <envar>B3XRF</envar> file contains 230 lines of data in the following format:</para>

<informaltable>
<tgroup cols="3">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Description" />

<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1+</entry>
<entry>1-4</entry>
<entry>BELD2 land use type ID (Char)</entry>
</row>
<row>
<entry colname="Columns">6-8</entry>
<entry>BELD2 category (Integer)</entry>
</row>
<row>
<entry colname="Columns">10-25</entry>
<entry>BELD3 land use type ID (Char)</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

<section>

<title><envar>BFAC</envar>: BEIS2 emission factors file</title>

<para><envar>BFAC</envar> is the same file as the BEIS2 ASCII emissions factor file. There are two different emission factor files available for use: winter and summer. <envar>BFAC</envar> (both the winter and the summer files) have the following structure:</para>

<informaltable>
<tgroup cols="3">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Description" />

<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1+</entry>
<entry>2-6</entry>
<entry>Vegetation ID (Char)</entry>
</row>
<row>
<entry colname="Columns">7-15</entry>
<entry>ISOP emission factor (Real)</entry>
</row>
<row>
<entry colname="Columns">16-24</entry>
<entry>MONO emission factor (Real)</entry>
</row>
<row>
<entry colname="Columns">25-33</entry>
<entry>OVOC emission factor (Real)</entry>
</row>
<row>
<entry colname="Columns">34-39</entry>
<entry>NO emission factor (Real)</entry>
</row>
<row>
<entry colname="Columns">40-41</entry>
<entry>LAI (Integer)</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

<section>

<title><envar>BIOSEASON</envar>: Bioseason switch file</title>

<para>The <envar>BIOSEASON</envar> switch file is an I/O API netCDF file used to indicate how each day in a given year should be treated, either as summer or winter. This file can be created using the <command>Metscan</command> utility program.</para>

</section>

</section>

<section>

<title>Mobile</title>

<section>

<title><envar>M6LIST</envar>: MOBILE6 input scenario list file</title>

<para>The <envar>M6LIST</envar> file lists the available MOBILE6 input scenario files. The scenario file name must include the six digit FIPS code of the county.</para>

<informaltable>
<tgroup cols="3">
<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1+</entry>
<entry>A</entry>
<entry>Full name and path of MOBILE6 input scenario</entry>
</row>
</tbody>
</tgroup>
</informaltable>

<example>
<title><envar>M6LIST</envar> file</title>

<programlisting>
/smoke/data/inventory/mobile/scenarios/summer037001.in
/smoke/data/inventory/mobile/scenarios/summer037057.in
</programlisting>
</example>

<section>

<title>MOBILE6 input scenario format</title>

<para>A MOBILE6 input scenario file must be provided for each reference county in the <envar>MCREF</envar> file. These files follow the same format as MOBILE6 input files; all commands are allowed except for the following:</para>

<itemizedlist>
<listitem>MOBILE6 INPUT FILE</listitem>
<listitem>MOBILE6 BATCH FILE</listitem>
<listitem>RUN DATA</listitem>
<listitem>END OF RUN</listitem>
<listitem>POLLUTANTS</listitem>
<listitem>PARTICULATES</listitem>
<listitem>AIR TOXICS</listitem>
<listitem>EXPRESS HC AS *</listitem>
<listitem>NO REFUELING</listitem>
<listitem>REPORT FILE</listitem>
<listitem>NO DESC OUTPUT</listitem>
<listitem>EXPAND *</listitem>
<listitem>IDLE PM EMISSIONS</listitem>
<listitem>DATABASE *</listitem>
<listitem>WITH FIELDNAMES</listitem>
<listitem>SPREADSHEET</listitem>
<listitem>EMISSIONS TABLE</listitem>
<listitem>DAILY OUTPUT</listitem>
<listitem>AGGREGATED OUTPUT</listitem>
<listitem>I/M CREDIT FILE</listitem>
</itemizedlist>

<para>The file must include either the MIN/MAX TEMPERATURES or HOURLY TEMPERATURE command and must have a SCENARIO RECORD command. SMOKE will ignore SPEED VMT, AVERAGE SPEED, or PARTICLE SIZE.</para>

<example>
<title>MOBILE6 scenario file</title>

<programlisting>
SCENARIO RECORD    : 01001 96 07                                                                    
CALENDAR YEAR      : 1996                                                                           
EVALUATION MONTH   : 7                                                                              
DIESEL SULFUR      : 500                                                                            
MIN/MAX TEMPERATURE: 70.0 90.0                                                                      
ALTITUDE           : 1                                                                              
PARTICULATE EF     : PMGZML.CSV PMGDR1.CSV PMGDR2.CSV PMDZML.CSV PMDDR1.CSV PMDDR2.CSV              
FUEL RVP           : 7.8                                                                            
GAS AROMATIC%      : 25.0
GAS OLEFIN%        : 15.0
GAS BENZENE%       : 1.5
E200               : 50.0
E300               : 85.0
OXYGENATE          : MTBE  15.1  0.50
                   : ETBE  17.6  0.05
                   : ETOH  10.0  0.45
                   : TAME   6.0  0.00
</programlisting>
</example>

</section>

</section>

<section>

<title><envar>MCODES</envar>: Mobile source codes file</title>

<para>The <envar>MCODES</envar> file contains the codes for mobile source vehicle types and road classes. It is used to convert from the codes in the inventory to the codes used internally by SMOKE.</para>

<para>The SCC section maps the vehicle type and road class combinations to a mobile source SCC.</para>

<informaltable>
<tgroup cols="3">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Description" />

<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1</entry>
<entry>A</entry>
<entry>/VEHICLE TYPES/ header</entry>
</row>
<row>
<entry>2+</entry>
<entry>A</entry>
<entry>Name of vehicle type from <envar>MBINV</envar> file (Char)</entry>
</row>
<row>
<entry colname="Columns">B</entry>
<entry>Number of vehicle type used in SMOKE files (Integer)</entry>
</row>
<row>
<entry colname="Columns">C</entry>
<entry>

<simplelist>
<member>Y - use vehicle type in modeling</member>
<member>N - do not use vehicle type</member>
</simplelist>

</entry>
</row>
<row>
<entry>3</entry>
<entry>A</entry>
<entry>/ROAD CLASSES/ header</entry>
</row>
<row>
<entry>4+</entry>
<entry>A</entry>
<entry>Road class code from last 3 digits of SCC in <envar>MBINV</envar> file (Integer)</entry>
</row>
<row>
<entry colname="Columns">B</entry>
<entry>Road class code used in SMOKE files (Integer)</entry>
</row>
<row>
<entry colname="Columns">C</entry>
<entry>

<simplelist>
<member>Y - use road class code in modeling</member>
<member>N - do not use road class code</member>
</simplelist>

</entry>
</row>
<row>
<entry>5</entry>
<entry>A</entry>
<entry>/SCC/ header</entry>
</row>
<row>
<entry>6+</entry>
<entry>A</entry>
<entry>Road class (Integer)</entry>
</row>
<row>
<entry colname="Columns">B</entry>
<entry>Vehicle type name (Char)</entry>
</row>
<row>
<entry colname="Columns">C</entry>
<entry>SCC (10-character)</entry>
</row>
</tbody>
</tgroup>
</informaltable>

<example>
<title><envar>MCODES</envar> file</title>
 
<programlisting>
/VEHICLE TYPES/
LDGV   0100   Y
LDGT1  0102   Y
LDGT2  0104   Y
HDGV   0107   Y
LDDV   3000   Y
LDDT   3006   Y
HDDV   3007   Y
MC     0108   Y
LDGT   0106   N
/ROAD CLASSES/
110 01  Y
111 01  Y
130 02  Y
150 06  Y
170 07  Y
190 08  Y
210 09  Y
230 11  Y
250 12  Y
270 14  Y
290 16  Y
310 17  Y
330 19  Y
/SCC/
110 LDGV   2201001110
130 LDGV   2201001130
150 LDGV   2201001150
170 LDGV   2201001170
190 LDGV   2201001190
210 LDGV   2201001210
230 LDGV   2201001230
250 LDGV   2201001250
270 LDGV   2201001270
290 LDGV   2201001290
310 LDGV   2201001310
330 LDGV   2201001330
110 LDGT1  2201021110
130 LDGT1  2201020130
150 LDGT1  2201020150
170 LDGT1  2201020170
190 LDGT1  2201020190
210 LDGT1  2201020210
230 LDGT1  2201020230
250 LDGT1  2201020250
270 LDGT1  2201020270
290 LDGT1  2201020290
310 LDGT1  2201020310
330 LDGT1  2201020330
...
</programlisting>
</example>

</section>

<section>

<title><envar>MCREF</envar>: Mobile county cross-reference file</title>

<para>The <envar>MCREF</envar> file is a list-formatted file used to assign reference counties to inventory counties.</para>

<informaltable>
<tgroup cols="3">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Description" />

<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1+</entry>
<entry>A</entry>
<entry>Two-digit state FIPS code for inventory county (Integer)</entry>
</row>
<row>
<entry colname="Columns">B</entry>
<entry>Three-digit county FIPS code for inventory county (Integer)</entry>
</row>
<row>
<entry colname="Columns">C</entry>
<entry>Two-digit state FIPS code for reference county (Integer)</entry>
</row>
<row>
<entry colname="Columns">D</entry>
<entry>Three-digit county FIPS code for reference county (Integer)</entry>
</row>
</tbody>
</tgroup>
</informaltable>

<example>
<title><envar>MCREF</envar> file</title>

<programlisting>
01 001  01 001
01 003  01 001
01 005  01 001
01 007  01 001
01 009  01 001
01 011  01 001
01 013  01 001
01 015  01 001
01 017  01 001
01 019  01 001
</programlisting>
</example>

</section>

<section>

<title><envar>MEFLIST</envar>: Mobile emission factors list file</title>

<para>The <envar>MEFLIST</envar> file is used to provide the file names of available emission factors files to the <command>Temporal</command> program. This file cannot be created very easily until the <command>Emisfac</command> program has been run. Therefore, in the default SMOKE scripts this file is generated automatically.</para>

<informaltable>
<tgroup cols="3">
<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1+</entry>
<entry>A</entry>
<entry>Full name and path of emission factors file</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

<section>

<title><envar>MEPROC</envar>: List of mobile emission processes and associated activities and pollutants</title>

<para>The <envar>MEPROC</envar> file is a list of the emission processes to model for mobile sources.</para>

<informaltable>
<tgroup cols="3">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Description" />

<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1+</entry>
<entry>A</entry>
<entry>Activity name</entry>
</row>
<row>
<entry colname="Columns">B</entry>
<entry>Mobile emissions process</entry>
</row>
<row>
<entry colname="Columns">C+</entry>
<entry>Associated pollutant name(s) for activity and process combination</entry>
</row>
</tbody>
</tgroup>
</informaltable>

<example>
<title><envar>MEPROC</envar> file</title>

<programlisting>
VMT EXR CO NOX TOG
VMT EXS CO NOX TOG
VMT HOT TOG
VMT DNL TOG
VMT RST TOG
VMT EVR TOG
VMT CRC TOG
VMT RFL TOG
</programlisting>
</example>

</section>

<section>

<title><envar>MVREF</envar>: Mobile source county settings file</title>

<para>The <envar>MVREF</envar> file is a list-formatted file that assigns settings for various options to each reference county defined in the <envar>MCREF</envar> file.</para>

<informaltable>
<tgroup cols="3">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Description" />

<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1+</entry>
<entry>A</entry>
<entry>Two-digit state FIPS code for reference county (Integer)</entry>
</row>
<row>
<entry colname="Columns">B</entry>
<entry>Three-digit county FIPS code of reference county (Integer)</entry>
</row>
<row>
<entry colname="Columns">C</entry>
<entry><para>Setting for spatial averaging of temperatures</para>

<itemizedlist>
<listitem>1 - temperatures are county specific</listitem>
<listitem>2 - temperatures are averaged over all counties sharing a reference county</listitem>
</itemizedlist>

</entry>
</row>
<row>
<entry colname="Columns">D</entry>
<entry><para>Setting for temporal averaging of temperatures</para>

<itemizedlist>
<listitem>1 - no averaging; create hourly temperatures for each day</listitem>
<listitem>2 - average temperatures over weeks</listitem>
<listitem>3 - average temperatures over months</listitem>
<listitem>4 - average temperatures over entire episode</listitem>
</itemizedlist>

</entry>
</row>
<row>
<entry></entry>
<entry>E</entry>
<entry><para>Setting for local roads</para>

<itemizedlist>
<listitem>1 - model local roads using MOBILE6 local road type (uses default average speed)</listitem>
<listitem>2 - model local roads using MOBILE6 arterial road type with speeds from mobile inventory</listitem>
</itemizedlist>

</entry>
</row>
</tbody>
</tgroup>
</informaltable>

<example>
<title><envar>MVREF</envar> file</title>

<programlisting>
01 001 2 2 1
04 001 2 2 1
04 013 2 2 1
04 019 2 2 1
05 001 2 2 1
</programlisting>
</example>

</section>

<section>

<title><envar>SPDPRO</envar>: Mobile hourly speed profiles file</title>

<para>The <envar>SPDPRO</envar> file is used to provide hourly speed profile data for use by MOBILE6. Hours follow the convention where 1 = midnight local time and 24 = 11 pm local time.</para>

<informaltable>
<tgroup cols="3">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Description" />

<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1+</entry>
<entry>A</entry>
<entry>Profile number (Integer)</entry>
</row>
<row>
<entry colname="Columns">B-Y</entry>
<entry>Hourly speed (Real); 24 values total</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

<section>

<title><envar>SPDREF</envar>: Mobile hourly speed cross-reference file</title>

<para>The <envar>SPDREF</envar> file is used to match hourly speed profiles to the mobile sources.</para>

<informaltable>
<tgroup cols="3">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Description" />

<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1+</entry>
<entry>A</entry>
<entry>Six digit country/state/county FIPS code (Integer)</entry>
</row>
<row>
<entry colname="Columns">B</entry>
<entry>Ten digit Source Classification Code (Character)</entry>
</row>
<row>
<entry colname="Columns">C</entry>
<entry>Profile number (Integer)</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

</section>

<section>

<title>Point</title>

<section>

<title><envar>PELVCONFIG</envar>: Elevated source selection file</title>

<para>The <command>Elevpoint</command> program optionally uses the <envar>PELVCONFIG</envar> file. It permits users to provide SMOKE criteria for grouping stacks and for selecting elevated and PinG point sources. Stack groups are groups of stacks from the same facility that are treated by SMOKE and the AQM as a single stack when computing plume rise and/or processing the stack as a PinG source. They have the effect of reducing the number of elevated and PinG stacks which makes for faster processing, particularly in the case of PinG sources in the AMs. Users can specify stack groups regardless of whether elevated or PinG sources are also being specified.</para>

<para>All emissions in a stack group are summed for the purposes of comparing against the elevated source criteria and PinG source criteria. In short, the grouped sources are treated as a single source for all SMOKE features regarding elevated source selection and special outputs. The grouped sources can still have different temporal profiles and chemical speciation profiles. For more information on how the emissions are computed for source selection, see the <command>Elevpoint</command> documentation <remark>in Chapter 6</remark>.</para>

<para>The <envar>PELVCONFIG</envar> file has four sections: (1) source category selection, (2) source grouping, (3) PinG source selection, and (4) elevated source selection. Sections 2, 3, and 4 are optional, but <command>Elevpoint</command> will not run if all three sections are missing, since the file would be instructing it to do nothing. The sections need not appear in any particular order, but each section is permitted only once. Comments may also be used in the file. The following subsections explain these major input features.</para>

<section>

<title>Using comments</title>

<para>Comments can be put in the file using a pound sign (#) in the first column of a line or a double pound sign (##) anywhere else in a line. For example, the double pound can appear after packet labels or instructions in the file.</para>

</section>

<section>

<title>Source category selection</title>

<para>This section is used to tell <command>Elevpoint</command> which source category to process. Since <command>Elevpoint</command> is designed only for point sources, this is very simple. This section needs to appear as follows:</para>

<para>SMK_SOURCE   P</para>

</section>

<section>

<title>Source grouping</title>

<para>The /SPECIFY ELEV GROUPS/ packet is used for defining source groups based on source criteria. The packet contains the following entries:</para>

<itemizedlist>
<listitem>
<para>/SPECIFY ELEV GROUPS/</para>

<para>Must appear to start the packet. Only one packet of this type is permitted.</para>
</listitem>
<listitem>
<para>&lt;Source grouping criteria, explained next&gt;</para>
</listitem>
<listitem>
<para>/END/</para>

<para>Must appear to end the packet.</para>
</listitem>
</itemizedlist>

<para>The <emphasis>source grouping criteria</emphasis> can be as many lines as the user wants. Each one contains at least three parts: (1) variable, (2) type of criterion, and (3) value for criterion, in the following structure:</para>

<para>&lt;variable&gt; &lt;type of criterion&gt; &lt;value for criterion&gt;</para>

<para>For example, the following source grouping criterion groups all inventory records (sources) at the same facility that have stack heights within &plusmn;2 meters:</para>

<programlisting>HT  +/-  2.0</programlisting>

<para>The fact that sources are grouped by facility is implicit to the <command>Elevpoint</command> program, since we assumed when creating <command>Elevpoint</command> that grouping at a coarser level of detail was not desirable. The packet supports boolean OR and AND conditions. Each separate line of the packet is an OR condition. The AND conditions must appear on a single line. Any number of records are permitted in this packet, as are any number of AND conditions or AND/OR combinations.</para>

<para>The following example will help illustrate. To indicate that one group should consist of sources with stack heights within &plusmn;2 meters that also have diameters within &plusmn;1 meter, and that a second group should consist of sources with exit velocities below 10 m/s, the packet would be:</para>

<programlisting><![CDATA[
/SPECIFY ELEV GROUPS/
HT  +/-  2.0  AND  DIAMETER  +/- 1.0
VE  <  10.
/END/
]]></programlisting>

<para>The elevated groups packet supports the following variables:</para>

<itemizedlist>
<listitem>
<para>HT: stack height in meters</para>
</listitem>
<listitem>
<para>DM: stack diameter in meters</para>
</listitem>
<listitem>
<para>TK: stack gas exit temperature in Kelvin</para>
</listitem>
<listitem>
<para>VE: stack gas exit velocity in meters/second</para>
</listitem>
<listitem>
<para>FL: stack gas exit flow rate in cubic meters/second</para>
</listitem>
<listitem>
<para>&lt;pollutant name&gt;: whatever pollutant names are in the inventory (e.g., NOX). We do not know why a user might want this type of grouping, but SMOKE does not prevent it.</para>
</listitem>
</itemizedlist>

<para>The elevated groups packet supports the following types of grouping criteria:</para>

<itemizedlist>
<listitem>
<para>+/- or -/+: variable values must be within &lt;value for criterion&gt; for the variable given</para>
</listitem>
<listitem>
<para>&gt;: variable values must be greater than &lt;value for criterion&gt; for the variable given</para>
</listitem>
<listitem>
<para>&gt;= or =&gt;: variable values must be greater than or equal to &lt;value for criterion&gt; for the variable given</para>
</listitem>
<listitem>
<para>&lt;: variable values must be less than &lt;value for criterion&gt; for the variable given</para>
</listitem>
<listitem>
<para>&lt;= or =&lt;: variable values must be less than or equal to &lt;value for criterion&gt; for the variable given</para>
</listitem>
<listitem>
<para>= or ==: variable values must be equal to &lt;value for criterion&gt; for the variable given</para>
</listitem>
</itemizedlist>

</section>

<section>

<title>Plume-in-grid source selection</title>

<para>The /SPECIFY PING/ packet is used for selecting plume-in-grid sources based on source criteria. The packet contains the following entries:</para>

<itemizedlist>
<listitem>
<para>/SPECIFY PING/</para>

<para>Must appear to start the packet. Only one packet of this type is permitted.</para>
</listitem>
<listitem>
<para>&lt;Source selection criteria, explained next&gt;</para>
</listitem>
<listitem>
<para>/END/</para>

<para>Must appear to end the packet.</para>
</listitem>
</itemizedlist>

<para>The <emphasis>source selection criteria</emphasis> can be as many lines as the user wants. Each one contains at least three parts: (1) variable, (2) type of criterion, and (3) value for criterion in the following structure:</para>

<para>&lt;variable&gt; &lt;type of criterion&gt; &lt;value for criterion&gt;</para>

<para>This structure is the same as that of the /SPECIFIC ELEV GROUPS/ packet, and the description of the PinG source selection criteria is the same as that of the source grouping criteria. All of the same variables and types of criteria are supported, plus the additional variables and criteria types listed below.</para>

<para>The PinG packet supports the following additional variables:</para>

<itemizedlist>
<listitem>
<para>RISE: The plume rise as computed by the Briggs algorithm documented with the <command>Elevpoint</command> program. The &lt;value for criterion&gt; must be provided in meters. To select all sources with plume rise greater than or equal to 75 meters, one would input:</para>

<programlisting>RISE >= 75.</programlisting>
</listitem>
<listitem>
<para>SOURCE: Source number from the ASCII part of SMOKE's <envar>PNTS</envar> file output from <command>Smkinven</command>. This variable permits selection of specific SMOKE sources as PinG sources.</para>
</listitem>
<listitem>
<para>PLANT: Plant ID code from the ASCII part of SMOKE's <envar>PNTS</envar> file output from <command>Smkinven</command>. Note: the "PLANT" variable can be paired only with the "IS" criterion type (below); no other criterion types (such as "&lt;" or "=") are permitted. It is recommended that this variable be used in addition to the FIPS variable (below) to allow selection of all records at specific plants. It can also be combined with stack parameter variables.</para>
</listitem>
<listitem>
<para>FIPS: Country/State/County region code can be used with the "PLANT" variable or other variables to specific PinG sources by region. It is not recommended that this variable be used alone for specifying PinG sources, because that would result in insignificant sources being prepared for the AQM as PinG sources. It does not make sense to process such sources as PinG sources in AQMs.</para>
</listitem>
</itemizedlist>

<para>The packet also supports the following types of criteria in addition to those described with the source grouping packet:</para>

<itemizedlist>
<listitem>
<para>TOP: This criterion type permits users to select sources with the largest values of the variable given. The &lt;value for criterion&gt; is the number of sources that will be selected based on the value given. This criterion type is permitted only when using a pollutant name as the &lt;variable&gt;.</para>
</listitem>
<listitem>
<para>IS: This criterion type must be used to assign a value to the "PLANT" variable.</para>
</listitem>
</itemizedlist>

<para>The following example illustrates a PinG packet that uses several of the variables and criterion types. In the following subsection is a further example that demonstrates using the rest of the variables and criterion types.</para>

<programlisting><![CDATA[
/SPECIFY PING/
RISE >= 150.
HT >= 100.
NOX TOP 100 AND SO2 TOP 100
NOX > 500.
/END/
]]></programlisting>

</section>

<section>

<title>Elevated source selection</title>

<para>The /SPECIFY ELEV/ packet is used for selecting elevated sources based on source criteria. The packet contains the following entries:</para>

<itemizedlist>
<listitem>
<para>/SPECIFY ELEV/</para>

<para>Must appear to start the packet. Only one packet of this type is permitted.</para>
</listitem>
<listitem>
<para>&lt;Source selection criteria, explained above&gt;</para>
</listitem>
<listitem>
<para>/END/</para>

<para>Must appear to end the packet.</para>
</listitem>
</itemizedlist>

<para>All of the source selection criteria for elevated sources are the same as the PinG selection criteria at this time. To use the "cutoff" method for UAM-style processing, only the "RISE" variable should be used; the packet should not contain any other selection criteria. The "cutoff" method  is the traditional approach for elevated source selection for UAM, UAM-V, REMSAD, and CAM<subscript>X</subscript>; users can decide whether they want to use this traditional approach or a more complex set of criteria.</para>

<para>The following example illustrates using all of the different source selection variables and criterion types listed in the previous subsection.</para>

<programlisting><![CDATA[
/SPECIFY ELEV/
RISE >= 40. AND RISE < 150.
NOX TOP 500
NH3 TOP 50
FIPS >= 37001 AND FIPS <= 37031
SOURCE > 100 AND SOURCE < 200
/END/
]]></programlisting>

</section>

</section>

<section>

<title><envar>PSTK</envar>: Point source stack replacement parameters file</title>

<para>The <envar>PSTK</envar> file is an ASCII file that contains the replacement stack parameters for use by <command>Smkinven</command> when stack parameters are missing from the inventory file(s). The format of the file permits stack parameters to be replaced based on the point sources' country/state/county code and SCC.</para>

<informaltable>
<tgroup cols="3">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Description" />

<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1+</entry>
<entry>A</entry>
<entry>Country/State/County code (Integer)</entry>
</row>
<row>
<entry colname="Columns">B</entry>
<entry>SCC (10-Character)</entry>
</row>
<row>
<entry colname="Columns">C</entry>
<entry>Stack height from ground [m] (Real)</entry>
</row>
<row>
<entry colname="Columns">D</entry>
<entry>Stack diameter [m] (Real)</entry>
</row>
<row>
<entry colname="Columns">E</entry>
<entry>Stack exhaust temperature [K] (Real)</entry>
</row>
<row>
<entry colname="Columns">F</entry>
<entry>Stack exhaust velocity [m/s] (Real)</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

<section>

<title><envar>PTMPLIST</envar>: List of hourly point source emissions files</title>

<para>The <envar>PTMPLIST</envar> file is an ASCII file containing the full name and path of available hourly point source emissions files. This file is created automatically from the default SMOKE run scripts.</para>

<informaltable>
<tgroup cols="3">
<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1+</entry>
<entry>A</entry>
<entry>Full name and path of hourly point source emissions file</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

</section>

</section>

<section>

<title>Other Support Files</title>

<section>

<title><envar>ARTOPNT</envar>: Area-to-point conversions</title>

<para>This file provides the point source locations to assign to stationary area and nonroad mobile sources. The file is separated into sections. Each section starts with a header that contains the SCCs that will receive the point source locations and allocation factors contained in that section. Within the section, the content and format are similar to the EMS-HAP airport allocation factor (e.g., <filename>ap_af1.sas7bdat</filename>) files.</para>

<para>Each section of the file starts with the following packet:</para>

<para>/LOCATIONS/ &lt;SCC 1&gt; &lt;SCC 2&gt; ... &lt;SCC 9&gt;</para>

<para>for SCCs 1 through 9 that apply to the section. The SCCs must be full 10-digit SCCs separated by spaces. A maximum of 9 SCCs may appear in one /LOCATIONS/ packet. If more than 9 SCCs are needed for a specific sections, than multiple /LOCATIONS/ packets may be included in subsequent rows prior to the section that they apply. In other words, two or more lines in sequence may include the/LOCATIONS/ packet, and all of the SCCs from both packets will be applied to the subsequent section of the file.</para>

<para>Within each section delineated by the /LOCATIONS/ packets, the correct format is provided in the table below.</para>

<informaltable>
<tgroup cols="4">
<thead>
<row>
<entry>Column</entry>
<entry>Name</entry>
<entry>Type</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1-6</entry>
<entry>COID</entry>
<entry>Int</entry>
<entry>Country, state, and county code (CSSYYY, where C = country, SS=state, and YYY=county) (required)</entry>
</row>
<row>
<entry>8-9</entry>
<entry>STABBR</entry>
<entry>Char 2</entry>
<entry>Postal abbreviation for state (not used by SMOKE)</entry>
</row>
<row>
<entry>11-32</entry>
<entry>COUNTY</entry>
<entry>Char 22</entry>
<entry>County name (not used by SMOKE)</entry>
</row>
<row>
<entry>34-37</entry>
<entry>LOCID</entry>
<entry>Char 4</entry>
<entry>Airport ID (unused for now, required for ISCST3)</entry>
</row>
<row>
<entry>39-61</entry>
<entry>NAME</entry>
<entry>Char 23</entry>
<entry>Airport name (if name contains spaces, commas, or semi-colons, then the entire name must be enclosed in double-quotes)</entry>
</row>
<row>
<entry>63-84</entry>
<entry>CITY</entry>
<entry>Char 22</entry>
<entry>City name (not used by SMOKE)</entry>
</row>
<row>
<entry>86-93</entry>
<entry>ARPT_USE</entry>
<entry>Char 8</entry>
<entry>Airport purpose (not used by SMOKE)</entry>
</row>
<row>
<entry>97-109</entry>
<entry>LON</entry>
<entry>Real</entry>
<entry>Longitude for the emissions (required)</entry>
</row>
<row>
<entry>114-124</entry>
<entry>LAT</entry>
<entry>Real</entry>
<entry>Latitude for the emissions (required)</entry>
</row>
<row>
<entry>126-139</entry>
<entry>ALLOC</entry>
<entry>Real</entry>
<entry>Allocation factor for this lat/lon, county, and SCC (required)</entry>
</row>
</tbody>
</tgroup>
</informaltable>

<para>The section ends with the start of another packet (indicated by a new /LOCATIONS/ header line or with the end of the file.</para>

</section>

<section>

<title><envar>COSTCY</envar>: Country, state, and county names and data</title>

<para>The <envar>COSTCY</envar> file is used to assign numeric codes to the various countries, states, and counties to be modeled; the file also provides information concerning default time zones and daylight savings observance. A header line can be used in this file to indicate that population data are contained in the file as the last column on each line of the /COUNTY/ packet (which begins on line 5 of this file). The header line and additional population column are optional. If it is present in the file, it must be on the first line of the file and use the following syntax:</para>

<para>#POPULATION &lt;year&gt;</para>

<para>where &lt;year&gt; is a 4-digit year.</para>

<para>The country, state, and county codes in each section of this file must be sorted in increasing order. If they are not, the reader for this file will give an error.</para>

<informaltable>
<tgroup cols="3">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Description" />

<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1</entry>
<entry>A</entry>
<entry>Start of country section using packet /COUNTRY/</entry>
</row>
<row>
<entry>2+</entry>
<entry>1</entry>
<entry>Country code</entry>
</row>
<row>
<entry colname="Columns">3-22</entry>
<entry>Country name</entry>
</row>
<row>
<entry>3</entry>
<entry>A</entry>
<entry>Start of state section using packet /STATE/</entry>
</row>
<row>
<entry>4+</entry>
<entry>1</entry>
<entry>Country code (Integer)</entry>
</row>
<row>
<entry colname="Columns">2-3</entry>
<entry>State code (Integer)</entry>
</row>
<row>
<entry colname="Columns">4-5</entry>
<entry>State abbreviation (Character) (not used by SMOKE)</entry>
</row>
<row>
<entry colname="Columns">7-26</entry>
<entry>State name (Character)</entry>
</row>
<row>
<entry colname="Columns">27-28</entry>
<entry>EPA Region (Integer) (not used by SMOKE)</entry>
</row>
<row>
<entry colname="Columns">32-34</entry>
<entry>Standard (non-daylight-saving) state time zone; see next table for valid time zones (Character) (optional)</entry>
</row>
<row>
<entry>5</entry>
<entry>A</entry>
<entry>Start of county section using packet /COUNTY/</entry>
</row>
<row>
<entry>6+</entry>
<entry>2-3</entry>
<entry>State abbreviation, should match the one in the /STATE/ section (Character) (not used by SMOKE)</entry>
</row>
<row>
<entry colname="Columns">5-24</entry>
<entry>County name (Character)</entry>
</row>
<row>
<entry colname="Columns">26</entry>
<entry>Country code, should match the one in the /COUNTRY/ section (Integer)</entry>
</row>
<row>
<entry colname="Columns">27-28</entry>
<entry>State code, should match the one in the /STATE/ section (Integer)</entry>
</row>
<row>
<entry colname="Columns">29-31</entry>
<entry>County code (Integer)</entry>
</row>
<row>
<entry colname="Columns">32-34</entry>
<entry>AEROS State Code (Integer) (not used by SMOKE)</entry>
</row>
<row>
<entry colname="Columns">35-38</entry>
<entry>AEROS County Code (Integer) (not used by SMOKE)</entry>
</row>
<row>
<entry colname="Columns">40-42</entry>
<entry>Standard (non-daylight-saving) county time zone; see next table for valid time zones (Character)</entry>
</row>
<row>
<entry colname="Columns">43</entry>
<entry>Leaving this field blank indicates that daylight-savings time is used in the county. Any character in this field will turn off the use of daylight-savings time in the county.</entry>
</row>
<row>
<entry colname="Columns">44-52</entry>
<entry>County center longitude [degrees] (Real) (not used by SMOKE)</entry>
</row>
<row>
<entry colname="Columns">53-61</entry>
<entry>County center latitude [degrees] (Real) (not used by SMOKE)</entry>
</row>
<row>
<entry colname="Columns">63-74</entry>
<entry>County area [square miles] (Real) (not used by SMOKE)</entry>
</row>
<row>
<entry colname="Columns">76-84</entry>
<entry>Westernmost longitude [degrees] (Real) (not used by SMOKE)</entry>
</row>
<row>
<entry colname="Columns">86-94</entry>
<entry>Easternmost longitude [degrees] (Real) (not used by SMOKE)</entry>
</row>
<row>
<entry colname="Columns">95-103</entry>
<entry>Southernmost latitude [degrees] (Real) (not used by SMOKE)</entry>
</row>
<row>
<entry colname="Columns">104-112</entry>
<entry>Northernmost latitude [degrees] (Real) (not used by SMOKE)</entry>
</row>
<row>
<entry colname="Columns">114-128</entry>
<entry>Population for the county (optional; used only by <command>Smkreport</command> for using the NORMALIZE POPULATION instruction)</entry>
</row>
</tbody>
</tgroup>
</informaltable>

<para>Valid time zones are the following.</para>

<informaltable>
<tgroup cols="3">
<thead>
<row>
<entry>GMT</entry>
<entry>Time zone</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>+0:00</entry>
<entry>GMT</entry>
<entry>Greenwich mean time (also known as Zulu time)</entry>
</row>
<row>
<entry>-4:00</entry>
<entry>AST</entry>
<entry>Atlantic standard time</entry>
</row>
<row>
<entry>-5:00</entry>
<entry>EST</entry>
<entry>Eastern standard time</entry>
</row>
<row>
<entry>-6:00</entry>
<entry>CST</entry>
<entry>Central standard time</entry>
</row>
<row>
<entry>-7:00</entry>
<entry>MST</entry>
<entry>Mountain standard time</entry>
</row>
<row>
<entry>-8:00</entry>
<entry>PST</entry>
<entry>Pacific standard time</entry>
</row>
<row>
<entry>-9:00</entry>
<entry>YST</entry>
<entry>Yukon standard time</entry>
</row>
<row>
<entry>-10:00</entry>
<entry>HST </entry>
<entry>Hawaiian  standard time</entry>
</row>
<row>
<entry>-10:00</entry>
<entry>CAT</entry>
<entry>Central Alaska time</entry>
</row>
<row>
<entry>-11:00</entry>
<entry>NT</entry>
<entry>Nome time</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

<section>

<title><envar>INVTABLE</envar>: Inventory table</title>

<para>This file replaces the <envar>SIPOLS</envar> and <envar>ACTVNAMS</envar> files previously used by SMOKE. <command>Smkinven</command> uses the inventory table to select the inventory pollutants and pollutants that will be output from <command>Smkinven</command>. The valid pollutants are again checked at the end of SMOKE processing by <command>Smkmerge</command>, to ensure the program knows about all of the pollutants and also to set the order of the output variables (output species are sorted by the order of their pollutants in the inventory table and for multiple species per pollutant, by alphabetical order) Users can drop inventory pollutants in <command>Smkinven</command> without modifying the inventory files, simply by modifying this file. <remark>Smkinven also uses the file when reading EPS 2.0-formatted criteria inventories, to assign pollutant names based on the SAROAD codes.</remark> In addition, the units used in the SMOKE intermediate files will be listed in this file. The SMOKE programs <command>Spcmat</command>, <command>Temporal</command>, and <command>Emisfac</command> use this file to determine which pollutants should be included in the NONHAPVOC or NONHAPTOG calculation.</para>

<para>It is possible for a user to choose two pollutants that result in double counting the emissions from the inventory.  For example, the user may want to model both benzo(a)pyrene and 7-PAH which would result in the emissions associated with CAS number 205992 (for benzo(a)pyrene) to be duplicated. In this situation, the user is responsible for the choices made and the resulting changes in inventory mass.</para>

<para>Note that the Factor field is also potentially used here to adjust the mass of the pollutant (e.g., for metals in the inventory that are reported as specific compounds such as lead sulfate) before combining it.</para>

<para>The inventory table is similar to the HAP table except that it uses 11-character pollutant names as the unique identifiers for each row. The format of this file is as follows:</para>

<informaltable>
<tgroup cols="3">
<thead>
<row>
<entry>Columns</entry>
<entry>Description</entry>
<entry>Type</entry>
</row>
</thead>

<tbody>
<row>
<entry>1 - 11</entry>
<entry>Inventory data name</entry>
<entry>11-character string</entry>
</row>
<row>
<entry>13 - 22</entry>
<entry>Chemical Abstract Service (CAS) number (optional, except for toxic compounds)</entry>
<entry>10-character string</entry>
</row>
<row>
<entry>24 - 28</entry>
<entry>Storage and Retrieval of Aerometric Data (SAROAD) code (optional)</entry>
<entry>Integer</entry>
</row>
<row>
<entry>30</entry>
<entry>Reactivity group (not used by SMOKE)</entry>
<entry>Integer</entry>
</row>
<row>
<entry>32</entry>
<entry>Keep (Y or N)</entry>
<entry>1-character string</entry>
</row>
<row>
<entry>34 - 38</entry>
<entry>Factor</entry>
<entry>Float</entry>
</row>
<row>
<entry>40</entry>
<entry>VOC or TOG component (V/T/N)</entry>
<entry>1-character string</entry>
</row>
<row>
<entry>42</entry>
<entry>Model species (Y/N)</entry>
<entry>1-character string</entry>
</row>
<row>
<entry>44</entry>
<entry>Explicit in mechanism (Y/N)</entry>
<entry>1-character string</entry>
</row>
<row>
<entry>46</entry>
<entry>Activity</entry>
<entry>1-character string</entry>
</row>
<row>
<entry>48 - 50</entry>
<entry>NTI</entry>
<entry>Integer</entry>
</row>
<row>
<entry>52 - 67</entry>
<entry>Units to be used in SMOKE intermediate files (<emphasis>changing not recommended</emphasis>)</entry>
<entry>16-character string</entry>
</row>
<row>
<entry>69 - 108</entry>
<entry>Inventory data description - a description of the name provided in columns 1-11.</entry>
<entry>40-character string</entry>
</row>
<row>
<entry>110 - 149</entry>
<entry>CAS pollutant description - a description of the CAS or pollutant code contained in the inventory</entry>
<entry>40-character string</entry>
</row>
</tbody>
</tgroup>
</informaltable>

<para>We have elected to use a fixed file format for this file so that we will not have to include "-9" values as missing values for columns that are unused in some cases. For example, for the line that includes VMT, we will not need placeholders for the many columns that do not apply to VMT.</para>

<para>The purposes for these columns are as follows:</para>

<itemizedlist>
<listitem>
<para>Inventory data name: Unique name for pollutant or activity that will be stored and processed by SMOKE. Because of I/O API restrictions, these names can only include alphanumeric characters and underscores, and the first character must be a letter. In addition, because SMOKE uses double-underscore as a separator when appending to variable names, no double-underscores are permitted in these names.</para>
</listitem>
<listitem>
<para>CAS number: This code represents the pollutant that is provided in the inventory file input into SMOKE.  It is named the "pollutant code" in the NIF 2.0 format, however, we call it CAS to distinguish between a SMOKE pollutant and because this number is an actual Chemical Abstracts Service (CAS) number for cases when the pollutant contained in the inventory has a valid CAS.</para>
</listitem>
<listitem>
<para>SAROAD code: Same as the SAROAD code in the HAP table. This is used by SMOKE only for reporting purposes, since the inventory data name will be used by SMOKE for assignments of profiles processing. <remark>It is also used when importing EPS2 formatted data, which identifies emissions using a 5-digit code.</remark></para>
</listitem>
<listitem>
<para>Reactivity group: The reactivity group for the ASPEN model. It is not used in SMOKE.</para>
</listitem>
<listitem>
<para>Keep: Indicates whether SMOKE should keep the CAS number associated with this inventory data name. SMOKE will keep any inventory data with at least one CAS number with a Y.</para>
</listitem>
<listitem>
<para>Factor: The adjustment factor to use in splitting the emissions associated with a CAS into different inventory data names, or reducing the mass of a metal compound associated with a CAS to account for the metal mass only.</para>
</listitem>
<listitem>
<para>VOC or TOG component: A "V" should be entered if the CAS number is part of VOC emissions or TOG emissions. A "T" should be entered if the CAS number is part of TOG emissions only. An "N" should be entered if the CAS number is neither a part of VOC or TOG. Any other value besides "V" or "T" will be treated as an "N".</para>
</listitem>
<listitem>
<para>Activity: A "Y" should be entered if the inventory data name is a type of activity instead of emissions. Any other values will be treated as an "N".</para>
</listitem>
<listitem>
<para>Model species: A "Y" should be entered if the pollutant is also a VOC model species by the air quality model being targeted for the run. Any other values will be treated as an "N".</para>
</listitem>
<listitem>
<para>Explicit in mechanism: A "Y" should be entered if the pollutant is a VOC species (model-species column must be "Y" as well), and that model-species is explicitly treated in the chemical mechanism. The pollutant is only an explicit species in the chemical mechanism when the <envar>GSPRO</envar> file definitions of the lumped VOC species have been adjusted to account for the pollutants/species that are explicit in the mechanism.  The current explicit in mechanism species being used in the toxics CB4 mechanism for CMAQ are:  formaldehyde, acetaldheyde, acrolein and 1,3 butadiene.</para>
</listitem>
<listitem>
<para>NTI:  Code identifying HAP on the Clean Air Act HAP list (list of 188 HAPs). Will be used for projecting HAP emissions to future years.</para>
</listitem>
<listitem>
<para>Units: The units to store the data in the SMOKE intermediate files. This should be "tons/year" for emissions values, miles/year for VMT, and miles/hr for speed. Although this is provided as an input field for possible future changes, these values should <emphasis>not</emphasis> be changed by the user and are unrelated to the units of the emissions in the input files.</para>
</listitem>
<listitem>
<para>Inventory data descriptions: This is the description of the inventory data name listed in the first column.</para>
</listitem>
<listitem>
<para>CAS pollutant description: Describes the pollutant that is coming from the inventory that is input into SMOKE.</para>
</listitem>
</itemizedlist>

<para><command>Smkinven</command> uses this file to confirm that the pollutant names in any input inventory file are valid. <command>Smkinven</command> only needs this file when emissions data such as CO are read, but does not need the file only activity data are being read.</para>

<para><command>Smkmerge</command> uses this file to double-check the input pollutants being merged with the gridding matrix and optionally the speciation matrix. The order of the pollutants in this file will dictate the order of the species output for each of pollutants.  Species from pollutant data will always preceed species from activity data in the <command>Smkmerge</command> output files. <command>Smkmerge</command> will sort multiple species for the same pollutant will be sorted in alphabetical order.</para>

</section>

<section>

<title><envar>NHAPEXCLUDE</envar>: NonHAP VOC calculation exclusions file</title>

<para>The purpose of this file is to allow the user a way to exclude some sources from the NONHAPVOC or NONHAPTOG calculation for both on-road and nonroad precomputed emissions. In this case, <command>Smkinven</command> will not use the toxics pollutants to compute NONHAPVOC or NONHAPTOG, but rather will keep the VOC or TOG emissions and naming the same. The toxic emissions will be retained or dropped by <command>Smkinven</command>, depending on the status of the pollutants in the Inventory Table. If the pollutant is has Y for the <envar>INVTABLE</envar> columns that indicate the pollutant is a model species and is an explicit species, then the toxic emissions will not be dropped. If the pollutant is only a model species but not an explicit species, it will be renamed with _NOI appended to the name. If it is neither a model species nor an explicit species, the toxics mass will be dropped to prevent double counting of the inventory mass.</para>

<para>The file contains the country/state, county, and SCC codes to indicate countries/states, counties, SCC codes that are excluded from the NONHAP calculation. Using this file, SMOKE will exclude any source listed in the file from the NONHAPVOC and NONHAPTOG calculation.</para>

<informaltable>
<tgroup cols="4">
<thead>
<row>
<entry>Columns</entry>
<entry>Name</entry>
<entry>Type</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>A</entry>
<entry>Country, state, and county code</entry>
<entry>Integer</entry>
<entry>Six digit FIPS code for country, state, and county as CSSYYY where C=country, SS=state, and YYY=county</entry>
</row>
<row>
<entry>B</entry>
<entry>SCC</entry>
<entry>10-character string</entry>
<entry>Ten character source classification category (SCC) code</entry>
</row>
</tbody>
</tgroup>
</informaltable>

<para>To specify that a key in this file should not be used in assigning the cross-reference criteria, zeros may for used. For example, a SCC-only cross-reference entry would have a zero for the country/state/county code. For a left-2 SCC entry, the final eight characters of the SCC in the cross-reference would be zero. The following examples illustrate entries for each of the 14 cross-reference levels listed above. See the SCC documentation in <remark>Chapter 2</remark> for information on the segment numbers for area-source SCCs.</para>

<orderedlist>
<listitem>
<para>001001 2501080050 (select a specific county and SCC)</para>
</listitem>
<listitem>
<para>001001 2501080000 (select a specific county and all SCCs that match levels 1, 2, and 3)</para>
</listitem>
<listitem>
<para>001001 2501000000 (select a specific county and all SCCs that match levels 1 and 2)</para>
</listitem>
<listitem>
<para>001001 2500000000 (select a specific county and all SCCs that match level 1)</para>
</listitem>
<listitem>
<para>001000 2501080050 (select a whole state and SCC)</para>
</listitem>
<listitem>
<para>001000 2501080000 (select a whole state and all SCCs that match levels 1, 2, and 3)</para>
</listitem>
<listitem>
<para>001000 2501000000 (select a whole state and all SCCs that match levels 1 and 2)</para>
</listitem>
<listitem>
<para>001000 2500000000 (select a whole state and all SCCs that match level 1)</para>
</listitem>
<listitem>
<para>001001   0000000000 (select all SCCs in a specific county)</para>
</listitem>
<listitem>
<para>001000   0000000000 (select all SCCs in a specific state)</para>
</listitem>
<listitem>
<para>000000   2501080050 (select a specific SCC)</para>
</listitem>
<listitem>
<para>000000   2501080000 (select all SCCs that match levels 1, 2, and 3)</para>
</listitem>
<listitem>
<para>000000   2501000000 (select all SCCs that match levels 1 and 2)</para>
</listitem>
<listitem>
<para>000000   2500000000 (select all SCCs that match level 1)</para>
</listitem>
</orderedlist>

</section>

<section>

<title><envar>ORISDESC</envar>: ORIS description</title>

<para>This file provides descriptive information for the ORIS IDs, which <command>Smkinven</command> uses when reporting the status of reading and matching CEM data. The information in this file will appear in the <envar>REPINVEN</envar> output file from <command>Smkinven</command>. The <envar>ORISDESC</envar> file is a list-formatted, 11-column file with the following column information. Note that only the first five columns of data need to appear in the file; the rest can be blank since SMOKE does not use any information past column E.</para>

<informaltable>
<tgroup cols="3">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Description" />

<thead>
<row>
<entry>Line</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1+</entry>
<entry>A</entry>
<entry>DOE Plant ID (ORIS ID) (6-character string); must match the same field in the IDA-formatted PTINV file.</entry>
</row>
<row>
<entry colname="Columns">B</entry>
<entry>Country/State/County code (FIPS code) (6-digit integer)</entry>
</row>
<row>
<entry colname="Columns">C</entry>
<entry>Latitude (not used by SMOKE), use -9 for missing</entry>
</row>
<row>
<entry colname="Columns">D</entry>
<entry>Longitude (not used by SMOKE), use -9 for missing</entry>
</row>
<row>
<entry colname="Columns">E</entry>
<entry>Plant name (80-character string)</entry>
</row>
<row>
<entry colname="Columns">F</entry>
<entry>Operating company (not used by SMOKE)</entry>
</row>
<row>
<entry colname="Columns">G</entry>
<entry>EPA Region (not used by SMOKE)</entry>
</row>
<row>
<entry colname="Columns">H</entry>
<entry>State name (not used by SMOKE)</entry>
</row>
<row>
<entry colname="Columns">I</entry>
<entry>County name (not used by SMOKE)</entry>
</row>
<row>
<entry colname="Columns">J</entry>
<entry>North American Electric Reliability Council Region (e.g., ASCC, ECAR, ERCOT, MAAC, MAIN, MAPP, NPCC, SERC, SPP, WSCC) (not used by SMOKE)</entry>
</row>
<row>
<entry colname="Columns">K</entry>
<entry><para>Acid rain program phase (not used by SMOKE)</para>

<itemizedlist>
<listitem>P1 = Phase I Generator, regulation began in 1995-1999</listitem>
<listitem>P1.5 = Phase II Generator, source opted to begin early regulation prior to the year 2000</listitem>
<listitem>P2 = Phase II Generator, generator regulation began in year 2000</listitem>
<listitem>If blank then plant is likely in a nongenerating status (such as retired, deferred, exempt, or future)</listitem>
</itemizedlist>

</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

<section>

<title><envar>SCCDESC</envar>: Source category code descriptions</title>

<para>This file provides textual descriptions of the SCCs, which are used by two programs:</para>

<itemizedlist>
<listitem>
<para><command>Smkinven</command> when reading hourly emissions data (for reporting in the <envar>REPINVEN</envar> output file).</para>
</listitem>
<listitem>
<para><command>Smkreport</command> when user requests the SCC description be included in the report.</para>
</listitem>
</itemizedlist>

<para>This file should not include any descriptions that have the pipe symbol ("|"), single quotes, or double quotes. It is okay to include dashes, slashes, semicolons, colons, commas, and periods in descriptions.</para>

<para>It is a 2-column, list-formatted file as follows:</para>

<informaltable>
<tgroup cols="3">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Description" />

<thead>
<row>
<entry>Lines</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1+</entry>
<entry>A</entry>
<entry>SCC (10-character string)</entry>
</row>
<row>
<entry colname="Columns">B</entry>
<entry>SCC description (200-character string)</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

<section>

<title><envar>VNAMMAP</envar>: Variable name mapping file</title>

<para>This file is used to rename variables output from <command>Smk2emis</command>, which converts the I/O API format to the 2-D-UAM "EMISSIONS" file format. The <envar>VNAMMAP</envar> file lists the SMOKE variable names and the variable names to be output from <command>Smk2emis</command>. It is needed for SMOKE support of UAM-AERO, which requires variable names that cannot be supported by the netCDF format. Please see the <command>Smk2emis</command> documentation in <remark>Chapter 5</remark> for more information on how to use this optional file with <command>Smk2emis</command>.</para>

<para>The format of the <envar>VNAMMAP</envar> file is the following:</para>

<informaltable>
<tgroup cols="3">
<colspec colname="Line" />
<colspec colname="Columns" />
<colspec colname="Description" />

<thead>
<row>
<entry>Lines</entry>
<entry>Columns</entry>
<entry>Description</entry>
</row>
</thead>

<tbody>
<row>
<entry>1+</entry>
<entry>A</entry>
<entry>SMOKE I/O API variable name</entry>
</row>
<row>
<entry colname="Columns">B</entry>
<entry><command>Smk2emis</command> output name to be written to the UAM "EMISSIONS" file binary format</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</section>

</section>

</chapter>
